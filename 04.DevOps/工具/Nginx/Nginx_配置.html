<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.67" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://dunwu.github.io/waterdrop/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html"><meta property="og:site_name" content="钝悟"><meta property="og:title" content="Nginx 配置"><meta property="og:description" content="Nginx 配置 Nginx 的默认配置文件为 nginx.conf。 nginx -c xxx.conf - 以指定的文件作为配置文件，启动 Nginx。 配置文件实例 以下为一个 nginx.conf 配置文件实例： #定义 nginx 运行的用户和用户组 user www www; #nginx 进程数，建议设置为等于 CPU 总核心数。 worker_processes 8; #nginx 默认没有开启利用多核 CPU, 通过增加 worker_cpu_affinity 配置参数来充分利用多核 CPU 以下是 8 核的配置参数 worker_cpu_affinity 00000001 00000010 00000100 00001000 00010000 00100000 01000000 10000000; #全局错误日志定义类型，[ debug | info | notice | warn | error | crit ] error_log /var/log/nginx/error.log info; #进程文件 pid /var/run/nginx.pid; #一个 nginx 进程打开的最多文件描述符数目，理论值应该是最多打开文件数（系统的值 ulimit -n）与 nginx 进程数相除，但是 nginx 分配请求并不均匀，所以建议与 ulimit -n 的值保持一致。 worker_rlimit_nofile 65535; #工作模式与连接数上限 events { #参考事件模型，use [ kqueue | rtsig | epoll | /dev/poll | select | poll ]; epoll 模型是 Linux 2.6 以上版本内核中的高性能网络 I/O 模型，如果跑在 FreeBSD 上面，就用 kqueue 模型。 #epoll 是多路复用 IO(I/O Multiplexing) 中的一种方式，但是仅用于 linux2.6 以上内核，可以大大提高 nginx 的性能 use epoll; ############################################################################ #单个后台 worker process 进程的最大并发链接数 #事件模块指令，定义 nginx 每个进程最大连接数，默认 1024。最大客户连接数由 worker_processes 和 worker_connections 决定 #即 max_client=worker_processes*worker_connections, 在作为反向代理时：max_client=worker_processes*worker_connections / 4 worker_connections 65535; ############################################################################ } #设定 http 服务器 http { include mime.types; #文件扩展名与文件类型映射表 default_type application/octet-stream; #默认文件类型 #charset utf-8; #默认编码 server_names_hash_bucket_size 128; #服务器名字的 hash 表大小 client_header_buffer_size 32k; #上传文件大小限制 large_client_header_buffers 4 64k; #设定请求缓 client_max_body_size 8m; #设定请求缓 sendfile on; #开启高效文件传输模式，sendfile 指令指定 nginx 是否调用 sendfile 函数来输出文件，对于普通应用设为 on，如果用来进行下载等应用磁盘 IO 重负载应用，可设置为 off，以平衡磁盘与网络 I/O 处理速度，降低系统的负载。注意：如果图片显示不正常把这个改成 off。 autoindex on; #开启目录列表访问，合适下载服务器，默认关闭。 tcp_nopush on; #防止网络阻塞 tcp_nodelay on; #防止网络阻塞 ##连接客户端超时时间各种参数设置## keepalive_timeout 120; #单位是秒，客户端连接时时间，超时之后服务器端自动关闭该连接 如果 nginx 守护进程在这个等待的时间里，一直没有收到浏览发过来 http 请求，则关闭这个 http 连接 client_header_timeout 10; #客户端请求头的超时时间 client_body_timeout 10; #客户端请求主体超时时间 reset_timedout_connection on; #告诉 nginx 关闭不响应的客户端连接。这将会释放那个客户端所占有的内存空间 send_timeout 10; #客户端响应超时时间，在两次客户端读取操作之间。如果在这段时间内，客户端没有读取任何数据，nginx 就会关闭连接 ################################ #FastCGI 相关参数是为了改善网站的性能：减少资源占用，提高访问速度。下面参数看字面意思都能理解。 fastcgi_connect_timeout 300; fastcgi_send_timeout 300; fastcgi_read_timeout 300; fastcgi_buffer_size 64k; fastcgi_buffers 4 64k; fastcgi_busy_buffers_size 128k; fastcgi_temp_file_write_size 128k; ###作为代理缓存服务器设置####### ###先写到 temp 再移动到 cache #proxy_cache_path /var/tmp/nginx/proxy_cache levels=1:2 keys_zone=cache_one:512m inactive=10m max_size=64m; ###以上 proxy_temp 和 proxy_cache 需要在同一个分区中 ###levels=1:2 表示缓存级别，表示缓存目录的第一级目录是 1 个字符，第二级目录是 2 个字符 keys_zone=cache_one:128m 缓存空间起名为 cache_one 大小为 512m ###max_size=64m 表示单个文件超过 128m 就不缓存了 inactive=10m 表示缓存的数据，10 分钟内没有被访问过就删除 #########end#################### #####对传输文件压缩########### #gzip 模块设置 gzip on; #开启 gzip 压缩输出 gzip_min_length 1k; #最小压缩文件大小 gzip_buffers 4 16k; #压缩缓冲区 gzip_http_version 1.0; #压缩版本（默认 1.1，前端如果是 squid2.5 请使用 1.0） gzip_comp_level 2; #压缩等级，gzip 压缩比，1 为最小，处理最快；9 为压缩比最大，处理最慢，传输速度最快，也最消耗 CPU； gzip_types text/plain application/x-javascript text/css application/xml; #压缩类型，默认就已经包含 text/html，所以下面就不用再写了，写上去也不会有问题，但是会有一个 warn。 gzip_vary on; ############################## #limit_zone crawler $binary_remote_addr 10m; #开启限制 IP 连接数的时候需要使用 upstream blog.ha97.com { #upstream 的负载均衡，weight 是权重，可以根据机器配置定义权重。weigth 参数表示权值，权值越高被分配到的几率越大。 server 192.168.80.121:80 weight=3; server 192.168.80.122:80 weight=2; server 192.168.80.123:80 weight=3; } #虚拟主机的配置 server { #监听端口 listen 80; #############https################## #listen 443 ssl; #ssl_certificate /opt/https/xxxxxx.crt; #ssl_certificate_key /opt/https/xxxxxx.key; #ssl_protocols SSLv3 TLSv1; #ssl_ciphers HIGH:!ADH:!EXPORT57:RC4+RSA:+MEDIUM; #ssl_prefer_server_ciphers on; #ssl_session_cache shared:SSL:2m; #ssl_session_timeout 5m; ####################################end #域名可以有多个，用空格隔开 server_name www.ha97.com ha97.com; index index.html index.htm index.php; root /data/www/ha97; location ~ .*.(php|php5)?$ { fastcgi_pass 127.0.0.1:9000; fastcgi_index index.php; include fastcgi.conf; } #图片缓存时间设置 location ~ .*.(gif|jpg|jpeg|png|bmp|swf)$ { expires 10d; } #JS 和 CSS 缓存时间设置 location ~ .*.(js|css)?$ { expires 1h; } #日志格式设定 log_format access '$remote_addr - $remote_user [$time_local] "$request" ' '$status $body_bytes_sent "$http_referer" ' '"$http_user_agent" $http_x_forwarded_for'; #定义本虚拟主机的访问日志 access_log /var/log/nginx/ha97access.log access; #对 "/" 启用反向代理 location / { proxy_pass http://127.0.0.1:88; proxy_redirect off; proxy_set_header X-Real-IP $remote_addr; #后端的 Web 服务器可以通过 X-Forwarded-For 获取用户真实 IP proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; #以下是一些反向代理的配置，可选。 proxy_set_header Host $host; client_max_body_size 10m; #允许客户端请求的最大单文件字节数 client_body_buffer_size 128k; #缓冲区代理缓冲用户端请求的最大字节数， ##代理设置 以下设置是 nginx 和后端服务器之间通讯的设置## proxy_connect_timeout 90; #nginx 跟后端服务器连接超时时间（代理连接超时） proxy_send_timeout 90; #后端服务器数据回传时间（代理发送超时） proxy_read_timeout 90; #连接成功后，后端服务器响应时间（代理接收超时） proxy_buffering on; #该指令开启从后端被代理服务器的响应内容缓冲 此参数开启后 proxy_buffers 和 proxy_busy_buffers_size 参数才会起作用 proxy_buffer_size 4k; #设置代理服务器（nginx）保存用户头信息的缓冲区大小 proxy_buffers 4 32k; #proxy_buffers 缓冲区，网页平均在 32k 以下的设置 proxy_busy_buffers_size 64k; #高负荷下缓冲大小（proxy_buffers*2） proxy_max_temp_file_size 2048m; #默认 1024m, 该指令用于设置当网页内容大于 proxy_buffers 时，临时文件大小的最大值。如果文件大于这个值，它将从 upstream 服务器同步地传递请求，而不是缓冲到磁盘 proxy_temp_file_write_size 512k; 这是当被代理服务器的响应过大时 nginx 一次性写入临时文件的数据量。 proxy_temp_path /var/tmp/nginx/proxy_temp; ##定义缓冲存储目录，之前必须要先手动创建此目录 proxy_headers_hash_max_size 51200; proxy_headers_hash_bucket_size 6400; ####################################################### } #设定查看 nginx 状态的地址 location /nginxStatus { stub_status on; access_log on; auth_basic "nginxStatus"; auth_basic_user_file conf/htpasswd; #htpasswd 文件的内容可以用 apache 提供的 htpasswd 工具来产生。 } #本地动静分离反向代理配置 #所有 jsp 的页面均交由 tomcat 或 resin 处理 location ~ .(jsp|jspx|do)?$ { proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_pass http://127.0.0.1:8080; } #所有静态文件由 nginx 直接读取不经过 tomcat 或 resin location ~ .*.(htm|html|gif|jpg|jpeg|png|bmp|swf|ioc|rar|zip|txt|flv|mid|doc|ppt|pdf|xls|mp3|wma)$ { expires 15d; } location ~ .*.(js|css)?$ { expires 1h; } } }"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-09-24T23:49:46.000Z"><meta property="article:author" content="钝悟"><meta property="article:tag" content="DevOps"><meta property="article:tag" content="Nginx"><meta property="article:published_time" content="2020-02-02T17:54:00.000Z"><meta property="article:modified_time" content="2025-09-24T23:49:46.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Nginx 配置","image":[""],"datePublished":"2020-02-02T17:54:00.000Z","dateModified":"2025-09-24T23:49:46.000Z","author":[{"@type":"Person","name":"钝悟","url":"https://dunwu.github.io/waterdrop"}]}</script><title>Nginx 配置 | 钝悟</title><meta name="description" content="Nginx 配置 Nginx 的默认配置文件为 nginx.conf。 nginx -c xxx.conf - 以指定的文件作为配置文件，启动 Nginx。 配置文件实例 以下为一个 nginx.conf 配置文件实例： #定义 nginx 运行的用户和用户组 user www www; #nginx 进程数，建议设置为等于 CPU 总核心数。 worker_processes 8; #nginx 默认没有开启利用多核 CPU, 通过增加 worker_cpu_affinity 配置参数来充分利用多核 CPU 以下是 8 核的配置参数 worker_cpu_affinity 00000001 00000010 00000100 00001000 00010000 00100000 01000000 10000000; #全局错误日志定义类型，[ debug | info | notice | warn | error | crit ] error_log /var/log/nginx/error.log info; #进程文件 pid /var/run/nginx.pid; #一个 nginx 进程打开的最多文件描述符数目，理论值应该是最多打开文件数（系统的值 ulimit -n）与 nginx 进程数相除，但是 nginx 分配请求并不均匀，所以建议与 ulimit -n 的值保持一致。 worker_rlimit_nofile 65535; #工作模式与连接数上限 events { #参考事件模型，use [ kqueue | rtsig | epoll | /dev/poll | select | poll ]; epoll 模型是 Linux 2.6 以上版本内核中的高性能网络 I/O 模型，如果跑在 FreeBSD 上面，就用 kqueue 模型。 #epoll 是多路复用 IO(I/O Multiplexing) 中的一种方式，但是仅用于 linux2.6 以上内核，可以大大提高 nginx 的性能 use epoll; ############################################################################ #单个后台 worker process 进程的最大并发链接数 #事件模块指令，定义 nginx 每个进程最大连接数，默认 1024。最大客户连接数由 worker_processes 和 worker_connections 决定 #即 max_client=worker_processes*worker_connections, 在作为反向代理时：max_client=worker_processes*worker_connections / 4 worker_connections 65535; ############################################################################ } #设定 http 服务器 http { include mime.types; #文件扩展名与文件类型映射表 default_type application/octet-stream; #默认文件类型 #charset utf-8; #默认编码 server_names_hash_bucket_size 128; #服务器名字的 hash 表大小 client_header_buffer_size 32k; #上传文件大小限制 large_client_header_buffers 4 64k; #设定请求缓 client_max_body_size 8m; #设定请求缓 sendfile on; #开启高效文件传输模式，sendfile 指令指定 nginx 是否调用 sendfile 函数来输出文件，对于普通应用设为 on，如果用来进行下载等应用磁盘 IO 重负载应用，可设置为 off，以平衡磁盘与网络 I/O 处理速度，降低系统的负载。注意：如果图片显示不正常把这个改成 off。 autoindex on; #开启目录列表访问，合适下载服务器，默认关闭。 tcp_nopush on; #防止网络阻塞 tcp_nodelay on; #防止网络阻塞 ##连接客户端超时时间各种参数设置## keepalive_timeout 120; #单位是秒，客户端连接时时间，超时之后服务器端自动关闭该连接 如果 nginx 守护进程在这个等待的时间里，一直没有收到浏览发过来 http 请求，则关闭这个 http 连接 client_header_timeout 10; #客户端请求头的超时时间 client_body_timeout 10; #客户端请求主体超时时间 reset_timedout_connection on; #告诉 nginx 关闭不响应的客户端连接。这将会释放那个客户端所占有的内存空间 send_timeout 10; #客户端响应超时时间，在两次客户端读取操作之间。如果在这段时间内，客户端没有读取任何数据，nginx 就会关闭连接 ################################ #FastCGI 相关参数是为了改善网站的性能：减少资源占用，提高访问速度。下面参数看字面意思都能理解。 fastcgi_connect_timeout 300; fastcgi_send_timeout 300; fastcgi_read_timeout 300; fastcgi_buffer_size 64k; fastcgi_buffers 4 64k; fastcgi_busy_buffers_size 128k; fastcgi_temp_file_write_size 128k; ###作为代理缓存服务器设置####### ###先写到 temp 再移动到 cache #proxy_cache_path /var/tmp/nginx/proxy_cache levels=1:2 keys_zone=cache_one:512m inactive=10m max_size=64m; ###以上 proxy_temp 和 proxy_cache 需要在同一个分区中 ###levels=1:2 表示缓存级别，表示缓存目录的第一级目录是 1 个字符，第二级目录是 2 个字符 keys_zone=cache_one:128m 缓存空间起名为 cache_one 大小为 512m ###max_size=64m 表示单个文件超过 128m 就不缓存了 inactive=10m 表示缓存的数据，10 分钟内没有被访问过就删除 #########end#################### #####对传输文件压缩########### #gzip 模块设置 gzip on; #开启 gzip 压缩输出 gzip_min_length 1k; #最小压缩文件大小 gzip_buffers 4 16k; #压缩缓冲区 gzip_http_version 1.0; #压缩版本（默认 1.1，前端如果是 squid2.5 请使用 1.0） gzip_comp_level 2; #压缩等级，gzip 压缩比，1 为最小，处理最快；9 为压缩比最大，处理最慢，传输速度最快，也最消耗 CPU； gzip_types text/plain application/x-javascript text/css application/xml; #压缩类型，默认就已经包含 text/html，所以下面就不用再写了，写上去也不会有问题，但是会有一个 warn。 gzip_vary on; ############################## #limit_zone crawler $binary_remote_addr 10m; #开启限制 IP 连接数的时候需要使用 upstream blog.ha97.com { #upstream 的负载均衡，weight 是权重，可以根据机器配置定义权重。weigth 参数表示权值，权值越高被分配到的几率越大。 server 192.168.80.121:80 weight=3; server 192.168.80.122:80 weight=2; server 192.168.80.123:80 weight=3; } #虚拟主机的配置 server { #监听端口 listen 80; #############https################## #listen 443 ssl; #ssl_certificate /opt/https/xxxxxx.crt; #ssl_certificate_key /opt/https/xxxxxx.key; #ssl_protocols SSLv3 TLSv1; #ssl_ciphers HIGH:!ADH:!EXPORT57:RC4+RSA:+MEDIUM; #ssl_prefer_server_ciphers on; #ssl_session_cache shared:SSL:2m; #ssl_session_timeout 5m; ####################################end #域名可以有多个，用空格隔开 server_name www.ha97.com ha97.com; index index.html index.htm index.php; root /data/www/ha97; location ~ .*.(php|php5)?$ { fastcgi_pass 127.0.0.1:9000; fastcgi_index index.php; include fastcgi.conf; } #图片缓存时间设置 location ~ .*.(gif|jpg|jpeg|png|bmp|swf)$ { expires 10d; } #JS 和 CSS 缓存时间设置 location ~ .*.(js|css)?$ { expires 1h; } #日志格式设定 log_format access '$remote_addr - $remote_user [$time_local] "$request" ' '$status $body_bytes_sent "$http_referer" ' '"$http_user_agent" $http_x_forwarded_for'; #定义本虚拟主机的访问日志 access_log /var/log/nginx/ha97access.log access; #对 "/" 启用反向代理 location / { proxy_pass http://127.0.0.1:88; proxy_redirect off; proxy_set_header X-Real-IP $remote_addr; #后端的 Web 服务器可以通过 X-Forwarded-For 获取用户真实 IP proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; #以下是一些反向代理的配置，可选。 proxy_set_header Host $host; client_max_body_size 10m; #允许客户端请求的最大单文件字节数 client_body_buffer_size 128k; #缓冲区代理缓冲用户端请求的最大字节数， ##代理设置 以下设置是 nginx 和后端服务器之间通讯的设置## proxy_connect_timeout 90; #nginx 跟后端服务器连接超时时间（代理连接超时） proxy_send_timeout 90; #后端服务器数据回传时间（代理发送超时） proxy_read_timeout 90; #连接成功后，后端服务器响应时间（代理接收超时） proxy_buffering on; #该指令开启从后端被代理服务器的响应内容缓冲 此参数开启后 proxy_buffers 和 proxy_busy_buffers_size 参数才会起作用 proxy_buffer_size 4k; #设置代理服务器（nginx）保存用户头信息的缓冲区大小 proxy_buffers 4 32k; #proxy_buffers 缓冲区，网页平均在 32k 以下的设置 proxy_busy_buffers_size 64k; #高负荷下缓冲大小（proxy_buffers*2） proxy_max_temp_file_size 2048m; #默认 1024m, 该指令用于设置当网页内容大于 proxy_buffers 时，临时文件大小的最大值。如果文件大于这个值，它将从 upstream 服务器同步地传递请求，而不是缓冲到磁盘 proxy_temp_file_write_size 512k; 这是当被代理服务器的响应过大时 nginx 一次性写入临时文件的数据量。 proxy_temp_path /var/tmp/nginx/proxy_temp; ##定义缓冲存储目录，之前必须要先手动创建此目录 proxy_headers_hash_max_size 51200; proxy_headers_hash_bucket_size 6400; ####################################################### } #设定查看 nginx 状态的地址 location /nginxStatus { stub_status on; access_log on; auth_basic "nginxStatus"; auth_basic_user_file conf/htpasswd; #htpasswd 文件的内容可以用 apache 提供的 htpasswd 工具来产生。 } #本地动静分离反向代理配置 #所有 jsp 的页面均交由 tomcat 或 resin 处理 location ~ .(jsp|jspx|do)?$ { proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_pass http://127.0.0.1:8080; } #所有静态文件由 nginx 直接读取不经过 tomcat 或 resin location ~ .*.(htm|html|gif|jpg|jpeg|png|bmp|swf|ioc|rar|zip|txt|flv|mid|doc|ppt|pdf|xls|mp3|wma)$ { expires 15d; } location ~ .*.(js|css)?$ { expires 1h; } } }">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/waterdrop/assets/style-1f06e589.css" as="style"><link rel="stylesheet" href="/waterdrop/assets/style-1f06e589.css">
    <link rel="modulepreload" href="/waterdrop/assets/app-c4d395b2.js"><link rel="modulepreload" href="/waterdrop/assets/Nginx_配置.html-989cc262.js"><link rel="modulepreload" href="/waterdrop/assets/plugin-vue_export-helper-c27b6911.js"><link rel="modulepreload" href="/waterdrop/assets/Nginx_配置.html-75ec38fc.js"><link rel="prefetch" href="/waterdrop/assets/index.html-23c27814.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-30084615.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c8d361c4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-04f16bcf.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d3e3022f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-44c719ad.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0a242813.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b8b76e21.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-213245a5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a98b07d2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e9066077.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bc5ce9d9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-830e08aa.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d40ef419.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-02e736b2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c0f474df.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0acf68db.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cd3ec77b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-77ecaeb9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4fb72db7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3dd703fc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7ced10c5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-18372532.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5c585183.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-528bf0bd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-975834f2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1917026f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-313759d7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-46d075df.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e4cd15d3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-778926a0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-868ad25a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7629455e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d6590eaf.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f0c9fbbc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0910a7f8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a9534769.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b627a354.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a4c67f3c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-47b53aad.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6404ac28.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2ff18702.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7c0c611b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8cf75f1c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d7cdc539.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fcc7a009.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-11a9d639.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3394b391.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3f9c05e7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ec7ea804.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e9c03300.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-76a77f06.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-af1c711e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-485b5523.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1d3225d7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f14df7fe.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-42a4e8e3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-006aedfa.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5bd674c3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-79f671c6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-836953f0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1c571799.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-45d17dfe.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0ef62c7c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-87e5ff52.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2d21ae95.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-04ce037c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-093e88b1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-40b2fc6e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a92e8003.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6a0aebbf.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f1a4e207.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b835ac2f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bef004c4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c61937c3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7391d776.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-30bf872b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cdfe4bfe.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-183982ae.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0a09c07f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-08cae1ae.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-33c4a98f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3441f73b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-40f2cc52.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e6c540f6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1eacc54d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bab3ebec.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-526d6f42.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-49bbacc6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2d147991.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-07c76b69.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-20c31ce1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3405a51e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7337e85b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a3381937.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-12c1906f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-565a8eca.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d518ee56.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5315f063.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-988bad0d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-91e9bf69.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d3623932.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9b3c66bd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-aa14b199.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4289c7aa.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d7766028.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-13b1b62f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b44ea20d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4dd8cc71.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4de79be8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f08dd034.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6552f147.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8cb4bce7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4a220afd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6cbd59fa.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fcb00dc6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4815bb0a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-644be606.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ef828d97.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-85a1be63.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9dc2e16d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a75c94f7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-87412cdd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9c2946c8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-46ca7f15.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ee2e90a6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cd32c75f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-53262613.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-18d6d642.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f1bfa42b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-dfeb4ac4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-80e25a5e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3c55e969.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-11add701.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ae744211.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-48afbaff.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-20c40f12.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-88582afb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8385fc1b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d1a9441d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cb932835.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5ad2d558.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0895b351.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-50ca4a38.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ac591ae8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cd0dc8c6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-264d8179.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0b21f855.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0c95f1d9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3b062b1e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ae4070b7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b6063726.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4838cc25.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1a510683.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-065d5fdc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4e7e6614.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-36519587.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a7cb525c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7c69a877.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-203709ed.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-262a82ce.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-62e45fda.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fe2424ef.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-31692129.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d9396ced.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-12270181.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b9bf533a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5c670b78.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5bcb584a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-96e38a79.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7a5eb4e6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6f7351c6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c33f3e3c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-10aaf9e8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8897cc28.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-64484247.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-388afb93.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b9e44dd9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7938ccc4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4793345d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-00eb65bd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fa8c6a0e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-216ac25a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b3c4ad38.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f50b2386.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d3090d2a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-90bd2f9b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-35848efc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-881fa523.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-325c1a06.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9b318da3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fed7d0a7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cd2d5ba0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c14b8be3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3580e503.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-46064245.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-541ef5c0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-49eac243.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7a81c1ab.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ead14714.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-44914f6b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1dd8691b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0b8da0fb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4db36360.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6a4de5ad.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5459dd1f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4a7853b4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d4e7b2f0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6386f6cc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8f206842.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-32298ba9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9aa3c7d4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0b2dee48.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e3893da9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a94d98bd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6a1b34bc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cd2d1f05.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-487989f3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e667deaf.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0493b591.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-efa55d15.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-85a17173.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8d812289.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fc19b8d5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ab866444.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cb84c10f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c73dd7cc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8f7867ab.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cbf9e73b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9c5a7e08.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5335df5e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e4b055ad.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e5281f07.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0478e92e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fc1fc44e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ad76c649.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c78fbe40.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bb241771.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d1f2b047.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-90c4e456.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5221210f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-947ca13c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-94064a0b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1f10a5e5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-07e9c4e5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-58965e0b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e16d59bc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2de76232.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-59d0a31d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1a91f6a2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cfa39ba8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2715363e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-66fd0c52.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-450ff0b8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-717b0d0f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4a6c019a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-21a97cd3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-be11f114.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-18e3da6a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e67b0a39.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a829e3e4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-96f96576.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-35568b20.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ad1d8075.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-43c25792.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-841ceb97.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-053a916c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-effe1f60.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-964e094e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9ee4e9b0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-357c8642.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f178480f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fcadcc69.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9d4819eb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-40bbc279.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3bea1336.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1438a0fc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6ed2586a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1923fcd7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-024f6029.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-eb279b57.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a0019c6c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2219b7bb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9aa33b91.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-02838e0f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c86681be.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1f80de9c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-deb77e2a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ba44f06a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-96d51335.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b2486c74.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4072e5f4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-626906a6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bf0e2bb4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9d8b7c51.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7c502492.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-da53c033.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-56a3bdfe.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8cc76ce6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4043e1bb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-20c378bd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6204a6f9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3312f466.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-62ba2497.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b08ef948.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5ae2ccac.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7ddd7ddb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4d2f836c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4ccdd248.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9b60a56a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1926ded9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f077b4b9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-239a4857.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-60866292.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d6b2daa3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-66bde5e6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c6ebd57a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-92670b07.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a7106615.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7c48f932.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5b816787.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cc4b55ca.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-875763c3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-57beed00.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-172b4af4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-74d65162.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-66f73952.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bb564d01.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9993f632.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ccdd4df2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8d2108f1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-aa4d162a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b7c018cb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f0daec81.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fd896928.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5264de76.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7abfcb4d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-db68d9d3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fdf5c6d2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-98149e18.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-962cd336.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4b407ed8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3aebe938.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d32d9d14.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-43320564.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-98cb8503.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-da98d1b1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a00434f7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-492b7a85.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1e74228c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5efb76a2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-35b58dcd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-392883f8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e814f270.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-26e5f24a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-912d0c27.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-991a396a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1e1f0cd7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d586eed0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d5df0d75.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-684020be.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-95f3dccc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6f074185.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8fbac10b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a557f554.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bbb991d2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a2adda53.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f85a9703.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-59e9a879.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-88b0ebf0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d8a260d2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-53dd03f6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-08538687.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ff2d3522.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-eef0fe49.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1b517461.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-52d9142c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-91a1ff0b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-eff39d24.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a88ecf40.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8f59a0da.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8f5bd889.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ed60623a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8d1659cd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d423f5e2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-664e95a3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bbbfc7a8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8b5cce51.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0077f73f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-65c52587.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-859bc8fe.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cc9927d4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-558aee77.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-83d7c4e0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f94f7ef4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-02635c4e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c4f05136.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0414498c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-122ad617.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-001cef48.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e7f31d9b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-31e9e909.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7faaf053.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b20bb6dd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fb33a832.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fddd8187.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-be18a592.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d7c8b87c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8d840004.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-33230c75.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-30b584ae.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-348ee476.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4de04fd0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b64563b2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1bc88cc9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-aa0aab88.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-23e05a92.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-080838bb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-dc6316d3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/Docker_Compose.html-31c3347a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/Docker_Dockerfile.html-367f9dfe.js" as="script"><link rel="prefetch" href="/waterdrop/assets/Docker_快速入门.html-ca37253a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/Docker_面试.html-45b9f795.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b3326c0a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-46d05ed7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-99aa542b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3fcecab3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/K8S.html-55ebfb30.js" as="script"><link rel="prefetch" href="/waterdrop/assets/K8S_面试.html-258941e3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-86216578.js" as="script"><link rel="prefetch" href="/waterdrop/assets/Nginx_快速入门.html-3ae2c050.js" as="script"><link rel="prefetch" href="/waterdrop/assets/Nginx_简介.html-442c0b8c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/Nginx_运维.html-ab7adad8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/Nginx_面试.html-1659650c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-05558544.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5248be4e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-979dab56.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-77ff89fa.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f172029f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e4a09a67.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8e8691be.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2d351f39.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b4f30d63.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-140262a2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7075d8af.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6728610b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c202eb45.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-da800ff8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d909b40e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d2157c63.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a6b6d824.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-edfe44b7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-71f5b033.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-86800f9c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f769be84.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5a2a90eb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-82aa450d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-edbb6f06.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4dfd10ab.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ddd18f34.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fe0c43f4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1d6ec2c4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a751e4f5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-03f41b66.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5299b09d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4df23d34.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-66b5e4c8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2f5431e6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d5ceb88e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d16e3f59.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bee4445b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-56d84e51.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-54d34ba1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fbedb948.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b3418b47.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cc81a1e3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c28f83ef.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1018d0bb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-644ddfc2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-62f29049.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c23bd42d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ebefd3a3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3bc06741.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bb5a8d11.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-863d0fbf.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9b508288.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9824858c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ea336936.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9995a959.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-10d61aa8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6706fbf8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-63855cc9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a3719cb1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-13d695a0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d81a1423.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b8c78f20.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1fd5a69f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-47cdf708.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2fcca31e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f473e018.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5a7920c1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4f8d7121.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5fd26001.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-89eb5f57.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d62c5549.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3251c785.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1bad4101.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-14e9b926.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2d536ea5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-204ae7cd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-029b5303.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-36e749b6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d7dd8e78.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-822680fe.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-38d6aadc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-837f9b90.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b2acaf0a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ae5d82f7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a00f3c19.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-22a7c84d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cca9fa3a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ba12fa72.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9338f96f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fd59a584.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-dfb98e70.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f03ba6c3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-23fb68c6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c96cc5a2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1338050e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9cbffd85.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-51115155.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3226c36c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0db01363.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-499a8ab7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d22473cc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6c0712f7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4cd3150d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2ea7e477.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f1e06078.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fc0bbfe7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-40e79827.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3e0aa3ec.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-492dae3a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-040deed1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-51e93422.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a250a70f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7e7deea1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-40670432.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ac2f24a8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-07c1e267.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-128932f0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e776c1d0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f6afce37.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-571713c8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f2c651be.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a5de335b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1f0e1670.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-354ba5af.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2eefc4e5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bfc1772a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ef82c4ad.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ac684d9a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-21f1b5a7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a6df1a67.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-999eeee7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1bab7fd8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f787b65a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f1b0e588.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f4b4675d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-413e38b8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-69a6488c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-15deaed2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-785bf3f1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-112de6d6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8b3dc5b4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-99b67be9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b1966433.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-79aff5ff.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-943f762e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c66b296e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e1c6186d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4728dfba.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-40ee36c3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4de73e97.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3ff93108.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-60d23ebc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-144aa47e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d5556561.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-77e4999f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-56b4f669.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e5911d65.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-42e0f936.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9d688365.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-29fac254.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-132e9670.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-73635de3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-63d59f63.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-73aeea2f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f7d4542c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f9b98b0c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6ac77841.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-67d0aeeb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d02e0033.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-09e0c002.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b74ea844.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d6d5a6e3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f1bc2df5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c3bee341.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3e2308e3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8ab0db3d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fa66dfab.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6ef8f690.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b2439029.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-11836b0f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e4d47506.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-03f87871.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cda75550.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f52fee8f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4ebf3b6a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4aadb251.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-572630cd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/404.html-ca0be202.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b3cdd554.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a2f85b18.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-218a5aab.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-81ec95c0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-40f1a646.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c884a3b1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-52036618.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b5d15e15.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7a850314.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1d96aaa9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c54d122d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fd190adc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-01797168.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7c4a4d91.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f5bc5be6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7c227bb4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-498a1ea7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-65f26d61.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-233d69b1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e5906442.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6644afee.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-41ff25d8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-536e7b4b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bf412127.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cfe34f72.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-354ec343.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-68c78105.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6f171db5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-335764fc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-26356129.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-841e7d02.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-78d61b77.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c16d126f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2e52aa8b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d100698b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-05802cd1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bd179d1c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-be66ec7a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a47b6bc5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-831ee60f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7cf2bc2d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ae3d7090.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-47e45462.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5f61065b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-66e44872.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7fa006fe.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d696776c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-248f51c5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5f545ed9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-aa61fb3e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0fb0234f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5469b07d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9dc79ddf.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-70f12cc5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-69cf374e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ce866d7a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-51fb624f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d3c69eaa.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-59c2d7fe.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8d31a8b8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7e7dcf84.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f115a57b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7575779c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-81a9b4d6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9ecefdaf.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-46e3fcc8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-acc128ee.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b12d8fec.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f2dcdd07.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d7f3f335.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3e5ea389.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d2e06f23.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cedebd27.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-304cabd4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2a8698e6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6404eae7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-49206499.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3db3e086.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3a9e6f65.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5e174f13.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-478c7fcd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-762c840f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a0f19f5c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-06b37f5b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-731410c7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4edcbaf8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1b8d5841.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-38ed4a59.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-99a4d5fc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-49eed77c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-87f1f01b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2ae72cf2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b48e6c4f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f42cf508.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c08d1ace.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3139ae58.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fc77c989.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1c145512.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ed236a9e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1ddec4eb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9c8c2303.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6231b098.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-25c757c8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8d489639.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-61d04391.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ad89c170.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7a9cde10.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-81b600f9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ec7064e4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-dbe6fc7b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ed46d833.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-34741332.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f18146b9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-87422884.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-da63a5ee.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ca9ff756.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b54c9a1c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d9bd0d38.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6ec3b08f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-00dbb456.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b2c67ec8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b398b2aa.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-dab91552.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7b4bd866.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b03ae542.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0bca5c19.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f0ab1239.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f5a6c2e5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c24339ea.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b5aa6249.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4a8aea88.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-eafd37e8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9550920f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1d9e2247.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0242fc2d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ee8ad2dc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-40cfa773.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-892e5281.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-726065bb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-65a88104.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-21d2d80b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2691c095.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1684163b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c4572b35.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c65cc4f5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4a4f21fc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b79eba69.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-25ebeac3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-004cf8cf.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-782af15a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-65d25a57.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-03891e1b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cfacea0f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6f1cee98.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7e4f8643.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-78c1d9dd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-62b72f61.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3f01a349.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-abe6f167.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c61f8934.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-58e2b055.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4bf9599d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ace1f6b5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0fb7176f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-19f1bb62.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e3e89505.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4158ad3b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-dca7452e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f1748f72.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0d6ebb44.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c1c526b6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b73500a0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8f45d9a3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a9a3cae3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-766dfb64.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-364b602a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-dc63dc9e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-aae366ed.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-41aa1490.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-daafa7e7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-87fa82ed.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0121be3a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e1f3fdd5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-015971ee.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-42d7d84c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-edfbe8ae.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-81212577.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1b980e9f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-38f6773c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fec251a6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1d84abc7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c9bacb63.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4dc73f6f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cd5f3c5e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-edb73848.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a925ab21.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-53552246.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6636e994.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-48bd2383.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7eefd402.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fca01885.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5a35e4f3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-122b7799.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8471a2f3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-702f9c4e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3c72217b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-20a1c105.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-10fa4c63.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9aee7d82.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d0187b53.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a6692edf.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6e1b8e77.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d44fe670.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-15c38504.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0c32fdd4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-be75f63a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bb14a1b4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b6fa4eb4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9db2568d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4e0e690f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-273edc22.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a334385f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-02e03707.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0c5a42e5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d8db1363.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f478014e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4e399606.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-93ea576d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ca145a3e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3a20e87c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a9f91941.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a9e59b38.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-058fe3bb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f9602bf2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4739cef7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cad5cc6d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b3642fb0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fffa5136.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-95f6ec1b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-99a4c44e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2fd30cc5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ead3a778.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0e9c65ee.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8b0709b3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-39c26b3b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-36f50643.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f4a4c1b9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0e7a4078.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9f0f0919.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cd4e95d3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-94b362c0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8e28f5b1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e6038d35.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5f567d6b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a3a927bd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-df358b7e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a901847c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ab89f4fa.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-88e878d2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e912fab3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-12d578c2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6fb15631.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0135480f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ee396398.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-93384777.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a4c66579.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2c161c01.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-14e9a71f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-35893d2c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-02b928a9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-afa7dda9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-44a383b3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8e9df711.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4408eea8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5748422a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d60692d3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-32a32891.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ee154da0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cff2c55e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a5fe20e0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e5e62297.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-58f6ec9e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9533f8ff.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c9c1e320.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-33691b36.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9bf2e99c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-93692d6b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8f8fb6a2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-39d27ad3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d6c48ab5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bfc7b1e4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-75967c3a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c3205c78.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d1f6df75.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-92d66b83.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-131ee9c7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-229546e6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-32ef44df.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-68af004a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-17a65937.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0023f278.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-93dfc171.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e21c2cd0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7e8fce45.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-20270f22.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7351251c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-87b677b0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-374543ba.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7ee168b2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-efbfcad9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-15a36688.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e48c4409.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7089645a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-645610b3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-98ae87c6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f3acb1c6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-15026f47.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bbcf6e61.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1423b04b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6a1ecbbc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7bcb0b21.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0582b08f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-435ef301.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3b221a68.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-76e790e3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6325679c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3a0fc0f3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a6906d45.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-21935fcd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-63128384.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b61f4a52.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-78bb4d92.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-76710a78.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5dffb112.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-dcc8ff90.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b0574600.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9967f031.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9abe24ce.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-878c7e4c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-98026e00.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f6aa768a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5de4511a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-494582e7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9b81d4c5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-47fa812b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c704f9e0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2848e0a0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6b4ffa18.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5a1c2be6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bc471ec5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-324d2959.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-33051c37.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b4de1ed6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fba9d799.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-36bd7068.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-68c16fbb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4fd4affb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d491e253.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-36641f6f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fa70a730.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ea53eb8f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-53a88f8e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9cb2ea60.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-62b9753c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-86ba59c8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-443816ad.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-06ba7148.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9fe39e0f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3aa0490c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-86f1f969.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-011b40d0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1f9429c2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f50cae07.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a05ef4c4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9ef01579.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-40cd16bb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-30e62218.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9e701eb6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9fefdce3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-50f80dc9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cf5dcb86.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a9a1094c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d0cb1c93.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a5889e66.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-116db768.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c65a53f3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-daf158b0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9c351b4c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-745a09a3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4590fb31.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-91f79995.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b7ca87de.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-462622ea.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-29d81879.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bd55cd08.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-238664f4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c34336a9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ac496c9b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6bc45743.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-65dbad22.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-75a0d9cc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9dbe6724.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-739c1c38.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-336a19d6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f63e6849.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-62797f7e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-92bebfa2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-58d314f4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-01717d05.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c80cb055.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fe950a79.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c0356af0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-809369a8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-88b82ef9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-70f03d3d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-34f69023.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5be568bf.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6a343786.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-33107eff.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-eda059e8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8985ea6b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f29c0a72.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-601da913.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5da0dace.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-85b55b22.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-df24164e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d140d5ad.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-03284383.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1e737383.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-dc270161.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-46a0232f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4843c19e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7968fed0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-55c1d5c0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4cf7314e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d10dde8d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fe1fef7f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9160084a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9a40b2e8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7becd71f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2e5adee8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9acb5e3c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bed8e73a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6032b46e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a76d3dd9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1c53a4ff.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6ad92de9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-275fe673.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-66056e0c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f17456ee.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c6173be2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2717b116.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-37c04a37.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4dd2e388.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cf57eb65.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c388f0ba.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b3f62724.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-613b3a3e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-20b1d1e0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-998a071d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b903a855.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6ced300c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-72b58987.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b75ac2ef.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-38c28985.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5072851c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a4d8f1a5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-faccab74.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-06bc0173.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-57701b3d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-69080c9c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f66a1c76.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d9247599.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d0655e4d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-185dfcfd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-87236ca1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-044bfeb7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-70a1b403.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-04329580.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2dd5f1c0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8177a0c1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7256bdb4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-853d8355.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2d7b4f78.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8bba899d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-91bdaaa6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3e1b2dcb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-93f6619f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3fff8fd5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1bf72660.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c6ec90e6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-46d71fac.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5080591c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4110672d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b1654aa3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f90ef03a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b4d21c4e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b7c326a8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b6af43ab.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3098b7c3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-70d0eff2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1e4bf25e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-345554f0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f00c6658.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7dbe5274.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6b547a91.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4000aa9b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cf55a437.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-86f94702.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-60a8c106.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-50c15f16.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-34b2dbb6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-55a9888e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f01b672c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-18edab88.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-dc08fdfc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-021fc950.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e6a88669.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d6f5ecad.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-55758e51.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7cee77f8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a18656f0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-baaf01f5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-38fdb306.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7eeb6f84.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-360f0a20.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0bc8e933.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-89945c16.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-07bb97d8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5925a5ee.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ee1d8500.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d472c88c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-63350d54.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-07a93575.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-510a34dd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-04c285a3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6e390910.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-84dcbd1d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-66402c2b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7be2112f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a6d654cb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-56fe119f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-86a28b02.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-55efd7d4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a8ff1fa1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d303070e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c47572cb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bf691e2d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f3e80c90.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cc5372d4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a6521960.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e1859bb3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-786195d6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-27dc5ffe.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ad663e3f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3e798984.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-693e2a88.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-32efd307.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-47d1c957.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6f0889e8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a63da578.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f07e28cd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5b389ad6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-542128fd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0ac92747.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5e3e03f7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-79014aff.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4fc8f64f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-37e145e0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-996d8606.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ba672171.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c9b7140d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8eb616a0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5b2bb4c7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9ece0908.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a299f495.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1a3bffee.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9a67450d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-316a93fd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b30ba00d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4635aba4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cf0743a6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-06b4922d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d3a3bae1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-73f4b740.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-53d5d99d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ec20682a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-07ad53be.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0026cd43.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c7e82199.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2d4c282e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-de08a13d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-701a7f8d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a86bdd7f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-28975a34.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-72b56d54.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6d7e8f55.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-34b4d357.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f35e0470.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ede6905b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-afafa6cf.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8c55747f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bc444009.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d1e5dadf.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-65e3b94f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ea83dfb0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7568da18.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c1271ba1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-aca2b01c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b24d53f7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-76bcc09f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0bd758e5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-282ba9b4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a8798519.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2296fd83.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2af6cb33.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d2ec72bf.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f0c68a98.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0bd19015.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c388cbf7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-55a502b2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-06bde181.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-33c444e3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-98ba2b20.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-30b0ede6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ab8742c5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-33e4f5a8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ef3966c0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-dae896e7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1e293d69.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f3c1b2f2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b1260101.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a10b7c2f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-074c411a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-74fba3b7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cbb849c1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ec6f9bea.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a9349b42.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-61ec2abf.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-48260338.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-68055603.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f5006060.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d7a46283.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a9faa5ea.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cbfbd603.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c9b21838.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-471d1690.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4728247e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-74106e03.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7cd0fd23.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cdde333e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-81d05173.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-20369796.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8bffdf2c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c76b0db7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9a1b9023.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0f7ad6c2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-30c84a68.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-94aea1a1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3a397345.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-90ef9ecb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-340f2ed9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c320dd14.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0cdfe958.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-36e70eae.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-761f9929.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2ea22501.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b8f3f9e9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3f740f87.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-095822f3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-16853431.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e1f4538a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-96f4b400.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-59b1fd8f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7463b6fc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3f0bb131.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c29768fd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9dee1c6c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-32f74e04.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f6236fc2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a3cfd131.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fd6c4120.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0a449955.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-74df19e2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-152328c2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5b90ddba.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-75d982b3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7870dad3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-507b2bc2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d53ada3c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d34f4881.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-62e162b6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e6fc6ed3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7b2612cb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1be8b404.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-51a7c97a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-283080b6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4306e0b4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e63c2ec0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-01682c11.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ada87e4c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-eaf35a7e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0f379085.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-35792de0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-880cc9b1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-79e71ec9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-25c7b2fe.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b31201be.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-23a1c21b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-dc653d84.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6c2ad886.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bb77dbf1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1565a4e8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ec591832.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c0a8f2e3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c6bd8568.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8c5ec0d2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7cd6de61.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b62d70a5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4e959038.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-363d087d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0d598ee2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1b53d608.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e532d194.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-daf8666a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-077fe4a9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a5452709.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-17fc485d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-66799a3b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a7bab6bd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-62fa6a7c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-44ba1044.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e1dbe3f1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9301cb08.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ee424ae6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-93bcc936.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b09ca8ac.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-692531ac.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b08d6b85.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d05e3f30.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5a1b8cc3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b9a4b614.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-216e1d70.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6098dc8f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-541accd0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a1883c4e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-67dba0c6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9a4ada85.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0a0fe4b2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-85f6d8d6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-459e9cf4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d5e6641f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cba15f81.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5cbfa19d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b9650965.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f2f7b630.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8a3af238.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-77f8ebac.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-263e9846.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ea763f44.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-502d4438.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-eb9833cc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9e042e7b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-46498b64.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1890f97a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3e4e7e68.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-00811345.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9485c295.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-eea2b44d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8573d301.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-14609646.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bb42ebb1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9bfa2dd0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-40e64afd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-83b86333.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d2214047.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-64486ee5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8ac405e8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cc6335b1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d4444df6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-75866c64.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-857ac25e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-06330ad3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cb88df2d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-89bdf2c3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-05884982.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1394128e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b76ebdda.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d34c4772.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bd094594.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ede5527f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8837729b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-adedd0ca.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-40139e14.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3f8d7e8d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6c1269d8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-89812b00.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bee6e5d7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-256ccd28.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b4a9b01a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4b01a9ac.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ec7c38e4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-192f387c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-aae54af3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-189f32a7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-baf941fa.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8ec84664.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-372ea53d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a7459548.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b88b365e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ff036fb5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e3e8179f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a39df3c9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a206446f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c9d99fa1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-107f3a10.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1559feb6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2e38ecc6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fa5a4255.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-19c2e71b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-07c94143.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ee4a712b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cd656393.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-97174141.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a7f6b297.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-272f224b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-290eef3a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-91095aff.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3d601b4a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fb93a4fc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d31f5af9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b5cd4ea8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-395682f0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-46b9fcc5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4b55aeee.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f99072b8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cac42d5d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-041181b7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-83a708ad.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-39108588.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-71fb8eec.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4d497302.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-edd3edd5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-df931655.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8516ecc2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cdf6baff.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-328fd992.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-51b8f517.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-75bd6429.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7ead818d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2a8e08a9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2c8def5c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-312d6a7c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-86948ac4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-07447a37.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-21842a07.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-69b9a47e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b928e98f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-34ad4555.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e7d08053.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-18f6111e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-aa7d6d6f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c0079625.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-daadf425.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c797d9c3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e6e8ce2f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-da209706.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0beb4f44.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8d5fc4bf.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-08eaeef1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-305545e0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-68665d02.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b949a674.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e1e10e9a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a98fada1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-356c22a2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-75a6853b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-19982b44.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6b795ce4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4f630078.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e6212473.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-22af0a5d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f6b88c1e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-05d86683.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c16b200c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0d5b4fc1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a5cae6fc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-30c75f3b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-23d338ae.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f06ed058.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a3ae53e6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-55ef2294.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3fec4b25.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fb116863.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cdc7fde6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-82b072b4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a806a707.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4572687e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-50ce7b0e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2b033824.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f7dab0b9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2adf22fb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b152a23b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e6fcc462.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e20883d1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-538eddd8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e38cc3ef.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-37862f8b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0cb3b90e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c78ce5e6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d45c7e08.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b5ffdb24.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7d7aa9fb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1129b445.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-01206d59.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-984b0dc3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-df9d6d3b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-39b8d78e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f925d937.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8ab68983.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6ca8927d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3b44ef5c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ccce243e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-44300739.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-89c6368a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5f352774.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-70e5fdd1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4f97c195.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2a7476ff.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-de455b52.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-34d4f534.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b4202317.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b98c33b8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9e9c9e55.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d5ff99a1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-47caa58f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b92da35a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b92999df.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2ed067e6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fb66c8b3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d739dbcd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6df31ff8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e532ed98.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2e4170c1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e9fdd9cd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3138231e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-02e40417.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d507c492.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0cadbec4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1340c5ef.js" as="script"><link rel="prefetch" href="/waterdrop/assets/Docker_Compose.html-aee29334.js" as="script"><link rel="prefetch" href="/waterdrop/assets/Docker_Dockerfile.html-ae546bf5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/Docker_快速入门.html-9f9695e3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/Docker_面试.html-7c9c2862.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-626b8493.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e8ff6f81.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-78883d2d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5e625f2a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/K8S.html-c200237a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/K8S_面试.html-875dbb7d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8e56a2c4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/Nginx_快速入门.html-c5a5815a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/Nginx_简介.html-4888167a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/Nginx_运维.html-ed8d6330.js" as="script"><link rel="prefetch" href="/waterdrop/assets/Nginx_面试.html-616db9b4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7dc379a5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-13f3afe7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4a3136fb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-15fb7a18.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-815b5352.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-052b30db.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fbca9290.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-880e09a7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c3e5d355.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a469fd34.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b33cb5bb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c578e234.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bd6c3eda.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f0a49141.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-73e40f28.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-39523f45.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ebaf37b3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a025e1b3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d39426da.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3c8ee2ea.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e3147854.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f5a62337.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5ffc32f5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-91539bea.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5d32ff75.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-89e12c4c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-61bf58f2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-604a69e1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e1246a94.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0d2f4919.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b9fa501b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-97c33dd7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-dbff9b1e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-494e5204.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3c5fbfe1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d62b3454.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d8357c37.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-737756e2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f4e7b63f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-374c85cd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9a2e1731.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ddb5d917.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-23f10f6b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2226f884.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4467bd9e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a95724a0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2de0af74.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a6b529d2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bf1850b8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-75ad0532.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-be852787.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-eaf31903.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-217223ef.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c1b8eaa5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-72bdce70.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3ac0e265.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0a013975.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-33c5acea.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5584f455.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1a8da4b2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-866e83a1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-18a79af9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-746cea4f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a1edba9e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5aafbab3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-313bb841.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5fe2076e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-60cf03fe.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1bab8e7e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8a59d61e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-89ce5db6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-73ec4e27.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8f32bb00.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a022ee4e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-32dd3f25.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8465cd7e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8d6da11b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7ea30984.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9ef2ef16.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e34f7723.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2cd8a3c6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-23bfcfac.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b0797839.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-77c15466.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-96dcc672.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ab71b6d4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d58f7664.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-91d37c92.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-16acb71e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-95cee1bd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-46139b82.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-33042936.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8619fcbe.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fbde556d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0b0bef73.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e7b68b78.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5d6e58ab.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1a1cf85c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-52278784.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3a49e0b6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f7469c28.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-338b252f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-73be7b32.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8a152d91.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-21d54fc7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c6382317.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-39afcec3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-33008440.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c1894428.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-685e233a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6196cb0f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-01bd8cd8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-931a779e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-35dec6d1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0bd37e97.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2f7c5cfa.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-256f4625.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-66206bac.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-51d62861.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a75e7a15.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-97f2318b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-147f0d8f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0bebcca5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-db5a2a39.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d80d0b70.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-46994e3e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-40331d63.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1a28d776.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-987f225b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-75344cdd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c2b62085.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f487a854.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-dc07bd03.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2ef9d756.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-aa1604d3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2087dc69.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-064f8fdf.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ef156a22.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-903eea9c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-661ce0d8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-726179b8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9e412f9b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e8b63d7f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bdb1ac36.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a4398350.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-20231739.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e35c8bb3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8848d2bc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-05de5826.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f7477311.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-aab5a79e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-15aa14f2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2c7f6cd6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-22ecf990.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-649c1836.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-96b6812b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-abac5add.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3c0559eb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e0049161.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-27ff2362.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bed0ea7d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-09c21b88.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f22d24ee.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4c77b722.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0d850b2d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a078f21d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-582fb0ae.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-73fcc462.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6a66a7da.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-00e840af.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-75778989.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ccf04921.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f0fa0446.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0cb1f347.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c7a4bd19.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-db37c616.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-29662864.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-59be29e7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2289be9a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8a7750e3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-11bb19b8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-10ffe1c8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2cf2661f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a34405f6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e836dcf5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3bb17d17.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-54c122c0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/404.html-34c49e9a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ea02fb36.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bc46995e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2b93ac5d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-aa158ae5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b0e756a6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2365fe84.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4b8878e7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-519f98b3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7902a72b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1b4297a1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4bab3f91.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f3714571.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c54f9819.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ba6799e2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-24005a43.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9a931aae.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b1f3f18f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8cd464f5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1d6f7be2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0ed001b8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a6b607be.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a9fee1a4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c514c275.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-91ebb874.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a5750fb2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2ff6922f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-92a905fd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3da2b877.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-90464268.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-22c0b3e6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b9d47c85.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7b4a72df.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a9411642.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7988a344.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a56a129c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d0df6d67.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-abf58a32.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0f8808ff.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1e45a3bd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bb931255.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ad686680.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-26f64bfd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0b060918.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-03c70244.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a6aa0ab6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a6946e9f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e7f3ef3e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-503a5d30.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-99e5892d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-50dde8c4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-054a25ff.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-54c8738e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-49f88af0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4c4e1b44.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4c287f5e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-eb000fb7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8bd08636.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9da8c22b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-138963b4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5b7a3b57.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-140f210d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-16ce5228.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-61a0ce38.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4dc4763d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-974f53af.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-920f7bc7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8df986c5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-127016e2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e6609a3f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e04dcf9e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c47b6ee4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-513c9475.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-33dd7813.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6b261d8e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b78e5af5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9906479f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8b92e227.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8d3db521.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-027fb59e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-891fe8f5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ffdb2f3d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c6d89c51.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c6f35da1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ecbf7aa0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8f9cec24.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0802ca68.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6acdf4f4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-72fc9ba2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-47da5ec1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-65958475.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d0cc7a18.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d7d8a57b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b676e3a2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6554bf7c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a8d54a24.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b7cc96bc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e34d9924.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9acdaf67.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a484d99c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ac90493a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-90c6f2a4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-71b3cc77.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-155a36c5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-521a9e6f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-54ab1b9a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b556a82a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-dbba9525.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f90c5492.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-85df461b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3cab0f11.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-968974a3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8129a615.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-65260353.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6e3cb951.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e664b989.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-abf732d4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f86b9f84.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3a67e131.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-dd52b08c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-435f3de0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9ae3c962.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2b0afc03.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-dd7ceb21.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9784ad3a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6a79dff5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f4244f77.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b2197778.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-432197e3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-34be792c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3c38fb17.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3cd0c147.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e11c0bcb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f557fd5f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ec8e6bd0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-dca804f1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2df4cbae.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3298e41e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-824b6e63.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c8a9b7aa.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ee65c619.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5e923abc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-84dc354f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2aa902a3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-18c1cdb1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9fddeefb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1508281a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b2209f2d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e2076325.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-78c8196c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4fa2ef23.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8e57d7eb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f4678089.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-27b3bd1e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e408ab5a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d0e3fbe1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2b28f1e6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3ee49d1a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-210d1bf3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-184b40df.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4faad92f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7a94bac0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-58664ce4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ad2fcc27.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cb447196.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fa4a648c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ef1cedb4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-de46d520.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e88fe5cf.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fe94b1b6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f526f93b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a5154c21.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ff8f8de7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5007969c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-613f16d9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3258a852.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-959ed12c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-667c651d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-80c0bc13.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-583f1bee.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d2ee7caf.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-60ead531.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b347ffea.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d29f2a21.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bfa83e03.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9840ab01.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d39ab88b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0dda8cd0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bff56b6d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9056ea8c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7fca6f1f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a3a6b32d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-80199c2a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cfdc280e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ac73c52b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fa883d0d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5e8e1f6b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-be050c56.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-65fab572.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-60f3e1a5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3f5b7ebf.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-55126b4f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9a5ba832.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3138ed7d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-79ae087d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-77c0042b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a2258062.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fe7ac584.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-04dbcac4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-16faa912.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ae178cec.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-30ad3367.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f25c4cb1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9b81e575.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ebc3dfa6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3e663928.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0d73eeb6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ec62e024.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-20d4a494.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-730b6dd7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-56d37e63.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8f24e56f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3a51a66b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2853679d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-85bf9b3d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-36c81b63.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c490a81c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-20dcdca5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2e4cf7ee.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-08c3fae7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-48806b5c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-db7862e7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ad1b2b04.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-262920e5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-24b5477b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4ad0df5c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-052558e0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a347683c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8cdbfc40.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e9b7f6f0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2cd9ab1b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a992794a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-01dd977e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ec9e8d6b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4c2a577c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-40e5be0a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-046fe798.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-aaf70b66.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-feaab27e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8913ce36.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9930f44e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-74c84652.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-276ccf01.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ccc79b04.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bbb20f4a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9099d30e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0c9dbf08.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-75eb58f4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9259b8cd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-04bce486.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9f7eed1d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e38511ff.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e2b0459d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-add48739.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-67733d9b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-003a14e2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-33581c47.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0d6c5b34.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-06849544.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-035f3d0e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e0347247.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b40c39da.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0b86740f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4191c1c4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-456ebabf.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-75b615a3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2bde2dd8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ddeb9106.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-86057128.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-78565afb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9054cde0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5dbe7880.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8528f93e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-63c0e854.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3370bf1f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-87c5c64e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ff2245a0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1f699326.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b39dd409.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7c566e1c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-61093531.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-838bcff7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6f9f9275.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-dee54011.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2365f2ee.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1a0fc0c2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f34f8bd6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6a393c43.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-eebd8309.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3ddd8dc2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bb6e118d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-afe8f76b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fcbf4ad5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a42c0e24.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-da02f971.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-01f58aa2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2b8e0589.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6b3efd48.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d94c500f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4fe79acd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f5086034.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c751f694.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6a9f910a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4f624136.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8c2c2762.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6b363837.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bbb485bf.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f4b14d90.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5cb2fb18.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-368f8ebb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a058ba0f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-299f9f82.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4a211681.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-503813ce.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7e8ef491.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9b850b64.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-430f39a8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3258b6d5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3a378bf0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-79d501fe.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-44d370e2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e19eb168.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-57b0a346.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-13466a1f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-74926d1a.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-61ed8cd7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-738e818d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9ee19ac7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-da2c4e33.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f5f72b8c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-777385f5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bb981e68.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f861df8d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9a3c9eef.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f3510601.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3ac2b8a4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9655e809.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d9fbd2fc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3ef58e39.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a410192f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4ff7ccc5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-587cd637.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a578337b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7bc07c9b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a36be4e5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-032131ab.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-231194a5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9d4183ca.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f928263e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7a093fc3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-04a29971.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2bec8878.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-07927bfc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1ed6ce4d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f9240cf6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b1a4112c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9d70f169.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5f97e794.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-57ea38ae.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6845df33.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-179331f1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-18fe5f33.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ab6f7f80.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2776a299.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bf78ef7c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0b3a95ca.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-97376564.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2a9b624e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c9d984ff.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b9065b57.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a1781de1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ebd5efaa.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-04fd3adb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f1bd2d26.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c9452a26.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9a3b4100.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c6f2ce7d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4370e027.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-41137b9c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-60fca5a6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fc6821eb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9e996773.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-11c901d8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e4e25ca0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-02c5df32.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2b4fdec5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f1f445ef.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3ce3e322.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f799ca0e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9dd6d1f6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e3f4f183.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-97c4c2ef.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cf56139d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7c9e353e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3236b14b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ab739434.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8fe6dbd3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-17a19156.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-30a45514.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4cd4c8ac.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bdaac8c6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a457570f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-716589f8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3a960c8f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-86c728ac.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9f35817e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-29337f70.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-113c3faf.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f2367935.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f55aff3f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7cbd7d5c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-642b1cad.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f52ff57b.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fc15ac2d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-75c5d0f5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d238d152.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-12d6e306.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-86e839c1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-97129da1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4e81e248.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-55d09d6e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bf21ee23.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8f6ae043.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2b419bb9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a9175a9c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6a291d5c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5b9b99d1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b9fe62eb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-84051cf4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-53473313.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0080f17e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-271397fb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a6016b95.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-feb12dbf.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-daded6e5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fa6d7879.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c9507aaf.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3de61571.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-71ab675f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ac650532.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-538de252.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6f8f07ec.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b038c3f4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e49c8ee4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-26663fe3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-39ae63d2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3263da90.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-659d1d70.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3cd3eb98.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-72243b29.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1dfc19cb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d7e31745.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-cb8e40d0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fa7a9450.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8dc42e8c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ec6102f8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-19f67173.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a65bb4ef.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1272edca.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f4932f5f.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-573d6ca7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e0646560.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-daf8c1df.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-95320f3e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4d29ed56.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2cab1b77.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-4086ebe2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d9a068a4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7fc91c5e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-753fa044.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-dfccf8a8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-647ff296.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-6002f698.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-99f17533.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-dc5af193.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2f423a1c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-c8607bd6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7e3ba9ed.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f3934805.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-ed2b07f6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-2c98a037.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-1b4f3b83.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-48adbafe.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-282697f7.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-585ef29e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-7d4ffca5.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0f5306ba.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d3f44201.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-41f7eab9.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-35333ccb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-f21e9383.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-d2663449.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-60cc38a8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-8f8cf281.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-22a97ab2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3e499087.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-065f25fd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-0582f2ac.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-27a20254.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-014543d3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-edbbd0f0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3a43b370.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-19338223.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-40fe4eeb.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-a546ece6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b981cad4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-721bb661.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-12a9a1ca.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-e3bf8f00.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5aceb3fc.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-10683c1c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5201cf88.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-fd5646a3.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-bc8bcbdd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-b2345b37.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-60a55bea.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5d328122.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-9ebc8cd4.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-30b91cd8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-3c1db844.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-49041212.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index.html-5a37e3af.js" as="script"><link rel="prefetch" href="/waterdrop/assets/waline-meta-56fbc549.js" as="script"><link rel="prefetch" href="/waterdrop/assets/component-065f2ecd.js" as="script"><link rel="prefetch" href="/waterdrop/assets/auto-fe80bb03.js" as="script"><link rel="prefetch" href="/waterdrop/assets/index-2bf332f6.js" as="script"><link rel="prefetch" href="/waterdrop/assets/flowchart-c441f34d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/mermaid.core-db267546.js" as="script"><link rel="prefetch" href="/waterdrop/assets/highlight.esm-75b11b9d.js" as="script"><link rel="prefetch" href="/waterdrop/assets/markdown.esm-abe06b83.js" as="script"><link rel="prefetch" href="/waterdrop/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/waterdrop/assets/notes.esm-a106bb2c.js" as="script"><link rel="prefetch" href="/waterdrop/assets/reveal.esm-ec5549c1.js" as="script"><link rel="prefetch" href="/waterdrop/assets/search.esm-7e6792e2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/waterdrop/assets/VuePlayground-81525ab2.js" as="script"><link rel="prefetch" href="/waterdrop/assets/photoswipe.esm-1a9f4b8e.js" as="script"><link rel="prefetch" href="/waterdrop/assets/SearchResult-8f7b403f.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand" href="/waterdrop/"><img class="vp-nav-logo" src="/waterdrop/logo.svg" alt="钝悟"><!----><span class="vp-site-name hide-in-pad">钝悟</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/waterdrop/pages/51513fc6/"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:notes" width="1em" height="1em"></iconify-icon>笔记<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Java"><span class="title"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="ri:java-line" width="1em" height="1em"></iconify-icon>Java</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><a class="vp-link nav-link" href="/waterdrop/pages/9d112a4f/"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:numeric-1-box-multiple-outline" width="1em" height="1em"></iconify-icon>JavaCore<!----></a></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="vp-link nav-link" href="/waterdrop/pages/accf2bc7/"><!---->Java 基础<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/waterdrop/pages/c3f97b9f/"><!---->Java 高级<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/waterdrop/pages/5474b9fb/"><!---->Java 容器<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/waterdrop/pages/78684c78/"><!---->Java IO<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/waterdrop/pages/b9a35e69/"><!---->Java 并发<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/waterdrop/pages/1997b6e8/"><!---->Java JVM<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/waterdrop/pages/d793c0d6/"><!---->Java 面试<!----></a></li></ul></li><li class="dropdown-item"><a class="vp-link nav-link" href="/waterdrop/01.Java/JavaEE/"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:numeric-2-box-multiple-outline" width="1em" height="1em"></iconify-icon>JavaEE<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/waterdrop/pages/050ef502/"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:numeric-3-box-multiple-outline" width="1em" height="1em"></iconify-icon>软件<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/waterdrop/pages/99f1430e/"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:numeric-4-box-multiple-outline" width="1em" height="1em"></iconify-icon>工具<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/waterdrop/pages/ecabeba6/"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:numeric-5-box-multiple-outline" width="1em" height="1em"></iconify-icon>框架<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/waterdrop/pages/98f75abc/"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:numeric-6-box-multiple-outline" width="1em" height="1em"></iconify-icon>中间件<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/waterdrop/pages/47a444a4/"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:microsoft-visual-studio-code" width="1em" height="1em"></iconify-icon>编程<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="设计"><span class="title"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:design" width="1em" height="1em"></iconify-icon>设计</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>架构</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="vp-link nav-link" href="/waterdrop/pages/d933a06b/"><!---->综合<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/waterdrop/pages/14ac1f61/"><!---->微服务<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/waterdrop/pages/f8d2c06d/"><!---->安全<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/waterdrop/03.设计/架构/解决方案/"><!---->解决方案<!----></a></li></ul></li><li class="dropdown-item"><a class="vp-link nav-link" href="/waterdrop/pages/9584cbd7/"><!---->设计模式<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/waterdrop/pages/087c62ac/"><!---->重构<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/waterdrop/03.设计/DDD/"><!---->DDD<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/waterdrop/pages/e745d4ee/"><!---->UML<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/waterdrop/pages/3559bef4/"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:microsoft-azure-devops" width="1em" height="1em"></iconify-icon>DevOps<!----></a></div><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/waterdrop/pages/fcc7f3a1/"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="carbon:data-structured" width="1em" height="1em"></iconify-icon>算法<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="数据库"><span class="title"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:database" width="1em" height="1em"></iconify-icon>数据库</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/waterdrop/pages/ba6c6f2b/"><!---->数据库综合<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/waterdrop/pages/711c97ca/"><!---->数据库中间件<!----></a></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><a class="vp-link nav-link" href="/waterdrop/pages/e6053839/"><!---->关系型数据库<!----></a></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="vp-link nav-link" href="/waterdrop/pages/b3143f7c/"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:mysql" width="1em" height="1em"></iconify-icon>MySQL<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><a class="vp-link nav-link" href="/waterdrop/pages/c7a5b3a3/"><!---->文档数据库<!----></a></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="vp-link nav-link" href="/waterdrop/pages/8e07d83c/"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:mongodb" width="1em" height="1em"></iconify-icon>MongoDB<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><a class="vp-link nav-link" href="/waterdrop/pages/6f39feeb/"><!---->KV 数据库<!----></a></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="vp-link nav-link" href="/waterdrop/pages/0302a9aa/"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:redis" width="1em" height="1em"></iconify-icon>Redis<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><a class="vp-link nav-link" href="/waterdrop/pages/2d01c30e/"><!---->列式数据库<!----></a></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="vp-link nav-link" href="/waterdrop/pages/6983c546/"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:hbase" width="1em" height="1em"></iconify-icon>HBase<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><a class="vp-link nav-link" href="/waterdrop/pages/bf863c80/"><!---->搜索引擎数据库<!----></a></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="vp-link nav-link" href="/waterdrop/pages/36596187/"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:elasticsearch" width="1em" height="1em"></iconify-icon>Elasticsearch<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/waterdrop/pages/8b1864e8/"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="vscode-icons:file-type-Elastic" width="1em" height="1em"></iconify-icon>Elastic技术栈<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/waterdrop/pages/bb9ba184/"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:network" width="1em" height="1em"></iconify-icon>网络<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="分布式"><span class="title"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:resistor-nodes" width="1em" height="1em"></iconify-icon>分布式</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/waterdrop/pages/df7c7cd0/"><!---->分布式理论<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/waterdrop/pages/ad8b7f0a/"><!---->分布式协同<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/waterdrop/pages/40c8dc6f/"><!---->分布式调度<!----></a></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>分布式通信</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="vp-link nav-link" href="/waterdrop/pages/d6acf22b/"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="file-icons:powerpc" width="1em" height="1em"></iconify-icon>RPC<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/waterdrop/pages/8a1e3989/"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:mq" width="1em" height="1em"></iconify-icon>MQ<!----></a></li></ul></li><li class="dropdown-item"><a class="vp-link nav-link" href="/waterdrop/pages/ef414e7f/"><!---->分布式存储<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="大数据"><span class="title"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon-plain:hadoop" width="1em" height="1em"></iconify-icon>大数据</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/waterdrop/pages/82f6eae9/"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:hadoop" width="1em" height="1em"></iconify-icon>Hadoop<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/waterdrop/pages/1a0ffe80/"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="simple-icons:apachehive" width="1em" height="1em"></iconify-icon>Hive<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/waterdrop/pages/6983c546/"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:hbase" width="1em" height="1em"></iconify-icon>HBase<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/waterdrop/pages/63e8b84c/"><!---->ZooKeeper<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/waterdrop/pages/dff5c241/"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:kafka-icon" width="1em" height="1em"></iconify-icon>Kafka<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/waterdrop/pages/136c9f41/"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="fluent-color:chat-bubbles-question-16" width="1em" height="1em"></iconify-icon>面试<!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://github.com/dunwu/waterdrop" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><button type="button" class="search-pro-button" role="search" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">搜索</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:notes" width="1em" height="1em"></iconify-icon><span class="vp-sidebar-title">笔记</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="ri:java-line" width="1em" height="1em"></iconify-icon><span class="vp-sidebar-title">Java</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:microsoft-visual-studio-code" width="1em" height="1em"></iconify-icon><span class="vp-sidebar-title">编程</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:design" width="1em" height="1em"></iconify-icon><span class="vp-sidebar-title">设计</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:microsoft-azure-devops" width="1em" height="1em"></iconify-icon><span class="vp-sidebar-title">DevOps</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/waterdrop/pages/ddd5c1ca/"><!---->DevOps 简介<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/waterdrop/pages/e91cabf8/"><!---->DevOps 面试<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><!----><span class="vp-sidebar-title">工具</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:docker-wordmark" width="1em" height="1em"></iconify-icon><span class="vp-sidebar-title">Docker</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:git-icon" width="1em" height="1em"></iconify-icon><span class="vp-sidebar-title">Git</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:kubernetes" width="1em" height="1em"></iconify-icon><span class="vp-sidebar-title">Kubernetes</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:nginx" width="1em" height="1em"></iconify-icon><span class="vp-sidebar-title">Nginx</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:nginx" width="1em" height="1em"></iconify-icon>Nginx 快速入门<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E7%AE%80%E4%BB%8B.html"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:nginx" width="1em" height="1em"></iconify-icon>Nginx 简介<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link active vp-sidebar-link vp-sidebar-page active" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:nginx" width="1em" height="1em"></iconify-icon>Nginx 配置<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#配置文件实例"><!---->配置文件实例<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#基本规则"><!---->基本规则<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#管理-nginx-配置"><!---->管理 Nginx 配置<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#重加载-nginx-配置"><!---->重加载 Nginx 配置<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#监听-80-和-443-端口"><!---->监听 80 和 443 端口<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#显示指定监听的地址和端口"><!---->显示指定监听的地址和端口<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#防止使用未定义的服务器名称处理请求"><!---->防止使用未定义的服务器名称处理请求<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#不要在-listen-或-upstream-中使用-hostname"><!---->不要在 listen 或 upstream 中使用 hostname<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#指令中只配置一个-ssl"><!---->指令中只配置一个 SSL<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#使用-geo-map-模块替代-allow-deny"><!---->使用 geo/map 模块替代 allow/deny<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#map-所有事物"><!---->Map 所有事物<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#为所有未匹配的路径设置根路径"><!---->为所有未匹配的路径设置根路径<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#使用-return-指令进行-url-重定向-301、302"><!---->使用 return 指令进行 URL 重定向（301、302）<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#配置日志轮换策略"><!---->配置日志轮换策略<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#不要重复索引指令-只能在-http-块中使用"><!---->不要重复索引指令，只能在 http 块中使用<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#debugging"><!---->Debugging<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#使用自定义日志格式"><!---->使用自定义日志格式<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#使用调试模式来跟踪意外行为"><!---->使用调试模式来跟踪意外行为<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#核心转储"><!---->核心转储<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#性能"><!---->性能<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#工作进程数"><!---->工作进程数<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#最大连接数"><!---->最大连接数<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#使用-http-2"><!---->使用 HTTP/2<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#维护-ssl-会话"><!---->维护 SSL 会话<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#避免使用-if-检查-server-name"><!---->避免使用 if 检查 server_name<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#使用-request-uri-来避免使用正则表达式"><!---->使用 $request_uri 来避免使用正则表达式<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#使用-try-files-指令确认文件是否存在"><!---->使用 try_files 指令确认文件是否存在<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#使用-return-代替-rewrite-来做重定向"><!---->使用 return 代替 rewrite 来做重定向<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#开启-pcre-jit-来加速正则表达式处理"><!---->开启 PCRE JIT 来加速正则表达式处理<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#hardening"><!---->Hardening<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#always-keep-nginx-up-to-date"><!---->🔰 Always keep Nginx up-to-date<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#run-as-an-unprivileged-user"><!---->🔰 Run as an unprivileged user<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#disable-unnecessary-modules"><!---->🔰 Disable unnecessary modules<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#protect-sensitive-resources"><!---->🔰 Protect sensitive resources<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#hide-nginx-version-number"><!---->🔰 Hide Nginx version number<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#hide-nginx-server-signature"><!---->🔰 Hide Nginx server signature<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#hide-upstream-proxy-headers"><!---->🔰 Hide upstream proxy headers<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#force-all-connections-over-tls"><!---->🔰 Force all connections over TLS<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#use-only-the-latest-supported-openssl-version"><!---->🔰 Use only the latest supported OpenSSL version<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#use-min-2048-bit-private-keys"><!---->🔰 Use min. 2048-bit private keys<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#keep-only-tls-1-3-and-tls-1-2"><!---->🔰 Keep only TLS 1.3 and TLS 1.2<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#use-only-strong-ciphers"><!---->🔰 Use only strong ciphers<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#use-more-secure-ecdh-curve"><!---->🔰 Use more secure ECDH Curve<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#use-strong-key-exchange-with-perfect-forward-secrecy"><!---->🔰 Use strong Key Exchange with Perfect Forward Secrecy<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#prevent-replay-attacks-on-zero-round-trip-time"><!---->🔰 Prevent Replay Attacks on Zero Round-Trip Time<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#defend-against-the-beast-attack"><!---->🔰 Defend against the BEAST attack<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#mitigation-of-crime-breach-attacks"><!---->🔰 Mitigation of CRIME/BREACH attacks<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#http-strict-transport-security"><!---->🔰 HTTP Strict Transport Security<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#reduce-xss-risks-content-security-policy"><!---->🔰 Reduce XSS risks (Content-Security-Policy)<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#control-the-behaviour-of-the-referer-header-referrer-policy"><!---->🔰 Control the behaviour of the Referer header (Referrer-Policy)<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#provide-clickjacking-protection-x-frame-options"><!---->🔰 Provide clickjacking protection (X-Frame-Options)<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#prevent-some-categories-of-xss-attacks-x-xss-protection"><!---->🔰 Prevent some categories of XSS attacks (X-XSS-Protection)<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#prevent-sniff-mimetype-middleware-x-content-type-options"><!---->🔰 Prevent Sniff Mimetype middleware (X-Content-Type-Options)<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#deny-the-use-of-browser-features-feature-policy"><!---->🔰 Deny the use of browser features (Feature-Policy)<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#reject-unsafe-http-methods"><!---->🔰 Reject unsafe HTTP methods<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#prevent-caching-of-sensitive-data"><!---->🔰 Prevent caching of sensitive data<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#control-buffer-overflow-attacks"><!---->🔰 Control Buffer Overflow attacks<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#mitigating-slow-http-dos-attacks-closing-slow-connections"><!---->🔰 Mitigating Slow HTTP DoS attacks (Closing Slow Connections)<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#反向代理"><!---->反向代理<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#使用与后端协议兼容的-pass-指令"><!---->使用与后端协议兼容的 pass 指令<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#小心-proxy-pass-指令中的斜杠"><!---->小心 proxy_pass 指令中的斜杠<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#正确设置-x-forwarded-for-头的值"><!---->正确设置 X-Forwarded-For 头的值<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#不要在反向代理后面使用带有-scheme-的-x-forwarded-proto"><!---->不要在反向代理后面使用带有 $scheme 的 X-Forwarded-Proto<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#prefix-使用不带-x-前缀的自定义头"><!---->prefix 使用不带 X- 前缀的自定义头<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#负载均衡"><!---->负载均衡<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#健康检查"><!---->健康检查<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#down-参数"><!---->down 参数<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#安全"><!---->安全<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#防盗链"><!---->防盗链<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html#参考资料"><!---->参考资料<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E8%BF%90%E7%BB%B4.html"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:nginx" width="1em" height="1em"></iconify-icon>Nginx 运维<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%9D%A2%E8%AF%95.html"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:nginx" width="1em" height="1em"></iconify-icon>Nginx 面试<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">其他</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">监控</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="carbon:data-structured" width="1em" height="1em"></iconify-icon><span class="vp-sidebar-title">数据结构和算法</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:database" width="1em" height="1em"></iconify-icon><span class="vp-sidebar-title">数据库</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:network" width="1em" height="1em"></iconify-icon><span class="vp-sidebar-title">网络</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:resistor-nodes" width="1em" height="1em"></iconify-icon><span class="vp-sidebar-title">分布式</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon-plain:hadoop" width="1em" height="1em"></iconify-icon><span class="vp-sidebar-title">大数据</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:briefcase" width="1em" height="1em"></iconify-icon><span class="vp-sidebar-title">工作</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="fluent-color:chat-bubbles-question-16" width="1em" height="1em"></iconify-icon><span class="vp-sidebar-title">面试</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:nginx" width="1em" height="1em"></iconify-icon>Nginx 配置</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://dunwu.github.io/waterdrop" target="_blank" rel="noopener noreferrer">钝悟</a></span><span property="author" content="钝悟"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2020-02-02T17:54:00.000Z"></span><span class="page-pageview-info" aria-label="访问量🔢" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span id="ArtalkPV" class="waline-pageview-count" data-path="/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E9%85%8D%E7%BD%AE.html">...</span></span><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 67 分钟</span><meta property="timeRequired" content="PT67M"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category8 clickable" role="navigation">DevOps</span><span class="page-category-item category1 clickable" role="navigation">工具</span><span class="page-category-item category4 clickable" role="navigation">Nginx</span><!--]--><meta property="articleSection" content="DevOps,工具,Nginx"></span><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item tag8 clickable" role="navigation">DevOps</span><span class="page-tag-item tag4 clickable" role="navigation">Nginx</span><!--]--><meta property="keywords" content="DevOps,Nginx"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/waterdrop/#配置文件实例">配置文件实例</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/waterdrop/#基本规则">基本规则</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#管理-nginx-配置">管理 Nginx 配置</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#重加载-nginx-配置">重加载 Nginx 配置</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#监听-80-和-443-端口">监听 80 和 443 端口</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#显示指定监听的地址和端口">显示指定监听的地址和端口</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#防止使用未定义的服务器名称处理请求">防止使用未定义的服务器名称处理请求</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#不要在-listen-或-upstream-中使用-hostname">不要在 listen 或 upstream 中使用 hostname</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#指令中只配置一个-ssl">指令中只配置一个 SSL</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#使用-geo-map-模块替代-allow-deny">使用 geo/map 模块替代 allow/deny</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#map-所有事物">Map 所有事物</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#为所有未匹配的路径设置根路径">为所有未匹配的路径设置根路径</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#使用-return-指令进行-url-重定向-301、302">使用 return 指令进行 URL 重定向（301、302）</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#配置日志轮换策略">配置日志轮换策略</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#不要重复索引指令-只能在-http-块中使用">不要重复索引指令，只能在 http 块中使用</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/waterdrop/#debugging">Debugging</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#使用自定义日志格式">使用自定义日志格式</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#使用调试模式来跟踪意外行为">使用调试模式来跟踪意外行为</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#核心转储">核心转储</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/waterdrop/#性能">性能</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#工作进程数">工作进程数</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#最大连接数">最大连接数</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#使用-http-2">使用 HTTP/2</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#维护-ssl-会话">维护 SSL 会话</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#避免使用-if-检查-server-name">避免使用 if 检查 server_name</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#使用-request-uri-来避免使用正则表达式">使用 $request_uri 来避免使用正则表达式</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#使用-try-files-指令确认文件是否存在">使用 try_files 指令确认文件是否存在</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#使用-return-代替-rewrite-来做重定向">使用 return 代替 rewrite 来做重定向</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#开启-pcre-jit-来加速正则表达式处理">开启 PCRE JIT 来加速正则表达式处理</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/waterdrop/#hardening">Hardening</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#always-keep-nginx-up-to-date">🔰 Always keep Nginx up-to-date</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#run-as-an-unprivileged-user">🔰 Run as an unprivileged user</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#disable-unnecessary-modules">🔰 Disable unnecessary modules</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#protect-sensitive-resources">🔰 Protect sensitive resources</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#hide-nginx-version-number">🔰 Hide Nginx version number</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#hide-nginx-server-signature">🔰 Hide Nginx server signature</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#hide-upstream-proxy-headers">🔰 Hide upstream proxy headers</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#force-all-connections-over-tls">🔰 Force all connections over TLS</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#use-only-the-latest-supported-openssl-version">🔰 Use only the latest supported OpenSSL version</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#use-min-2048-bit-private-keys">🔰 Use min. 2048-bit private keys</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#keep-only-tls-1-3-and-tls-1-2">🔰 Keep only TLS 1.3 and TLS 1.2</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#use-only-strong-ciphers">🔰 Use only strong ciphers</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#use-more-secure-ecdh-curve">🔰 Use more secure ECDH Curve</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#use-strong-key-exchange-with-perfect-forward-secrecy">🔰 Use strong Key Exchange with Perfect Forward Secrecy</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#prevent-replay-attacks-on-zero-round-trip-time">🔰 Prevent Replay Attacks on Zero Round-Trip Time</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#defend-against-the-beast-attack">🔰 Defend against the BEAST attack</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#mitigation-of-crime-breach-attacks">🔰 Mitigation of CRIME/BREACH attacks</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#http-strict-transport-security">🔰 HTTP Strict Transport Security</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#reduce-xss-risks-content-security-policy">🔰 Reduce XSS risks (Content-Security-Policy)</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#control-the-behaviour-of-the-referer-header-referrer-policy">🔰 Control the behaviour of the Referer header (Referrer-Policy)</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#provide-clickjacking-protection-x-frame-options">🔰 Provide clickjacking protection (X-Frame-Options)</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#prevent-some-categories-of-xss-attacks-x-xss-protection">🔰 Prevent some categories of XSS attacks (X-XSS-Protection)</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#prevent-sniff-mimetype-middleware-x-content-type-options">🔰 Prevent Sniff Mimetype middleware (X-Content-Type-Options)</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#deny-the-use-of-browser-features-feature-policy">🔰 Deny the use of browser features (Feature-Policy)</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#reject-unsafe-http-methods">🔰 Reject unsafe HTTP methods</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#prevent-caching-of-sensitive-data">🔰 Prevent caching of sensitive data</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#control-buffer-overflow-attacks">🔰 Control Buffer Overflow attacks</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#mitigating-slow-http-dos-attacks-closing-slow-connections">🔰 Mitigating Slow HTTP DoS attacks (Closing Slow Connections)</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/waterdrop/#反向代理">反向代理</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#使用与后端协议兼容的-pass-指令">使用与后端协议兼容的 pass 指令</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#小心-proxy-pass-指令中的斜杠">小心 proxy_pass 指令中的斜杠</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#正确设置-x-forwarded-for-头的值">正确设置 X-Forwarded-For 头的值</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#不要在反向代理后面使用带有-scheme-的-x-forwarded-proto">不要在反向代理后面使用带有 $scheme 的 X-Forwarded-Proto</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#prefix-使用不带-x-前缀的自定义头">prefix 使用不带 X- 前缀的自定义头</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/waterdrop/#负载均衡">负载均衡</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#健康检查">健康检查</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#down-参数">down 参数</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/waterdrop/#安全">安全</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/waterdrop/#防盗链">防盗链</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/waterdrop/#参考资料">参考资料</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="nginx-配置" tabindex="-1"><a class="header-anchor" href="#nginx-配置" aria-hidden="true">#</a> Nginx 配置</h1><blockquote><p>Nginx 的默认配置文件为 <code>nginx.conf</code>。</p><ul><li><code>nginx -c xxx.conf</code> - 以指定的文件作为配置文件，启动 Nginx。</li></ul></blockquote><h2 id="配置文件实例" tabindex="-1"><a class="header-anchor" href="#配置文件实例" aria-hidden="true">#</a> 配置文件实例</h2><p>以下为一个 <code>nginx.conf</code> 配置文件实例：</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment">#定义 nginx 运行的用户和用户组</span>
<span class="token directive"><span class="token keyword">user</span> www www</span><span class="token punctuation">;</span>

<span class="token comment">#nginx 进程数，建议设置为等于 CPU 总核心数。</span>
<span class="token directive"><span class="token keyword">worker_processes</span> <span class="token number">8</span></span><span class="token punctuation">;</span>

<span class="token comment">#nginx 默认没有开启利用多核 CPU, 通过增加 worker_cpu_affinity 配置参数来充分利用多核 CPU 以下是 8 核的配置参数</span>
<span class="token directive"><span class="token keyword">worker_cpu_affinity</span> <span class="token number">00000001</span> <span class="token number">00000010</span> <span class="token number">00000100</span> <span class="token number">00001000</span> <span class="token number">00010000</span> <span class="token number">00100000</span> <span class="token number">01000000</span> <span class="token number">10000000</span></span><span class="token punctuation">;</span>

<span class="token comment">#全局错误日志定义类型，[ debug | info | notice | warn | error | crit ]</span>
<span class="token directive"><span class="token keyword">error_log</span> /var/log/nginx/error.log info</span><span class="token punctuation">;</span>

<span class="token comment">#进程文件</span>
<span class="token directive"><span class="token keyword">pid</span> /var/run/nginx.pid</span><span class="token punctuation">;</span>

<span class="token comment">#一个 nginx 进程打开的最多文件描述符数目，理论值应该是最多打开文件数（系统的值 ulimit -n）与 nginx 进程数相除，但是 nginx 分配请求并不均匀，所以建议与 ulimit -n 的值保持一致。</span>
<span class="token directive"><span class="token keyword">worker_rlimit_nofile</span> <span class="token number">65535</span></span><span class="token punctuation">;</span>

<span class="token comment">#工作模式与连接数上限</span>
<span class="token directive"><span class="token keyword">events</span></span>
<span class="token punctuation">{</span>
    <span class="token comment">#参考事件模型，use [ kqueue | rtsig | epoll | /dev/poll | select | poll ]; epoll 模型是 Linux 2.6 以上版本内核中的高性能网络 I/O 模型，如果跑在 FreeBSD 上面，就用 kqueue 模型。</span>
    <span class="token comment">#epoll 是多路复用 IO(I/O Multiplexing) 中的一种方式，但是仅用于 linux2.6 以上内核，可以大大提高 nginx 的性能</span>
    <span class="token directive"><span class="token keyword">use</span> epoll</span><span class="token punctuation">;</span>

    <span class="token comment">############################################################################</span>
    <span class="token comment">#单个后台 worker process 进程的最大并发链接数</span>
    <span class="token comment">#事件模块指令，定义 nginx 每个进程最大连接数，默认 1024。最大客户连接数由 worker_processes 和 worker_connections 决定</span>
    <span class="token comment">#即 max_client=worker_processes*worker_connections, 在作为反向代理时：max_client=worker_processes*worker_connections / 4</span>
    <span class="token directive"><span class="token keyword">worker_connections</span> <span class="token number">65535</span></span><span class="token punctuation">;</span>
    <span class="token comment">############################################################################</span>
<span class="token punctuation">}</span>

<span class="token comment">#设定 http 服务器</span>
<span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">include</span> mime.types</span><span class="token punctuation">;</span> <span class="token comment">#文件扩展名与文件类型映射表</span>
    <span class="token directive"><span class="token keyword">default_type</span> application/octet-stream</span><span class="token punctuation">;</span> <span class="token comment">#默认文件类型</span>
    <span class="token comment">#charset utf-8; #默认编码</span>

    <span class="token directive"><span class="token keyword">server_names_hash_bucket_size</span> <span class="token number">128</span></span><span class="token punctuation">;</span> <span class="token comment">#服务器名字的 hash 表大小</span>
    <span class="token directive"><span class="token keyword">client_header_buffer_size</span> <span class="token number">32k</span></span><span class="token punctuation">;</span> <span class="token comment">#上传文件大小限制</span>
    <span class="token directive"><span class="token keyword">large_client_header_buffers</span> <span class="token number">4</span> <span class="token number">64k</span></span><span class="token punctuation">;</span> <span class="token comment">#设定请求缓</span>
    <span class="token directive"><span class="token keyword">client_max_body_size</span> <span class="token number">8m</span></span><span class="token punctuation">;</span> <span class="token comment">#设定请求缓</span>
    <span class="token directive"><span class="token keyword">sendfile</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span> <span class="token comment">#开启高效文件传输模式，sendfile 指令指定 nginx 是否调用 sendfile 函数来输出文件，对于普通应用设为 on，如果用来进行下载等应用磁盘 IO 重负载应用，可设置为 off，以平衡磁盘与网络 I/O 处理速度，降低系统的负载。注意：如果图片显示不正常把这个改成 off。</span>
    <span class="token directive"><span class="token keyword">autoindex</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span> <span class="token comment">#开启目录列表访问，合适下载服务器，默认关闭。</span>
    <span class="token directive"><span class="token keyword">tcp_nopush</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span> <span class="token comment">#防止网络阻塞</span>
    <span class="token directive"><span class="token keyword">tcp_nodelay</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span> <span class="token comment">#防止网络阻塞</span>

    <span class="token comment">##连接客户端超时时间各种参数设置##</span>
    <span class="token directive"><span class="token keyword">keepalive_timeout</span>  <span class="token number">120</span></span><span class="token punctuation">;</span>          <span class="token comment">#单位是秒，客户端连接时时间，超时之后服务器端自动关闭该连接 如果 nginx 守护进程在这个等待的时间里，一直没有收到浏览发过来 http 请求，则关闭这个 http 连接</span>
    <span class="token directive"><span class="token keyword">client_header_timeout</span> <span class="token number">10</span></span><span class="token punctuation">;</span>        <span class="token comment">#客户端请求头的超时时间</span>
    <span class="token directive"><span class="token keyword">client_body_timeout</span> <span class="token number">10</span></span><span class="token punctuation">;</span>          <span class="token comment">#客户端请求主体超时时间</span>
    <span class="token directive"><span class="token keyword">reset_timedout_connection</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>    <span class="token comment">#告诉 nginx 关闭不响应的客户端连接。这将会释放那个客户端所占有的内存空间</span>
    <span class="token directive"><span class="token keyword">send_timeout</span> <span class="token number">10</span></span><span class="token punctuation">;</span>                 <span class="token comment">#客户端响应超时时间，在两次客户端读取操作之间。如果在这段时间内，客户端没有读取任何数据，nginx 就会关闭连接</span>
    <span class="token comment">################################</span>

    <span class="token comment">#FastCGI 相关参数是为了改善网站的性能：减少资源占用，提高访问速度。下面参数看字面意思都能理解。</span>
    <span class="token directive"><span class="token keyword">fastcgi_connect_timeout</span> <span class="token number">300</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">fastcgi_send_timeout</span> <span class="token number">300</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">fastcgi_read_timeout</span> <span class="token number">300</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">fastcgi_buffer_size</span> <span class="token number">64k</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">fastcgi_buffers</span> <span class="token number">4</span> <span class="token number">64k</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">fastcgi_busy_buffers_size</span> <span class="token number">128k</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">fastcgi_temp_file_write_size</span> <span class="token number">128k</span></span><span class="token punctuation">;</span>

    <span class="token comment">###作为代理缓存服务器设置#######</span>
    <span class="token comment">###先写到 temp 再移动到 cache</span>
    <span class="token comment">#proxy_cache_path /var/tmp/nginx/proxy_cache levels=1:2 keys_zone=cache_one:512m inactive=10m max_size=64m;</span>
    <span class="token comment">###以上 proxy_temp 和 proxy_cache 需要在同一个分区中</span>
    <span class="token comment">###levels=1:2 表示缓存级别，表示缓存目录的第一级目录是 1 个字符，第二级目录是 2 个字符 keys_zone=cache_one:128m 缓存空间起名为 cache_one 大小为 512m</span>
    <span class="token comment">###max_size=64m 表示单个文件超过 128m 就不缓存了  inactive=10m 表示缓存的数据，10 分钟内没有被访问过就删除</span>
    <span class="token comment">#########end####################</span>

    <span class="token comment">#####对传输文件压缩###########</span>
    <span class="token comment">#gzip 模块设置</span>
    <span class="token directive"><span class="token keyword">gzip</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span> <span class="token comment">#开启 gzip 压缩输出</span>
    <span class="token directive"><span class="token keyword">gzip_min_length</span> <span class="token number">1k</span></span><span class="token punctuation">;</span> <span class="token comment">#最小压缩文件大小</span>
    <span class="token directive"><span class="token keyword">gzip_buffers</span> <span class="token number">4</span> <span class="token number">16k</span></span><span class="token punctuation">;</span> <span class="token comment">#压缩缓冲区</span>
    <span class="token directive"><span class="token keyword">gzip_http_version</span> 1.0</span><span class="token punctuation">;</span> <span class="token comment">#压缩版本（默认 1.1，前端如果是 squid2.5 请使用 1.0）</span>
    <span class="token directive"><span class="token keyword">gzip_comp_level</span> <span class="token number">2</span></span><span class="token punctuation">;</span> <span class="token comment">#压缩等级，gzip 压缩比，1 为最小，处理最快；9 为压缩比最大，处理最慢，传输速度最快，也最消耗 CPU；</span>
    <span class="token directive"><span class="token keyword">gzip_types</span> text/plain application/x-javascript text/css application/xml</span><span class="token punctuation">;</span>
    <span class="token comment">#压缩类型，默认就已经包含 text/html，所以下面就不用再写了，写上去也不会有问题，但是会有一个 warn。</span>
    <span class="token directive"><span class="token keyword">gzip_vary</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token comment">##############################</span>

    <span class="token comment">#limit_zone crawler $binary_remote_addr 10m; #开启限制 IP 连接数的时候需要使用</span>

    <span class="token directive"><span class="token keyword">upstream</span> blog.ha97.com</span> <span class="token punctuation">{</span>
        <span class="token comment">#upstream 的负载均衡，weight 是权重，可以根据机器配置定义权重。weigth 参数表示权值，权值越高被分配到的几率越大。</span>
        <span class="token directive"><span class="token keyword">server</span> 192.168.80.121:80 weight=3</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">server</span> 192.168.80.122:80 weight=2</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">server</span> 192.168.80.123:80 weight=3</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">#虚拟主机的配置</span>
    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token comment">#监听端口</span>
        <span class="token directive"><span class="token keyword">listen</span> <span class="token number">80</span></span><span class="token punctuation">;</span>

        <span class="token comment">#############https##################</span>
        <span class="token comment">#listen 443 ssl;</span>
        <span class="token comment">#ssl_certificate /opt/https/xxxxxx.crt;</span>
        <span class="token comment">#ssl_certificate_key /opt/https/xxxxxx.key;</span>
        <span class="token comment">#ssl_protocols SSLv3 TLSv1;</span>
        <span class="token comment">#ssl_ciphers HIGH:!ADH:!EXPORT57:RC4+RSA:+MEDIUM;</span>
        <span class="token comment">#ssl_prefer_server_ciphers on;</span>
        <span class="token comment">#ssl_session_cache shared:SSL:2m;</span>
        <span class="token comment">#ssl_session_timeout 5m;</span>
        <span class="token comment">####################################end</span>

        <span class="token comment">#域名可以有多个，用空格隔开</span>
        <span class="token directive"><span class="token keyword">server_name</span> www.ha97.com ha97.com</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">index</span> index.html index.htm index.php</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">root</span> /data/www/ha97</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">location</span> ~ .*.(php|php5)?$</span> <span class="token punctuation">{</span>
            <span class="token directive"><span class="token keyword">fastcgi_pass</span> 127.0.0.1:9000</span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">fastcgi_index</span> index.php</span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">include</span> fastcgi.conf</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">#图片缓存时间设置</span>
        <span class="token directive"><span class="token keyword">location</span> ~ .*.(gif|jpg|jpeg|png|bmp|swf)$</span> <span class="token punctuation">{</span>
            <span class="token directive"><span class="token keyword">expires</span> <span class="token number">10d</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">#JS 和 CSS 缓存时间设置</span>
        <span class="token directive"><span class="token keyword">location</span> ~ .*.(js|css)?$</span> <span class="token punctuation">{</span>
            <span class="token directive"><span class="token keyword">expires</span> <span class="token number">1h</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">#日志格式设定</span>
        <span class="token directive"><span class="token keyword">log_format</span> access <span class="token string">&#39;<span class="token variable">$remote_addr</span> - <span class="token variable">$remote_user</span> [<span class="token variable">$time_local]</span> &quot;<span class="token variable">$request</span>&quot; &#39;</span> <span class="token string">&#39;<span class="token variable">$status</span> <span class="token variable">$body_bytes_sent</span> &quot;<span class="token variable">$http_referer</span>&quot; &#39;</span> <span class="token string">&#39;&quot;<span class="token variable">$http_user_agent</span>&quot; <span class="token variable">$http_x_forwarded_for</span>&#39;</span></span><span class="token punctuation">;</span>

        <span class="token comment">#定义本虚拟主机的访问日志</span>
        <span class="token directive"><span class="token keyword">access_log</span> /var/log/nginx/ha97access.log access</span><span class="token punctuation">;</span>

        <span class="token comment">#对 &quot;/&quot; 启用反向代理</span>
        <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
            <span class="token directive"><span class="token keyword">proxy_pass</span> http://127.0.0.1:88</span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_redirect</span> <span class="token boolean">off</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Real-IP <span class="token variable">$remote_addr</span></span><span class="token punctuation">;</span>
            <span class="token comment">#后端的 Web 服务器可以通过 X-Forwarded-For 获取用户真实 IP</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span></span><span class="token punctuation">;</span>
            <span class="token comment">#以下是一些反向代理的配置，可选。</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span> Host <span class="token variable">$host</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">client_max_body_size</span> <span class="token number">10m</span></span><span class="token punctuation">;</span> <span class="token comment">#允许客户端请求的最大单文件字节数</span>
            <span class="token directive"><span class="token keyword">client_body_buffer_size</span> <span class="token number">128k</span></span><span class="token punctuation">;</span> <span class="token comment">#缓冲区代理缓冲用户端请求的最大字节数，</span>

            <span class="token comment">##代理设置 以下设置是 nginx 和后端服务器之间通讯的设置##</span>
            <span class="token directive"><span class="token keyword">proxy_connect_timeout</span> <span class="token number">90</span></span><span class="token punctuation">;</span> <span class="token comment">#nginx 跟后端服务器连接超时时间（代理连接超时）</span>
            <span class="token directive"><span class="token keyword">proxy_send_timeout</span> <span class="token number">90</span></span><span class="token punctuation">;</span> <span class="token comment">#后端服务器数据回传时间（代理发送超时）</span>
            <span class="token directive"><span class="token keyword">proxy_read_timeout</span> <span class="token number">90</span></span><span class="token punctuation">;</span> <span class="token comment">#连接成功后，后端服务器响应时间（代理接收超时）</span>
            <span class="token directive"><span class="token keyword">proxy_buffering</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>    <span class="token comment">#该指令开启从后端被代理服务器的响应内容缓冲 此参数开启后 proxy_buffers 和 proxy_busy_buffers_size 参数才会起作用</span>
            <span class="token directive"><span class="token keyword">proxy_buffer_size</span> <span class="token number">4k</span></span><span class="token punctuation">;</span>  <span class="token comment">#设置代理服务器（nginx）保存用户头信息的缓冲区大小</span>
            <span class="token directive"><span class="token keyword">proxy_buffers</span> <span class="token number">4</span> <span class="token number">32k</span></span><span class="token punctuation">;</span>   <span class="token comment">#proxy_buffers 缓冲区，网页平均在 32k 以下的设置</span>
            <span class="token directive"><span class="token keyword">proxy_busy_buffers_size</span> <span class="token number">64k</span></span><span class="token punctuation">;</span> <span class="token comment">#高负荷下缓冲大小（proxy_buffers*2）</span>
            <span class="token directive"><span class="token keyword">proxy_max_temp_file_size</span> <span class="token number">2048m</span></span><span class="token punctuation">;</span> <span class="token comment">#默认 1024m, 该指令用于设置当网页内容大于 proxy_buffers 时，临时文件大小的最大值。如果文件大于这个值，它将从 upstream 服务器同步地传递请求，而不是缓冲到磁盘</span>
            <span class="token directive"><span class="token keyword">proxy_temp_file_write_size</span> <span class="token number">512k</span></span><span class="token punctuation">;</span> 这是当被代理服务器的响应过大时 <span class="token directive"><span class="token keyword">nginx</span> 一次性写入临时文件的数据量。
            proxy_temp_path  /var/tmp/nginx/proxy_temp</span><span class="token punctuation">;</span>    <span class="token comment">##定义缓冲存储目录，之前必须要先手动创建此目录</span>
            <span class="token directive"><span class="token keyword">proxy_headers_hash_max_size</span> <span class="token number">51200</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_headers_hash_bucket_size</span> <span class="token number">6400</span></span><span class="token punctuation">;</span>
            <span class="token comment">#######################################################</span>
        <span class="token punctuation">}</span>

        <span class="token comment">#设定查看 nginx 状态的地址</span>
        <span class="token directive"><span class="token keyword">location</span> /nginxStatus</span> <span class="token punctuation">{</span>
            <span class="token directive"><span class="token keyword">stub_status</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">access_log</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">auth_basic</span> <span class="token string">&quot;nginxStatus&quot;</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">auth_basic_user_file</span> conf/htpasswd</span><span class="token punctuation">;</span>
            <span class="token comment">#htpasswd 文件的内容可以用 apache 提供的 htpasswd 工具来产生。</span>
        <span class="token punctuation">}</span>

        <span class="token comment">#本地动静分离反向代理配置</span>
        <span class="token comment">#所有 jsp 的页面均交由 tomcat 或 resin 处理</span>
        <span class="token directive"><span class="token keyword">location</span> ~ .(jsp|jspx|do)?$</span> <span class="token punctuation">{</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span> Host <span class="token variable">$host</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Real-IP <span class="token variable">$remote_addr</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_pass</span> http://127.0.0.1:8080</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">#所有静态文件由 nginx 直接读取不经过 tomcat 或 resin</span>
        <span class="token directive"><span class="token keyword">location</span> ~ .*.(htm|html|gif|jpg|jpeg|png|bmp|swf|ioc|rar|zip|txt|flv|mid|doc|ppt|pdf|xls|mp3|wma)$</span>
        <span class="token punctuation">{</span> <span class="token directive"><span class="token keyword">expires</span> <span class="token number">15d</span></span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token directive"><span class="token keyword">location</span> ~ .*.(js|css)?$</span>
        <span class="token punctuation">{</span> <span class="token directive"><span class="token keyword">expires</span> <span class="token number">1h</span></span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="基本规则" tabindex="-1"><a class="header-anchor" href="#基本规则" aria-hidden="true">#</a> 基本规则</h2><h3 id="管理-nginx-配置" tabindex="-1"><a class="header-anchor" href="#管理-nginx-配置" aria-hidden="true">#</a> 管理 Nginx 配置</h3><blockquote><p>随着 Nginx 配置的增长，您有必要组织、管理配置内容。</p><p>当您的 Nginx 配置增加时，组织配置的需求也会增加。 井井有条的代码是：</p><ul><li>易于理解</li><li>易于维护</li><li>易于使用</li></ul></blockquote><blockquote><p>使用 <code>include</code> 指令可将常用服务器配置移动到单独的文件中，并将特定代码附加到全局配置，上下文等中。</p></blockquote><blockquote><p>我总是尝试在配置树的根目录中保留多个目录。 这些目录存储所有附加到主文件的配置文件。 我更喜欢以下结构：</p><ul><li><code>html</code> - 用于默认静态文件，例如 全局 5xx 错误页面</li><li><code>master</code> - 用于主要配置，例如 ACL，侦听指令和域 <ul><li><code>_acls</code> - 用于访问控制列表，例如 地理或地图模块</li><li><code>_basic</code> - 用于速率限制规则，重定向映射或代理参数</li><li><code>_listen</code> - 用于所有侦听指令； 还存储 SSL 配置</li><li><code>_server</code> - 用于域（localhost）配置； 还存储所有后端定义</li></ul></li><li><code>modules</code> - 用于动态加载到 Nginx 中的模块</li><li><code>snippets</code> - 用于 Nginx 别名，配置模板</li></ul><p>如果有必要，我会将其中一些附加到具有 <code>server</code> 指令的文件中。</p></blockquote><p>示例：</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment">## Store this configuration in https.conf for example:</span>
<span class="token directive"><span class="token keyword">listen</span> 10.240.20.2:443 ssl</span><span class="token punctuation">;</span>

<span class="token directive"><span class="token keyword">ssl_certificate</span> /etc/nginx/master/_server/example.com/certs/nginx_example.com_bundle.crt</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">ssl_certificate_key</span> /etc/nginx/master/_server/example.com/certs/example.com.key</span><span class="token punctuation">;</span>

<span class="token comment">## Include this file to the server section:</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">include</span> /etc/nginx/master/_listen/10.240.20.2/https.conf</span><span class="token punctuation">;</span>

  <span class="token comment">## And other:</span>
  <span class="token directive"><span class="token keyword">include</span> /etc/nginx/master/_static/errors.conf</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">include</span> /etc/nginx/master/_server/_helpers/global.conf</span><span class="token punctuation">;</span>

  ...

  <span class="token directive"><span class="token keyword">server_name</span> domain.com www.domain.com</span><span class="token punctuation">;</span>

  ...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="重加载-nginx-配置" tabindex="-1"><a class="header-anchor" href="#重加载-nginx-配置" aria-hidden="true">#</a> 重加载 Nginx 配置</h3><p>示例：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">## 1)</span>
systemctl reload nginx

<span class="token comment">## 2)</span>
<span class="token function">service</span> nginx reload

<span class="token comment">## 3)</span>
/etc/init.d/nginx reload

<span class="token comment">## 4)</span>
/usr/sbin/nginx <span class="token parameter variable">-s</span> reload

<span class="token comment">## 5)</span>
<span class="token function">kill</span> <span class="token parameter variable">-HUP</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> /var/run/nginx.pid<span class="token variable">)</span></span>
<span class="token comment">## or</span>
<span class="token function">kill</span> <span class="token parameter variable">-HUP</span> <span class="token variable"><span class="token variable">$(</span>pgrep <span class="token parameter variable">-f</span> <span class="token string">&quot;nginx: master&quot;</span><span class="token variable">)</span></span>

<span class="token comment">## 6)</span>
/usr/sbin/nginx <span class="token parameter variable">-g</span> <span class="token string">&#39;daemon on; master_process on;&#39;</span> <span class="token parameter variable">-s</span> reload
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="监听-80-和-443-端口" tabindex="-1"><a class="header-anchor" href="#监听-80-和-443-端口" aria-hidden="true">#</a> 监听 80 和 443 端口</h3><blockquote><p>如果您使用完全相同的配置为 HTTP 和 HTTPS 提供服务（单个服务器同时处理 HTTP 和 HTTPS 请求），Nginx 足够智能，可以忽略通过端口 80 加载的 SSL 指令。</p><p>Nginx 的最佳实践是使用单独的服务器进行这样的重定向（不与您的主要配置的服务器共享），对所有内容进行硬编码，并且完全不使用正则表达式。</p><p>我不喜欢复制规则，但是单独的监听指令无疑可以帮助您维护和修改配置。</p><p>如果将多个域固定到一个 IP 地址，则很有用。 这使您可以将一个侦听指令（例如，如果将其保留在配置文件中）附加到多个域配置。</p><p>如果您使用的是 HTTPS，则可能还需要对域进行硬编码，因为您必须预先知道要提供的证书。</p></blockquote><p>示例：</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment">## For HTTP:</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">listen</span> 10.240.20.2:80</span><span class="token punctuation">;</span>

  ...

<span class="token punctuation">}</span>

<span class="token comment">## For HTTPS:</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">listen</span> 10.240.20.2:443 ssl</span><span class="token punctuation">;</span>

  ...

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="显示指定监听的地址和端口" tabindex="-1"><a class="header-anchor" href="#显示指定监听的地址和端口" aria-hidden="true">#</a> 显示指定监听的地址和端口</h3><p>Nginx 的 listen 指令用于监听指定的 IP 地址和端口号，配置形式为：<code>listen &lt;address&gt;:&lt;port&gt;</code>。若 IP 地址或端口缺失，Nginx 会以默认值来替换。</p><p>而且，仅当需要区分与 listen 指令中的同一级别匹配的服务器块时，才会评估 server_name 指令。</p><p>示例：</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

  <span class="token comment">## This block will be processed:</span>
  <span class="token directive"><span class="token keyword">listen</span> 192.168.252.10</span><span class="token punctuation">;</span>  <span class="token comment">## --&gt; 192.168.252.10:80</span>

  ...

<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">listen</span> <span class="token number">80</span></span><span class="token punctuation">;</span>  <span class="token comment">## --&gt; *:80 --&gt; 0.0.0.0:80</span>
  <span class="token directive"><span class="token keyword">server_name</span> api.random.com</span><span class="token punctuation">;</span>

  ...

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="防止使用未定义的服务器名称处理请求" tabindex="-1"><a class="header-anchor" href="#防止使用未定义的服务器名称处理请求" aria-hidden="true">#</a> 防止使用未定义的服务器名称处理请求</h3><blockquote><p>Nginx 应该阻止使用未定义的服务器名称（也使用 IP 地址）处理请求。它可以防止配置错误，例如流量转发到不正确的后端。通过创建默认虚拟虚拟主机可以轻松解决该问题，该虚拟虚拟主机可以捕获带有无法识别的主机标头的所有请求。</p><p>如果没有一个 listen 指令具有 default_server 参数，则具有 address：port 对的第一台服务器将是该对的默认服务器（这意味着 Nginx 始终具有默认服务器）。</p><p>如果有人使用 IP 地址而不是服务器名称发出请求，则主机请求标头字段将包含 IP 地址，并且可以使用 IP 地址作为服务器名称来处理请求。</p><p>在现代版本的 Nginx 中，不需要服务器名称_。如果找不到具有匹配的 listen 和 server_name 的服务器，Nginx 将使用默认服务器。如果您的配置分散在多个文件中，则评估顺序将不明确，因此您需要显式标记默认服务器。</p><p>Nginx 使用 Host 标头进行 server_name 匹配。它不使用 TLS SNI。这意味着对于 SSL 服务器，Nginx 必须能够接受 SSL 连接，这归结为具有证书/密钥。证书/密钥可以是任意值，例如自签名。</p></blockquote><p>示例：</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment">## Place it at the beginning of the configuration file to prevent mistakes:</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

  <span class="token comment">## For ssl option remember about SSL parameters (private key, certs, cipher suites, etc.);</span>
  <span class="token comment">## add default_server to your listen directive in the server that you want to act as the default:</span>
  <span class="token directive"><span class="token keyword">listen</span> 10.240.20.2:443 default_server ssl</span><span class="token punctuation">;</span>

  <span class="token comment">## We catch:</span>
  <span class="token comment">##   - invalid domain names</span>
  <span class="token comment">##   - requests without the &quot;Host&quot; header</span>
  <span class="token comment">##   - and all others (also due to the above setting)</span>
  <span class="token comment">##   - default_server in server_name directive is not required - I add this for a better understanding and I think it&#39;s an unwritten standard</span>
  <span class="token comment">## ...but you should know that it&#39;s irrelevant, really, you can put in everything there.</span>
  <span class="token directive"><span class="token keyword">server_name</span> _ <span class="token string">&quot;&quot;</span> default_server</span><span class="token punctuation">;</span>

  ...

  <span class="token directive"><span class="token keyword">return</span> <span class="token number">444</span></span><span class="token punctuation">;</span>

  <span class="token comment">## We can also serve:</span>
  <span class="token comment">## location / {</span>

    <span class="token comment">## static file (error page):</span>
    <span class="token comment">##   root /etc/nginx/error-pages/404;</span>
    <span class="token comment">## or redirect:</span>
    <span class="token comment">##   return 301 https://badssl.com;</span>

    <span class="token comment">## return 444;</span>

  <span class="token comment">## }</span>

<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">listen</span> 10.240.20.2:443 ssl</span><span class="token punctuation">;</span>

  <span class="token directive"><span class="token keyword">server_name</span> domain.com</span><span class="token punctuation">;</span>

  ...

<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">listen</span> 10.240.20.2:443 ssl</span><span class="token punctuation">;</span>

  <span class="token directive"><span class="token keyword">server_name</span> domain.org</span><span class="token punctuation">;</span>

  ...

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="不要在-listen-或-upstream-中使用-hostname" tabindex="-1"><a class="header-anchor" href="#不要在-listen-或-upstream-中使用-hostname" aria-hidden="true">#</a> 不要在 listen 或 upstream 中使用 hostname</h3><blockquote><p>通常，在 listen 或上游指令中使用主机名是一种不好的做法。</p><p>在最坏的情况下，Nginx 将无法绑定到所需的 TCP 套接字，这将完全阻止 Nginx 启动。</p><p>最好和更安全的方法是知道需要绑定的 IP 地址，并使用该地址代替主机名。 这也可以防止 Nginx 查找地址并消除对外部和内部解析器的依赖。</p><p>在 server_name 指令中使用$ hostname（计算机的主机名）变量也是不当行为的示例（类似于使用主机名标签）。</p><p>我认为也有必要设置 IP 地址和端口号对，以防止可能难以调试的软错误。</p></blockquote><p>示例：</p><p>❌ 错误配置</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">upstream</span></span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">server</span> http://x-9s-web01-prod:8080</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">listen</span> rev-proxy-prod:80</span><span class="token punctuation">;</span>

  ...

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>⭕ 正确配置</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">upstream</span></span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">server</span> http://192.168.252.200:8080</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">listen</span> 10.10.100.20:80</span><span class="token punctuation">;</span>

  ...

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="指令中只配置一个-ssl" tabindex="-1"><a class="header-anchor" href="#指令中只配置一个-ssl" aria-hidden="true">#</a> 指令中只配置一个 SSL</h3><blockquote><p>此规则使调试和维护更加容易。</p><p>请记住，无论 SSL 参数如何，您都可以在同一监听指令（IP 地址）上使用多个 SSL 证书。</p><p>我认为要在多个 HTTPS 服务器之间共享一个 IP 地址，您应该使用一个 SSL 配置（例如协议，密码，曲线）。这是为了防止错误和配置不匹配。</p><p>还请记住有关默认服务器的配置。这很重要，因为如果所有 listen 指令都没有 default_server 参数，则配置中的第一台服务器将是默认服务器。因此，您应该只使用一个 SSL 设置，并且在同一 IP 地址上使用多个名称。</p><p>从 Nginx 文档中：</p><p>这是由 SSL 协议行为引起的。在浏览器发送 HTTP 请求之前，已建立 SSL 连接，nginx 不知道所请求服务器的名称。因此，它可能仅提供默认服务器的证书。</p><p>还要看看这个：</p><p>TLS 服务器名称指示扩展名（SNI，RFC 6066）是在单个 IP 地址上运行多个 HTTPS 服务器的更通用的解决方案，它允许浏览器在 SSL 握手期间传递请求的服务器名称，因此，服务器将知道哪个用于连接的证书。</p><p>另一个好主意是将常用服务器设置移到单独的文件（即 common / example.com.conf）中，然后将其包含在单独的服务器块中。</p></blockquote><p>示例：</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment">## Store this configuration in e.g. https.conf:</span>
<span class="token directive"><span class="token keyword">listen</span> 192.168.252.10:443 default_server ssl http2</span><span class="token punctuation">;</span>

<span class="token directive"><span class="token keyword">ssl_protocols</span> TLSv1.2</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">ssl_ciphers</span> <span class="token string">&quot;ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384&quot;</span></span><span class="token punctuation">;</span>

<span class="token directive"><span class="token keyword">ssl_prefer_server_ciphers</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>

<span class="token directive"><span class="token keyword">ssl_ecdh_curve</span> secp521r1:secp384r1</span><span class="token punctuation">;</span>

...

<span class="token comment">## Include this file to the server context (attach domain-a.com for specific listen directive):</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">include</span>             /etc/nginx/https.conf</span><span class="token punctuation">;</span>

  <span class="token directive"><span class="token keyword">server_name</span>         domain-a.com</span><span class="token punctuation">;</span>

  <span class="token directive"><span class="token keyword">ssl_certificate</span>     domain-a.com.crt</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">ssl_certificate_key</span> domain-a.com.key</span><span class="token punctuation">;</span>

  ...

<span class="token punctuation">}</span>

<span class="token comment">## Include this file to the server context (attach domain-b.com for specific listen directive):</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">include</span>             /etc/nginx/https.conf</span><span class="token punctuation">;</span>

  <span class="token directive"><span class="token keyword">server_name</span>         domain-b.com</span><span class="token punctuation">;</span>

  <span class="token directive"><span class="token keyword">ssl_certificate</span>     domain-b.com.crt</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">ssl_certificate_key</span> domain-b.com.key</span><span class="token punctuation">;</span>

  ...

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="使用-geo-map-模块替代-allow-deny" tabindex="-1"><a class="header-anchor" href="#使用-geo-map-模块替代-allow-deny" aria-hidden="true">#</a> 使用 geo/map 模块替代 allow/deny</h3><blockquote><p>使用地图或地理模块（其中之一）可以防止用户滥用您的服务器。这样就可以创建变量，其值取决于客户端 IP 地址。</p><p>由于仅在使用变量时才对其进行求值，因此甚至仅存在大量已声明的变量。地理位置变量不会为请求处理带来任何额外费用。</p><p>这些指令提供了阻止无效访问者的完美方法，例如使用 ngx_http_geoip_module。例如，geo 模块非常适合有条件地允许或拒绝 IP。</p><p>geo 模块（注意：不要将此模块误认为是 GeoIP）在加载配置时会构建内存基数树。这与路由中使用的数据结构相同，并且查找速度非常快。如果每个网络有许多唯一值，那么较长的加载时间是由在数组中搜索数据重复项引起的。否则，可能是由于插入基数树引起的。</p><p>我将两个模块都用于大型列表。您应该考虑一下，因为此规则要求使用多个 if 条件。我认为，对于简单的列表，毕竟允许/拒绝指令是更好的解决方案。看下面的例子：</p></blockquote><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment">## Allow/deny:</span>
<span class="token directive"><span class="token keyword">location</span> /internal</span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">include</span> acls/internal.conf</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">allow</span>   192.168.240.0/24</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">deny</span>    all</span><span class="token punctuation">;</span>

  ...

<span class="token comment">## vs geo/map:</span>
<span class="token directive"><span class="token keyword">location</span> /internal</span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">if</span> (<span class="token variable">$globals_internal_map_acl</span>)</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">set</span> <span class="token variable">$pass</span> <span class="token number">1</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token directive"><span class="token keyword">if</span> (<span class="token variable">$pass</span> = 1)</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">proxy_pass</span> http://localhost:80</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token directive"><span class="token keyword">if</span> (<span class="token variable">$pass</span> != 1)</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">return</span> <span class="token number">403</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  ...

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>示例：</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment">## Map module:</span>
<span class="token directive"><span class="token keyword">map</span> <span class="token variable">$remote_addr</span> <span class="token variable">$globals_internal_map_acl</span></span> <span class="token punctuation">{</span>

  <span class="token comment">## Status code:</span>
  <span class="token comment">##  - 0 = false</span>
  <span class="token comment">##  - 1 = true</span>
  <span class="token directive"><span class="token keyword">default</span> <span class="token number">0</span></span><span class="token punctuation">;</span>

  <span class="token comment">### INTERNAL ###</span>
  <span class="token directive"><span class="token keyword">10.255.10.0/24</span> <span class="token number">1</span></span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">10.255.20.0/24</span> <span class="token number">1</span></span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">10.255.30.0/24</span> <span class="token number">1</span></span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">192.168.0.0/16</span> <span class="token number">1</span></span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token comment">## Geo module:</span>
<span class="token directive"><span class="token keyword">geo</span> <span class="token variable">$globals_internal_geo_acl</span></span> <span class="token punctuation">{</span>

  <span class="token comment">## Status code:</span>
  <span class="token comment">##  - 0 = false</span>
  <span class="token comment">##  - 1 = true</span>
  <span class="token directive"><span class="token keyword">default</span> <span class="token number">0</span></span><span class="token punctuation">;</span>

  <span class="token comment">### INTERNAL ###</span>
  <span class="token directive"><span class="token keyword">10.255.10.0/24</span> <span class="token number">1</span></span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">10.255.20.0/24</span> <span class="token number">1</span></span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">10.255.30.0/24</span> <span class="token number">1</span></span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">192.168.0.0/16</span> <span class="token number">1</span></span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="map-所有事物" tabindex="-1"><a class="header-anchor" href="#map-所有事物" aria-hidden="true">#</a> Map 所有事物</h3><blockquote><p>使用地图管理大量重定向，并使用它们来自定义键/值对。</p><p>map 指令可映射字符串，因此可以表示例如 192.168.144.0/24 作为正则表达式，并继续使用 map 指令。</p><p>Map 模块提供了一种更优雅的解决方案，用于清晰地解析大量正则表达式，例如 用户代理，引荐来源。</p><p>您还可以对地图使用 include 指令，这样配置文件看起来会很漂亮。</p></blockquote><p>示例：</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">map</span> <span class="token variable">$http_user_agent</span> <span class="token variable">$device_redirect</span></span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">default</span> <span class="token string">&quot;desktop&quot;</span></span><span class="token punctuation">;</span>

  ~(?i)ip(hone|od) &quot;mobile&quot;<span class="token punctuation">;</span>
  ~(?i)android.*(mobile|mini) &quot;mobile&quot;<span class="token punctuation">;</span>
  ~Mobile.+Firefox &quot;mobile&quot;<span class="token punctuation">;</span>
  ~^HTC &quot;mobile&quot;<span class="token punctuation">;</span>
  ~Fennec &quot;mobile&quot;<span class="token punctuation">;</span>
  ~IEMobile &quot;mobile&quot;<span class="token punctuation">;</span>
  ~BB10 &quot;mobile&quot;<span class="token punctuation">;</span>
  ~SymbianOS.*AppleWebKit &quot;mobile&quot;<span class="token punctuation">;</span>
  ~Opera\sMobi &quot;mobile&quot;<span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token comment">## Turn on in a specific context (e.g. location):</span>
<span class="token directive"><span class="token keyword">if</span> (<span class="token variable">$device_redirect</span> = <span class="token string">&quot;mobile&quot;</span>)</span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">return</span> <span class="token number">301</span> https://m.domain.com<span class="token variable">$request_uri</span></span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="为所有未匹配的路径设置根路径" tabindex="-1"><a class="header-anchor" href="#为所有未匹配的路径设置根路径" aria-hidden="true">#</a> 为所有未匹配的路径设置根路径</h3><blockquote><p>为请求设置服务器指令内部的全局根路径。 它为未定义的位置指定根路径。</p><p>根据官方文档：</p><p>如果您在每个位置块中添加一个根路径，则不匹配的位置块将没有根路径。因此，重要的是，根指令必须在您的位置块之前发生，然后根目录指令可以在需要时覆盖该指令。</p></blockquote><p>示例：</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">server_name</span> domain.com</span><span class="token punctuation">;</span>

  <span class="token directive"><span class="token keyword">root</span> /var/www/domain.com/public</span><span class="token punctuation">;</span>

  <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>

    ...

  <span class="token punctuation">}</span>

  <span class="token directive"><span class="token keyword">location</span> /api</span> <span class="token punctuation">{</span>

    ...

  <span class="token punctuation">}</span>

  <span class="token directive"><span class="token keyword">location</span> /static</span> <span class="token punctuation">{</span>

    <span class="token directive"><span class="token keyword">root</span> /var/www/domain.com/static</span><span class="token punctuation">;</span>

    ...

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="使用-return-指令进行-url-重定向-301、302" tabindex="-1"><a class="header-anchor" href="#使用-return-指令进行-url-重定向-301、302" aria-hidden="true">#</a> 使用 return 指令进行 URL 重定向（301、302）</h3><blockquote><p>这是一个简单的规则。 您应该使用服务器块和 return 语句，因为它们比评估 RegEx 更快。</p><p>因为 Nginx 停止处理请求（而不必处理正则表达式），所以它更加简单快捷。</p></blockquote><p>示例</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">server_name</span> www.example.com</span><span class="token punctuation">;</span>

  <span class="token comment">## return    301 https://$host$request_uri;</span>
  <span class="token directive"><span class="token keyword">return</span>      <span class="token number">301</span> <span class="token variable">$scheme</span>://www.example.com<span class="token variable">$request_uri</span></span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="配置日志轮换策略" tabindex="-1"><a class="header-anchor" href="#配置日志轮换策略" aria-hidden="true">#</a> 配置日志轮换策略</h3><blockquote><p>日志文件为您提供有关服务器活动和性能以及可能出现的任何问题的反馈。 它们记录了有关请求和 Nginx 内部的详细信息。 不幸的是，日志使用了更多的磁盘空间。</p><p>您应该定义一个过程，该过程将定期存档当前日志文件并启动一个新日志文件，重命名并有选择地压缩当前日志文件，删除旧日志文件，并强制日志记录系统开始使用新日志文件。</p><p>我认为最好的工具是 logrotate。 如果我想自动管理日志，也想睡个好觉，那么我会在任何地方使用它。 这是一个旋转日志的简单程序，使用 crontab 可以工作。 它是计划的工作，而不是守护程序，因此无需重新加载其配置。</p></blockquote><p>示例：</p><ul><li><p>手动旋转</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">## Check manually (all log files):</span>
<span class="token function">logrotate</span> <span class="token parameter variable">-dv</span> /etc/logrotate.conf

<span class="token comment">## Check manually with force rotation (specific log file):</span>
<span class="token function">logrotate</span> <span class="token parameter variable">-dv</span> <span class="token parameter variable">--force</span> /etc/logrotate.d/nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>自动旋转</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> <span class="token operator">&gt;</span> /etc/logrotate.d/nginx <span class="token operator">&lt;&lt;</span> <span class="token string">__EOF__
/var/log/nginx/*.log {
  daily
  missingok
  rotate 14
  compress
  delaycompress
  notifempty
  create 0640 nginx nginx
  sharedscripts
  prerotate
    if [ -d /etc/logrotate.d/httpd-prerotate ]; then \
      run-parts /etc/logrotate.d/httpd-prerotate; \
    fi \
  endscript
  postrotate
    ## test ! -f /var/run/nginx.pid || kill -USR1 <span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> /var/run/nginx.pid<span class="token variable">`</span></span>
    invoke-rc.d nginx reload &gt;/dev/null 2&gt;&amp;1
  endscript
}

/var/log/nginx/localhost/*.log {
  daily
  missingok
  rotate 14
  compress
  delaycompress
  notifempty
  create 0640 nginx nginx
  sharedscripts
  prerotate
    if [ -d /etc/logrotate.d/httpd-prerotate ]; then \
      run-parts /etc/logrotate.d/httpd-prerotate; \
    fi \
  endscript
  postrotate
    ## test ! -f /var/run/nginx.pid || kill -USR1 <span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> /var/run/nginx.pid<span class="token variable">`</span></span>
    invoke-rc.d nginx reload &gt;/dev/null 2&gt;&amp;1
  endscript
}

/var/log/nginx/domains/example.com/*.log {
  daily
  missingok
  rotate 14
  compress
  delaycompress
  notifempty
  create 0640 nginx nginx
  sharedscripts
  prerotate
    if [ -d /etc/logrotate.d/httpd-prerotate ]; then \
      run-parts /etc/logrotate.d/httpd-prerotate; \
    fi \
  endscript
  postrotate
    ## test ! -f /var/run/nginx.pid || kill -USR1 <span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> /var/run/nginx.pid<span class="token variable">`</span></span>
    invoke-rc.d nginx reload &gt;/dev/null 2&gt;&amp;1
  endscript
}
__EOF__</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="不要重复索引指令-只能在-http-块中使用" tabindex="-1"><a class="header-anchor" href="#不要重复索引指令-只能在-http-块中使用" aria-hidden="true">#</a> 不要重复索引指令，只能在 http 块中使用</h3><blockquote><p>一次使用 index 指令。 它只需要在您的 http 上下文中发生，并将在下面继承。</p><p>我认为我们在复制相同规则时应格外小心。 但是，当然，规则的重复有时是可以的，或者不一定是大麻烦。</p></blockquote><p>示例：</p><p>❌ 错误配置</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">{</span>

  ...

  <span class="token directive"><span class="token keyword">index</span> index.php index.htm index.html</span><span class="token punctuation">;</span>

  <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

    <span class="token directive"><span class="token keyword">server_name</span> www.example.com</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>

      <span class="token directive"><span class="token keyword">index</span> index.php index.html index.<span class="token variable">$geo</span>.html</span><span class="token punctuation">;</span>

      ...

    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>

  <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

    <span class="token directive"><span class="token keyword">server_name</span> www.example.com</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>

      <span class="token directive"><span class="token keyword">index</span> index.php index.htm index.html</span><span class="token punctuation">;</span>

      ...

    <span class="token punctuation">}</span>

    <span class="token directive"><span class="token keyword">location</span> /data</span> <span class="token punctuation">{</span>

      <span class="token directive"><span class="token keyword">index</span> index.php</span><span class="token punctuation">;</span>

      ...

    <span class="token punctuation">}</span>

    ...

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>⭕ 正确配置</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">{</span>

  ...

  <span class="token directive"><span class="token keyword">index</span> index.php index.htm index.html index.<span class="token variable">$geo</span>.html</span><span class="token punctuation">;</span>

  <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

    <span class="token directive"><span class="token keyword">server_name</span> www.example.com</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>

      ...

    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>

  <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

    <span class="token directive"><span class="token keyword">server_name</span> www.example.com</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>

      ...

    <span class="token punctuation">}</span>

    <span class="token directive"><span class="token keyword">location</span> /data</span> <span class="token punctuation">{</span>

      ...

    <span class="token punctuation">}</span>

    ...

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="debugging" tabindex="-1"><a class="header-anchor" href="#debugging" aria-hidden="true">#</a> Debugging</h2><h3 id="使用自定义日志格式" tabindex="-1"><a class="header-anchor" href="#使用自定义日志格式" aria-hidden="true">#</a> 使用自定义日志格式</h3><blockquote><p>您可以在 Nginx 配置中作为变量访问的任何内容都可以记录，包括非标准的 HTTP 标头等。因此，这是一种针对特定情况创建自己的日志格式的简单方法。</p><p>这对于调试特定的 <code>location</code> 指令非常有帮助。</p></blockquote><p>示例：</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment">## Default main log format from the Nginx repository:</span>
<span class="token directive"><span class="token keyword">log_format</span> main
                <span class="token string">&#39;<span class="token variable">$remote_addr</span> - <span class="token variable">$remote_user</span> [<span class="token variable">$time_local]</span> &quot;<span class="token variable">$request</span>&quot; &#39;</span>
                <span class="token string">&#39;<span class="token variable">$status</span> <span class="token variable">$body_bytes_sent</span> &quot;<span class="token variable">$http_referer</span>&quot; &#39;</span>
                <span class="token string">&#39;&quot;<span class="token variable">$http_user_agent</span>&quot; &quot;<span class="token variable">$http_x_forwarded_for</span>&quot;&#39;</span></span><span class="token punctuation">;</span>

<span class="token comment">## Extended main log format:</span>
<span class="token directive"><span class="token keyword">log_format</span> main-level-0
                <span class="token string">&#39;<span class="token variable">$remote_addr</span> - <span class="token variable">$remote_user</span> [<span class="token variable">$time_local]</span> &#39;</span>
                <span class="token string">&#39;&quot;<span class="token variable">$request_method</span> <span class="token variable">$scheme</span>://<span class="token variable">$host</span><span class="token variable">$request_uri</span> &#39;</span>
                <span class="token string">&#39;<span class="token variable">$server_protocol</span>&quot; <span class="token variable">$status</span> <span class="token variable">$body_bytes_sent</span> &#39;</span>
                <span class="token string">&#39;&quot;<span class="token variable">$http_referer</span>&quot; &quot;<span class="token variable">$http_user_agent</span>&quot; &#39;</span>
                <span class="token string">&#39;<span class="token variable">$request_time</span>&#39;</span></span><span class="token punctuation">;</span>

<span class="token comment">## Debug log formats:</span>
<span class="token directive"><span class="token keyword">log_format</span> debug-level-0
                <span class="token string">&#39;<span class="token variable">$remote_addr</span> - <span class="token variable">$remote_user</span> [<span class="token variable">$time_local]</span> &#39;</span>
                <span class="token string">&#39;&quot;<span class="token variable">$request_method</span> <span class="token variable">$scheme</span>://<span class="token variable">$host</span><span class="token variable">$request_uri</span> &#39;</span>
                <span class="token string">&#39;<span class="token variable">$server_protocol</span>&quot; <span class="token variable">$status</span> <span class="token variable">$body_bytes_sent</span> &#39;</span>
                <span class="token string">&#39;<span class="token variable">$request_id</span> <span class="token variable">$pid</span> <span class="token variable">$msec</span> <span class="token variable">$request_time</span> &#39;</span>
                <span class="token string">&#39;<span class="token variable">$upstream_connect_time</span> <span class="token variable">$upstream_header_time</span> &#39;</span>
                <span class="token string">&#39;<span class="token variable">$upstream_response_time</span> &quot;<span class="token variable">$request_filename</span>&quot; &#39;</span>
                <span class="token string">&#39;<span class="token variable">$request_completion</span>&#39;</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="使用调试模式来跟踪意外行为" tabindex="-1"><a class="header-anchor" href="#使用调试模式来跟踪意外行为" aria-hidden="true">#</a> 使用调试模式来跟踪意外行为</h3><blockquote><p>通常，<code>error_log</code> 指令是在 <code>main</code> 中指定的，但是也可以在 <code>server</code> 或 <code>location</code> 块中指定，全局设置将被覆盖，并且这个 <code>error_log</code> 指令将设置其自己的日志文件路径和日志记录级别。</p><p>如果要记录 <code>ngx_http_rewrite_module</code> (at the notice level) ，应该在 <code>http</code>、<code>server</code> 或 <code>location</code> 块中开启 <code>rewrite_log on;</code>。</p><p>注意：</p><ul><li>永远不要将调试日志记录留在生产环境中的文件上</li><li>不要忘记在流量非常高的站点上恢复 <code>error_log</code> 的调试级别</li><li>必须使用日志回滚政策</li></ul></blockquote><p>示例：</p><ul><li>将 debug 信息写入文件</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment">## Turn on in a specific context, e.g.:</span>
<span class="token comment">##   - global    - for global logging</span>
<span class="token comment">##   - http      - for http and all locations logging</span>
<span class="token comment">##   - location  - for specific location</span>
<span class="token directive"><span class="token keyword">error_log</span> /var/log/nginx/error-debug.log debug</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>将 debug 信息写入内存</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">error_log</span> memory:32m debug</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>IP 地址/范围的调试日志：</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">events</span></span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">debug_connection</span>    192.168.252.15/32</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">debug_connection</span>    10.10.10.0/24</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>为不同服务器设置不同 Debug 配置</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">error_log</span> /var/log/nginx/debug.log debug</span><span class="token punctuation">;</span>

...

<span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

    <span class="token comment">## To enable debugging:</span>
    <span class="token directive"><span class="token keyword">error_log</span> /var/log/nginx/domain.com/domain.com-debug.log debug</span><span class="token punctuation">;</span>
    <span class="token comment">## To disable debugging:</span>
    <span class="token directive"><span class="token keyword">error_log</span> /var/log/nginx/domain.com/domain.com-debug.log</span><span class="token punctuation">;</span>

    ...

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="核心转储" tabindex="-1"><a class="header-anchor" href="#核心转储" aria-hidden="true">#</a> 核心转储</h3><blockquote><p>核心转储基本上是程序崩溃时内存的快照。</p><p>Nginx 是一个非常稳定的守护程序，但是有时可能会发生正在运行的 Nginx 进程独特终止的情况。</p><p>如果要保存内存转储，它可以确保应启用两个重要的指令，但是，为了正确处理内存转储，需要做一些事情。 有关它的完整信息，请参见转储进程的内存（来自本手册）。</p><p>当您的 Nginx 实例收到意外错误或崩溃时，应始终启用核心转储。</p></blockquote><p>示例：</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">worker_rlimit_core</span>    <span class="token number">500m</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">worker_rlimit_nofile</span>  <span class="token number">65535</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">working_directory</span>     /var/dump/nginx</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="性能" tabindex="-1"><a class="header-anchor" href="#性能" aria-hidden="true">#</a> 性能</h2><h3 id="工作进程数" tabindex="-1"><a class="header-anchor" href="#工作进程数" aria-hidden="true">#</a> 工作进程数</h3><blockquote><p><code>worker_processes</code> - 用于设置 Nginx 的工作进程数。</p></blockquote><ul><li>worker_processes 的默认值为 1。</li><li>设置 worker_processes 的安全做法是将其设为 auto，则启动 Nginx 时会自动分配工作进程数。当然，也可以显示的设置一个工作进程数值。</li><li>一般一个进程足够了，你可以把连接数设得很大。（worker_processes: 1，worker_connections: 10,000）如果有 SSL、gzip 这些比较消耗 CPU 的工作，而且是多核 CPU 的话，可以设为和 CPU 的数量一样。或者要处理很多很多的小文件，而且文件总大小比内存大很多的时候，也可以把进程数增加，以充分利用 IO 带宽（主要似乎是 IO 操作有 block）</li></ul><p>示例：</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment">## The safest way:</span>
<span class="token directive"><span class="token keyword">worker_processes</span> auto</span><span class="token punctuation">;</span>

<span class="token comment">## VCPU = 4 , expr $(nproc --all) - 1</span>
<span class="token directive"><span class="token keyword">worker_processes</span> <span class="token number">3</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="最大连接数" tabindex="-1"><a class="header-anchor" href="#最大连接数" aria-hidden="true">#</a> 最大连接数</h3><blockquote><p><code>worker_connections</code> - 单个 Nginx 工作进程允许同时建立的外部连接的数量。数字越大，能同时处理的连接越多。</p></blockquote><p><code>worker_connections</code> 不是随便设置的，而是与两个指标有重要关联：</p><ul><li>内存 <ul><li>每个连接数分别对应一个 read_event、一个 write_event 事件，一个连接数大概占用 232 字节，2 个事件总占用 96 字节，那么一个连接总共占用 328 字节，通过数学公式可以算出 100000 个连接数大概会占用 31M = 100000 * 328 / 1024 / 1024，当然这只是 nginx 启动时，worker_connections 连接数所占用的 nginx。</li></ul></li><li>操作系统级别”进程最大可打开文件数“。 <ul><li>进程最大可打开文件数受限于操作系统，可通过 <code>ulimit -n</code> 命令查询，以前是 1024，现在是 65535。</li><li>nginx 提供了 worker_rlimit_nofile 指令，这是除了 ulimit 的一种设置可用的描述符的方式。 该指令与使用 ulimit 对用户的设置是同样的效果。此指令的值将覆盖 ulimit 的值，如：worker_rlimit_nofile 20960; 设置 ulimits：ulimit -SHn 65535</li></ul></li></ul><h3 id="使用-http-2" tabindex="-1"><a class="header-anchor" href="#使用-http-2" aria-hidden="true">#</a> 使用 HTTP/2</h3><blockquote><p>HTTP / 2 将使我们的应用程序更快，更简单且更可靠。 HTTP / 2 的主要目标是通过启用完整的请求和响应多路复用来减少延迟，通过有效压缩 HTTP 标头字段来最小化协议开销，并增加对请求优先级和服务器推送的支持。</p><p>HTTP / 2 与 HTTP / 1.1 向后兼容，因此有可能完全忽略它，并且一切都会像以前一样继续工作，因为如果不支持 HTTP / 2 的客户端永远不会向服务器请求 HTTP / 2 通讯升级：它们之间的通讯将完全是 HTTP1 / 1。</p><p>请注意，HTTP / 2 在单个 TCP 连接中多路复用许多请求。 通常，当使用 HTTP / 2 时，将与服务器建立单个 TCP 连接。</p><p>您还应该包括 ssl 参数，这是必需的，因为浏览器不支持未经加密的 HTTP / 2。</p><p>HTTP / 2 对旧的和不安全的密码有一个非常大的黑名单，因此您应该避免使用它们。</p></blockquote><p>示例：</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">listen</span> 10.240.20.2:443 ssl http2</span><span class="token punctuation">;</span>

  ...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="维护-ssl-会话" tabindex="-1"><a class="header-anchor" href="#维护-ssl-会话" aria-hidden="true">#</a> 维护 SSL 会话</h3><blockquote><p>客户端每次发出请求时都进行新的 SSL 握手的需求。默认情况下，内置会话缓存并不是最佳选择，因为它只能由一个工作进程使用，并且可能导致内存碎片，最好使用共享缓存。</p><p>使用 <code>ssl_session_cache</code> 时，通过 SSL 保持连接的性能可能会大大提高。10M 的值是一个很好的起点（1MB 共享缓存可以容纳大约 4,000 个会话）。通过共享，所有工作进程之间共享一个缓存（可以在多个虚拟服务器中使用相同名称的缓存）。</p><p>但是，大多数服务器不清除会话或票证密钥，因此增加了服务器受到损害将泄漏先前（和将来）连接中的数据的风险。</p></blockquote><p>示例：</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">ssl_session_cache</span>   shared:NGX_SSL_CACHE:10m</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">ssl_session_timeout</span> <span class="token number">12h</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">ssl_session_tickets</span> <span class="token boolean">off</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">ssl_buffer_size</span>     <span class="token number">1400</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="尽可能在-server-name-指令中使用确切名称" tabindex="-1"><a class="header-anchor" href="#尽可能在-server-name-指令中使用确切名称" aria-hidden="true">#</a> 尽可能在 server_name 指令中使用确切名称</h4><blockquote><p>确切名称，以星号开头的通配符名称和以星号结尾的通配符名称存储在绑定到侦听端口的三个哈希表中。</p><p>首先搜索确切名称哈希表。 如果未找到名称，则搜索具有以星号开头的通配符名称的哈希表。 如果未在此处找到名称，则搜索带有通配符名称以星号结尾的哈希表。 搜索通配符名称哈希表比搜索精确名称哈希表要慢，因为名称是按域部分搜索的。</p><p>正则表达式是按顺序测试的，因此是最慢的方法，并且不可缩放。由于这些原因，最好在可能的地方使用确切的名称。</p></blockquote><p>示例：</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment">## It is more efficient to define them explicitly:</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

    <span class="token directive"><span class="token keyword">listen</span>       192.168.252.10:80</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">server_name</span>  example.org  www.example.org  *.example.org</span><span class="token punctuation">;</span>

    ...

<span class="token punctuation">}</span>

<span class="token comment">## Than to use the simplified form:</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

    <span class="token directive"><span class="token keyword">listen</span>       192.168.252.10:80</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">server_name</span>  .example.org</span><span class="token punctuation">;</span>

    ...

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="避免使用-if-检查-server-name" tabindex="-1"><a class="header-anchor" href="#避免使用-if-检查-server-name" aria-hidden="true">#</a> 避免使用 <code>if</code> 检查 <code>server_name</code></h3><blockquote><p>当 Nginx 收到请求时，无论请求的是哪个子域，无论是 <a href="http://www.example.com" target="_blank" rel="noopener noreferrer">www.example.com<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 还是普通的 <a href="http://example.com" target="_blank" rel="noopener noreferrer">example.com<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，如果始终对 if 指令进行评估。 由于您是在请求 Nginx 检查每个请求的 Host 标头。 效率极低。</p><p>而是使用两个服务器指令，如下面的示例。 这种方法降低了 Nginx 的处理要求。</p></blockquote><p>示例：</p><p>❌ 错误配置</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">server_name</span>                 domain.com www.domain.com</span><span class="token punctuation">;</span>

  <span class="token directive"><span class="token keyword">if</span> (<span class="token variable">$host</span> = www.domain.com)</span> <span class="token punctuation">{</span>

    <span class="token directive"><span class="token keyword">return</span>                    <span class="token number">301</span> https://domain.com<span class="token variable">$request_uri</span></span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

  <span class="token directive"><span class="token keyword">server_name</span>                 domain.com</span><span class="token punctuation">;</span>

  ...

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>⭕ 正确配置</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

    <span class="token directive"><span class="token keyword">server_name</span>               www.domain.com</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">return</span>                    <span class="token number">301</span> <span class="token variable">$scheme</span>://domain.com<span class="token variable">$request_uri</span></span><span class="token punctuation">;</span>

    <span class="token comment">## If you force your web traffic to use HTTPS:</span>
    <span class="token comment">##                         301 https://domain.com$request_uri;</span>

    ...

<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

    <span class="token directive"><span class="token keyword">listen</span>                    192.168.252.10:80</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">server_name</span>               domain.com</span><span class="token punctuation">;</span>

    ...

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="使用-request-uri-来避免使用正则表达式" tabindex="-1"><a class="header-anchor" href="#使用-request-uri-来避免使用正则表达式" aria-hidden="true">#</a> 使用 <code>$request_uri</code> 来避免使用正则表达式</h3><blockquote><p>使用内置变量 <code>$request_uri</code>，我们可以完全避免进行任何捕获或匹配。默认情况下，正则表达式的代价较高，并且会降低性能。</p><p>此规则用于解决将 URL 不变地传递到新主机，确保仅通过现有 URI 进行返回的效率更高。</p></blockquote><p>示例：</p><p>❌ 错误配置</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment">## 1)</span>
<span class="token directive"><span class="token keyword">rewrite</span> ^/(.*)$ https://example.com/<span class="token variable">$1</span> permanent</span><span class="token punctuation">;</span>

<span class="token comment">## 2)</span>
<span class="token directive"><span class="token keyword">rewrite</span> ^ https://example.com<span class="token variable">$request_uri?</span> permanent</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>⭕ 正确配置</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">return</span> <span class="token number">301</span> https://example.com<span class="token variable">$request_uri</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="使用-try-files-指令确认文件是否存在" tabindex="-1"><a class="header-anchor" href="#使用-try-files-指令确认文件是否存在" aria-hidden="true">#</a> 使用 <code>try_files</code> 指令确认文件是否存在</h3><blockquote><p><code>try_files</code> is definitely a very useful thing. You can use <code>try_files</code> directive to check a file exists in a specified order.</p></blockquote><blockquote><p>You should use <code>try_files</code> instead of <code>if</code> directive. It&#39;s definitely better way than using <code>if</code> for this action because <code>if</code> directive is extremely inefficient since it is evaluated every time for every request.</p></blockquote><blockquote><p>The advantage of using <code>try_files</code> is that the behavior switches immediately with one command. I think the code is more readable also.</p></blockquote><blockquote><p><code>try_files</code> allows you:</p><ul><li>to check if the file exists from a predefined list</li><li>to check if the file exists from a specified directory</li><li>to use an internal redirect if none of the files are found</li></ul></blockquote><p>示例：</p><p>❌ 错误配置</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code>
  ...

  <span class="token directive"><span class="token keyword">root</span> /var/www/example.com</span><span class="token punctuation">;</span>

  <span class="token directive"><span class="token keyword">location</span> /images</span> <span class="token punctuation">{</span>

    <span class="token directive"><span class="token keyword">if</span> (-f <span class="token variable">$request_filename</span>)</span> <span class="token punctuation">{</span>

      <span class="token directive"><span class="token keyword">expires</span> <span class="token number">30d</span></span><span class="token punctuation">;</span>
      <span class="token directive"><span class="token keyword">break</span></span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

  ...

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>⭕ 正确配置</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code>
  ...

  <span class="token directive"><span class="token keyword">root</span> /var/www/example.com</span><span class="token punctuation">;</span>

  <span class="token directive"><span class="token keyword">location</span> /images</span> <span class="token punctuation">{</span>

    <span class="token directive"><span class="token keyword">try_files</span> <span class="token variable">$uri</span> =404</span><span class="token punctuation">;</span>

  ...

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="使用-return-代替-rewrite-来做重定向" tabindex="-1"><a class="header-anchor" href="#使用-return-代替-rewrite-来做重定向" aria-hidden="true">#</a> 使用 return 代替 rewrite 来做重定向</h3><blockquote><p>您应该使用服务器块和 return 语句，因为它们比通过位置块评估 RegEx 更简单，更快捷。 该指令停止处理，并将指定的代码返回给客户端。</p></blockquote><p>示例：</p><p>❌ 错误配置</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

  ...

  <span class="token directive"><span class="token keyword">if</span> (<span class="token variable">$host</span> = api.domain.com)</span> <span class="token punctuation">{</span>

    <span class="token directive"><span class="token keyword">rewrite</span>     ^/(.*)$ http://example.com/<span class="token variable">$1</span> permanent</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

  ...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>⭕ 正确配置</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

  ...

  <span class="token directive"><span class="token keyword">if</span> (<span class="token variable">$host</span> = api.domain.com)</span> <span class="token punctuation">{</span>

    <span class="token directive"><span class="token keyword">return</span>      <span class="token number">403</span></span><span class="token punctuation">;</span>

    <span class="token comment">## or other examples:</span>
    <span class="token comment">##   return    301 https://domain.com$request_uri;</span>
    <span class="token comment">##   return    301 $scheme://$host$request_uri;</span>

  <span class="token punctuation">}</span>

  ...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="开启-pcre-jit-来加速正则表达式处理" tabindex="-1"><a class="header-anchor" href="#开启-pcre-jit-来加速正则表达式处理" aria-hidden="true">#</a> 开启 PCRE JIT 来加速正则表达式处理</h3><blockquote><p>允许使用 JIT 的正则表达式来加速他们的处理。</p><p>通过与 PCRE 库编译 Nginx 的，你可以用你的 location 块进行复杂的操作和使用功能强大的 return 和 rewrite。</p><p>PCRE JIT 可以显著加快正则表达式的处理。 Nginx 的与 pcre_jit 比没有更快的幅度。</p><p>如果你试图在使用 pcre_jit;没有可用的 JIT，或者 Nginx 的与现有 JIT，但当前加载 PCRE 库编译不支持 JIT，将配置解析时发出警告。</p><p>当您编译使用 NGNIX 配置 PCRE 库时，才需要--with-PCRE-JIT 时（./configure --with-PCRE =）。当使用系统 PCRE 库 JIT 是否被支持依赖于库是如何被编译。</p><p>从 Nginx 的文档：</p><p>JIT 正在从与--enable-JIT 配置参数内置 8.20 版本开始 PCRE 库提供。当 PCRE 库与 nginx 的内置（--with-PCRE =）时，JIT 支持经由--with-PCRE-JIT 配置参数使能。</p></blockquote><p>示例：</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment">## In global context:</span>
<span class="token directive"><span class="token keyword">pcre_jit</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="进行精确的位置匹配以加快选择过程" tabindex="-1"><a class="header-anchor" href="#进行精确的位置匹配以加快选择过程" aria-hidden="true">#</a> 进行精确的位置匹配以加快选择过程</h4><blockquote><p>精确的位置匹配通常用于通过立即结束算法的执行来加快选择过程。</p></blockquote><p>示例：</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment">## Matches the query / only and stops searching:</span>
<span class="token directive"><span class="token keyword">location</span> = /</span> <span class="token punctuation">{</span>

  ...

<span class="token punctuation">}</span>

<span class="token comment">## Matches the query /v9 only and stops searching:</span>
<span class="token directive"><span class="token keyword">location</span> = /v9</span> <span class="token punctuation">{</span>

  ...

<span class="token punctuation">}</span>

...

<span class="token comment">## Matches any query due to the fact that all queries begin at /,</span>
<span class="token comment">## but regular expressions and any longer conventional blocks will be matched at first place:</span>
<span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>

  ...

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="使用-limit-conn-改善对下载速度的限制" tabindex="-1"><a class="header-anchor" href="#使用-limit-conn-改善对下载速度的限制" aria-hidden="true">#</a> 使用 <code>limit_conn</code> 改善对下载速度的限制</h4><blockquote><p>Nginx provides two directives to limiting download speed:</p><p>Nginx 提供了两个指令来限制下载速度：</p><ul><li><code>limit_rate_after</code> - 设置 limit_rate 指令生效之前传输的数据量</li><li><code>limit_rate</code> - 允许您限制单个客户端连接的传输速率</li></ul></blockquote><blockquote><p>此解决方案限制了每个连接的 Nginx 下载速度，因此，如果一个用户打开多个（例如） 视频文件，则可以下载 <code>X * 连接到视频文件的次数</code> 。</p></blockquote><p>示例：</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment">## Create limit connection zone:</span>
<span class="token directive"><span class="token keyword">limit_conn_zone</span> <span class="token variable">$binary_remote_addr</span> zone=conn_for_remote_addr:1m</span><span class="token punctuation">;</span>

<span class="token comment">## Add rules to limiting the download speed:</span>
<span class="token directive"><span class="token keyword">limit_rate_after</span> <span class="token number">1m</span></span><span class="token punctuation">;</span>  <span class="token comment">## run at maximum speed for the first 1 megabyte</span>
<span class="token directive"><span class="token keyword">limit_rate</span> <span class="token number">250k</span></span><span class="token punctuation">;</span>      <span class="token comment">## and set rate limit after 1 megabyte</span>

<span class="token comment">## Enable queue:</span>
<span class="token directive"><span class="token keyword">location</span> /videos</span> <span class="token punctuation">{</span>

  <span class="token comment">## Max amount of data by one client: 10 megabytes (limit_rate_after * 10)</span>
  <span class="token directive"><span class="token keyword">limit_conn</span> conn_for_remote_addr <span class="token number">10</span></span><span class="token punctuation">;</span>

  ...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="hardening" tabindex="-1"><a class="header-anchor" href="#hardening" aria-hidden="true">#</a> Hardening</h2><ul><li><strong><a href="https://github.com/trimstray/nginx-admins-handbook#toc-hardening-2" target="_blank" rel="noopener noreferrer">⬆ Hardening<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></strong><ul><li><a href="#beginner-always-keep-nginx-up-to-date">Always keep Nginx up-to-date</a></li><li><a href="#beginner-run-as-an-unprivileged-user">Run as an unprivileged user</a></li><li><a href="#beginner-disable-unnecessary-modules">Disable unnecessary modules</a></li><li><a href="#beginner-protect-sensitive-resources">Protect sensitive resources</a></li><li><a href="#beginner-hide-nginx-version-number">Hide Nginx version number</a></li><li><a href="#beginner-hide-nginx-server-signature">Hide Nginx server signature</a></li><li><a href="#beginner-hide-upstream-proxy-headers">Hide upstream proxy headers</a></li><li><a href="#beginner-force-all-connections-over-tls">Force all connections over TLS</a></li><li><a href="#beginner-use-only-the-latest-supported-openssl-version">Use only the latest supported OpenSSL version</a></li><li><a href="#beginner-use-min-2048-bit-private-keys">Use min. 2048-bit private keys</a></li><li><a href="#beginner-keep-only-tls-13-and-tls-12">Keep only TLS 1.3 and TLS 1.2</a></li><li><a href="#beginner-use-only-strong-ciphers">Use only strong ciphers</a></li><li><a href="#beginner-use-more-secure-ecdh-curve">Use more secure ECDH Curve</a></li><li><a href="#beginner-use-strong-key-exchange-with-perfect-forward-secrecy">Use strong Key Exchange with Perfect Forward Secrecy</a></li><li><a href="#beginner-prevent-replay-attacks-on-zero-round-trip-time">Prevent Replay Attacks on Zero Round-Trip Time</a></li><li><a href="#beginner-defend-against-the-beast-attack">Defend against the BEAST attack</a></li><li><a href="#beginner-mitigation-of-crimebreach-attacks">Mitigation of CRIME/BREACH attacks</a></li><li><a href="#beginner-http-strict-transport-security">HTTP Strict Transport Security</a></li><li><a href="#beginner-reduce-xss-risks-content-security-policy">Reduce XSS risks (Content-Security-Policy)</a></li><li><a href="#beginner-control-the-behaviour-of-the-referer-header-referrer-policy">Control the behaviour of the Referer header (Referrer-Policy)</a></li><li><a href="#beginner-provide-clickjacking-protection-x-frame-options">Provide clickjacking protection (X-Frame-Options)</a></li><li><a href="#beginner-prevent-some-categories-of-xss-attacks-x-xss-protection">Prevent some categories of XSS attacks (X-XSS-Protection)</a></li><li><a href="#beginner-prevent-sniff-mimetype-middleware-x-content-type-options">Prevent Sniff Mimetype middleware (X-Content-Type-Options)</a></li><li><a href="#beginner-deny-the-use-of-browser-features-feature-policy">Deny the use of browser features (Feature-Policy)</a></li><li><a href="#beginner-reject-unsafe-http-methods">Reject unsafe HTTP methods</a></li><li><a href="#beginner-prevent-caching-of-sensitive-data">Prevent caching of sensitive data</a></li><li><a href="#beginner-control-buffer-overflow-attacks">Control Buffer Overflow attacks</a></li><li><a href="#beginner-mitigating-slow-http-dos-attacks-closing-slow-connections">Mitigating Slow HTTP DoS attacks (Closing Slow Connections)</a></li></ul></li></ul><p>In this chapter I will talk about some of the Nginx hardening approaches and security standards.</p><h3 id="always-keep-nginx-up-to-date" tabindex="-1"><a class="header-anchor" href="#always-keep-nginx-up-to-date" aria-hidden="true">#</a> 🔰 Always keep Nginx up-to-date</h3><h4 id="rationale" tabindex="-1"><a class="header-anchor" href="#rationale" aria-hidden="true">#</a> Rationale</h4><blockquote><p>Nginx is a very secure and stable but vulnerabilities in the main binary itself do pop up from time to time. It&#39;s the main reason for keep Nginx up-to-date as hard as you can.</p></blockquote><blockquote><p>A very safe way to plan the update is once a new stable version is released but for me the most common way to handle Nginx updates is to wait a few weeks after the stable release.</p></blockquote><blockquote><p>Before update/upgrade Nginx remember about do it on the testing environment.</p></blockquote><blockquote><p>Most modern GNU/Linux distros will not push the latest version of Nginx into their default package lists so maybe you should consider install it from sources.</p></blockquote><h4 id="external-resources" tabindex="-1"><a class="header-anchor" href="#external-resources" aria-hidden="true">#</a> External resources</h4><ul><li><a href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/HELPERS.html#installing-from-prebuilt-packages" class="">Installing from prebuilt packages (from this handbook)</a></li><li><a href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/HELPERS.html#installing-from-source" class="">Installing from source (from this handbook)</a></li></ul><h3 id="run-as-an-unprivileged-user" tabindex="-1"><a class="header-anchor" href="#run-as-an-unprivileged-user" aria-hidden="true">#</a> 🔰 Run as an unprivileged user</h3><h4 id="rationale-1" tabindex="-1"><a class="header-anchor" href="#rationale-1" aria-hidden="true">#</a> Rationale</h4><blockquote><p>There is no real difference in security just by changing the process owner name. On the other hand in security, the principle of least privilege states that an entity should be given no more permission than necessary to accomplish its goals within a given system. This way only master process runs as root.</p></blockquote><blockquote><p>This is the default Nginx behaviour, but remember to check it.</p></blockquote><h4 id="example" tabindex="-1"><a class="header-anchor" href="#example" aria-hidden="true">#</a> Example</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">## Edit nginx.conf:</span>
user nginx<span class="token punctuation">;</span>

<span class="token comment">## Set owner and group for root (app, default) directory:</span>
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /var/www/domain.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="external-resources-1" tabindex="-1"><a class="header-anchor" href="#external-resources-1" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://unix.stackexchange.com/questions/134301/why-does-nginx-starts-process-as-root" target="_blank" rel="noopener noreferrer">Why does nginx starts process as root?<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="disable-unnecessary-modules" tabindex="-1"><a class="header-anchor" href="#disable-unnecessary-modules" aria-hidden="true">#</a> 🔰 Disable unnecessary modules</h3><h4 id="rationale-2" tabindex="-1"><a class="header-anchor" href="#rationale-2" aria-hidden="true">#</a> Rationale</h4><blockquote><p>It is recommended to disable any modules which are not required as this will minimise the risk of any potential attacks by limiting the operations allowed by the web server.</p></blockquote><blockquote><p>The best way to unload unused modules is use the <code>configure</code> option during installation. If you have static linking a shared module you should re-compile Nginx.</p></blockquote><blockquote><p>Use only high quality modules and remember about that:</p><p><em>Unfortunately, many third‑party modules use blocking calls, and users (and sometimes even the developers of the modules) aren’t aware of the drawbacks. Blocking operations can ruin Nginx performance and must be avoided at all costs.</em></p></blockquote><h4 id="example-1" tabindex="-1"><a class="header-anchor" href="#example-1" aria-hidden="true">#</a> Example</h4><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment">## 1) During installation:</span>
./configure --without-http_autoindex_module

<span class="token comment">## 2) Comment modules in the configuration file e.g. modules.conf:</span>
<span class="token comment">## load_module                 /usr/share/nginx/modules/ndk_http_module.so;</span>
<span class="token comment">## load_module                 /usr/share/nginx/modules/ngx_http_auth_pam_module.so;</span>
<span class="token comment">## load_module                 /usr/share/nginx/modules/ngx_http_cache_purge_module.so;</span>
<span class="token comment">## load_module                 /usr/share/nginx/modules/ngx_http_dav_ext_module.so;</span>
<span class="token directive"><span class="token keyword">load_module</span>                   /usr/share/nginx/modules/ngx_http_echo_module.so</span><span class="token punctuation">;</span>
<span class="token comment">## load_module                 /usr/share/nginx/modules/ngx_http_fancyindex_module.so;</span>
<span class="token directive"><span class="token keyword">load_module</span>                   /usr/share/nginx/modules/ngx_http_geoip_module.so</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">load_module</span>                   /usr/share/nginx/modules/ngx_http_headers_more_filter_module.so</span><span class="token punctuation">;</span>
<span class="token comment">## load_module                 /usr/share/nginx/modules/ngx_http_image_filter_module.so;</span>
<span class="token comment">## load_module                 /usr/share/nginx/modules/ngx_http_lua_module.so;</span>
<span class="token directive"><span class="token keyword">load_module</span>                   /usr/share/nginx/modules/ngx_http_perl_module.so</span><span class="token punctuation">;</span>
<span class="token comment">## load_module                 /usr/share/nginx/modules/ngx_mail_module.so;</span>
<span class="token comment">## load_module                 /usr/share/nginx/modules/ngx_nchan_module.so;</span>
<span class="token comment">## load_module                 /usr/share/nginx/modules/ngx_stream_module.so;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="external-resources-2" tabindex="-1"><a class="header-anchor" href="#external-resources-2" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://github.com/nginx-modules" target="_blank" rel="noopener noreferrer">nginx-modules<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="protect-sensitive-resources" tabindex="-1"><a class="header-anchor" href="#protect-sensitive-resources" aria-hidden="true">#</a> 🔰 Protect sensitive resources</h3><h4 id="rationale-3" tabindex="-1"><a class="header-anchor" href="#rationale-3" aria-hidden="true">#</a> Rationale</h4><blockquote><p>Hidden directories and files should never be web accessible - sometimes critical data are published during application deploy. If you use control version system you should defninitely drop the access to the critical hidden directories like a <code>.git</code> or <code>.svn</code> to prevent expose source code of your application.</p></blockquote><blockquote><p>Sensitive resources contains items that abusers can use to fully recreate the source code used by the site and look for bugs, vulnerabilities, and exposed passwords.</p></blockquote><h4 id="example-2" tabindex="-1"><a class="header-anchor" href="#example-2" aria-hidden="true">#</a> Example</h4><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">if</span> (<span class="token variable">$request_uri</span> ~ <span class="token string">&quot;/\.git&quot;</span>)</span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">return</span> <span class="token number">403</span></span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token comment">## or</span>
<span class="token directive"><span class="token keyword">location</span> ~ /\.git</span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">deny</span> all</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token comment">## or</span>
<span class="token directive"><span class="token keyword">location</span> ~* ^.*(\.(?:git|svn|htaccess))$</span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">return</span> <span class="token number">403</span></span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token comment">## or all . directories/files excepted .well-known</span>
<span class="token directive"><span class="token keyword">location</span> ~ /\.(?!well-known\/)</span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">deny</span> all</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="external-resources-3" tabindex="-1"><a class="header-anchor" href="#external-resources-3" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://github.com/bl4de/research/tree/master/hidden_directories_leaks" target="_blank" rel="noopener noreferrer">Hidden directories and files as a source of sensitive information about web application<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="hide-nginx-version-number" tabindex="-1"><a class="header-anchor" href="#hide-nginx-version-number" aria-hidden="true">#</a> 🔰 Hide Nginx version number</h3><h4 id="rationale-4" tabindex="-1"><a class="header-anchor" href="#rationale-4" aria-hidden="true">#</a> Rationale</h4><blockquote><p>Disclosing the version of Nginx running can be undesirable, particularly in environments sensitive to information disclosure.</p></blockquote><p>But the &quot;Official Apache Documentation (Apache Core Features)&quot; (yep, it&#39;s not a joke...) say:</p><blockquote><p><em>Setting ServerTokens to less than minimal is not recommended because it makes it more difficult to debug interoperational problems. Also note that disabling the Server: header does nothing at all to make your server more secure. The idea of &quot;security through obscurity&quot; is a myth and leads to a false sense of safety.</em></p></blockquote><h4 id="example-3" tabindex="-1"><a class="header-anchor" href="#example-3" aria-hidden="true">#</a> Example</h4><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server_tokens</span> <span class="token boolean">off</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="external-resources-4" tabindex="-1"><a class="header-anchor" href="#external-resources-4" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://geekflare.com/remove-server-header-banner-nginx/" target="_blank" rel="noopener noreferrer">Remove Version from Server Header Banner in nginx<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.tunetheweb.com/security/http-security-headers/server-header/" target="_blank" rel="noopener noreferrer">Reduce or remove server headers<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="hide-nginx-server-signature" tabindex="-1"><a class="header-anchor" href="#hide-nginx-server-signature" aria-hidden="true">#</a> 🔰 Hide Nginx server signature</h3><h4 id="rationale-5" tabindex="-1"><a class="header-anchor" href="#rationale-5" aria-hidden="true">#</a> Rationale</h4><blockquote><p>One of the easiest first steps to undertake, is to prevent the web server from showing its used software via the server header. Certainly, there are several reasons why you would like to change the server header. It could be security, it could be redundant systems, load balancers etc.</p></blockquote><blockquote><p>In my opinion there is no real reason or need to show this much information about your server. It is easy to look up particular vulnerabilities once you know the version number.</p></blockquote><blockquote><p>You should compile Nginx from sources with <code>ngx_headers_more</code> to used <code>more_set_headers</code> directive or use a <a href="https://gitlab.com/buik/nginx/blob/master/nginx-remove-server-header.patch" target="_blank" rel="noopener noreferrer">nginx-remove-server-header.patch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p></blockquote><h4 id="example-4" tabindex="-1"><a class="header-anchor" href="#example-4" aria-hidden="true">#</a> Example</h4><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">more_set_headers</span> <span class="token string">&quot;Server: Unknown&quot;</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="external-resources-5" tabindex="-1"><a class="header-anchor" href="#external-resources-5" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://www.troyhunt.com/shhh-dont-let-your-response-headers/" target="_blank" rel="noopener noreferrer">Shhh... don’t let your response headers talk too loudly<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://stackoverflow.com/questions/24594971/how-to-changehide-the-nginx-server-signature" target="_blank" rel="noopener noreferrer">How to change (hide) the Nginx Server Signature?<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="hide-upstream-proxy-headers" tabindex="-1"><a class="header-anchor" href="#hide-upstream-proxy-headers" aria-hidden="true">#</a> 🔰 Hide upstream proxy headers</h3><h4 id="rationale-6" tabindex="-1"><a class="header-anchor" href="#rationale-6" aria-hidden="true">#</a> Rationale</h4><blockquote><p>Securing a server goes far beyond not showing what&#39;s running but I think less is more is better.</p></blockquote><blockquote><p>When Nginx is used to proxy requests to an upstream server (such as a PHP-FPM instance), it can be beneficial to hide certain headers sent in the upstream response (e.g. the version of PHP running).</p></blockquote><h4 id="example-5" tabindex="-1"><a class="header-anchor" href="#example-5" aria-hidden="true">#</a> Example</h4><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">proxy_hide_header</span> X-Powered-By</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">proxy_hide_header</span> X-AspNetMvc-Version</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">proxy_hide_header</span> X-AspNet-Version</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">proxy_hide_header</span> X-Drupal-Cache</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="external-resources-6" tabindex="-1"><a class="header-anchor" href="#external-resources-6" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://veggiespam.com/headers/" target="_blank" rel="noopener noreferrer">Remove insecure http headers<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="force-all-connections-over-tls" tabindex="-1"><a class="header-anchor" href="#force-all-connections-over-tls" aria-hidden="true">#</a> 🔰 Force all connections over TLS</h3><h4 id="rationale-7" tabindex="-1"><a class="header-anchor" href="#rationale-7" aria-hidden="true">#</a> Rationale</h4><blockquote><p>TLS provides two main services. For one, it validates the identity of the server that the user is connecting to for the user. It also protects the transmission of sensitive information from the user to the server.</p></blockquote><blockquote><p>In my opinion you should always use HTTPS instead of HTTP to protect your website, even if it doesn’t handle sensitive communications. The application can have many sensitive places that should be protected.</p></blockquote><blockquote><p>Always put login page, registration forms, all subsequent authenticated pages, contact forms, and payment details forms in HTTPS to prevent injection and sniffing. Them must be accessed only over TLS to ensure your traffic is secure.</p></blockquote><blockquote><p>If page is available over TLS, it must be composed completely of content which is transmitted over TLS. Requesting subresources using the insecure HTTP protocol weakens the security of the entire page and HTTPS protocol. Modern browsers should blocked or report all active mixed content delivered via HTTP on pages by default.</p></blockquote><blockquote><p>Also remember to implement the <a href="#beginner-http-strict-transport-security">HTTP Strict Transport Security (HSTS)</a>.</p></blockquote><blockquote><p>We have currently the first free and open CA - <a href="https://letsencrypt.org/" target="_blank" rel="noopener noreferrer">Let&#39;s Encrypt<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> - so generating and implementing certificates has never been so easy. It was created to provide free and easy-to-use TLS and SSL certificates.</p></blockquote><h4 id="example-6" tabindex="-1"><a class="header-anchor" href="#example-6" aria-hidden="true">#</a> Example</h4><ul><li><p>force all traffic to use TLS:</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">listen</span> 10.240.20.2:80</span><span class="token punctuation">;</span>

  <span class="token directive"><span class="token keyword">server_name</span> domain.com</span><span class="token punctuation">;</span>

  <span class="token directive"><span class="token keyword">return</span> <span class="token number">301</span> https://<span class="token variable">$host</span><span class="token variable">$request_uri</span></span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">listen</span> 10.240.20.2:443 ssl</span><span class="token punctuation">;</span>

  <span class="token directive"><span class="token keyword">server_name</span> domain.com</span><span class="token punctuation">;</span>

  ...

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>force e.g. login page to use TLS:</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">listen</span> 10.240.20.2:80</span><span class="token punctuation">;</span>

  <span class="token directive"><span class="token keyword">server_name</span> domain.com</span><span class="token punctuation">;</span>

  ...

  <span class="token directive"><span class="token keyword">location</span> ^~ /login</span> <span class="token punctuation">{</span>

    <span class="token directive"><span class="token keyword">return</span> <span class="token number">301</span> https://domain.com<span class="token variable">$request_uri</span></span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="external-resources-7" tabindex="-1"><a class="header-anchor" href="#external-resources-7" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://security.stackexchange.com/questions/23646/should-we-force-user-to-https-on-website" target="_blank" rel="noopener noreferrer">Should we force user to HTTPS on website?<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://security.stackexchange.com/questions/137542/force-a-user-to-https" target="_blank" rel="noopener noreferrer">Force a user to HTTPS<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://letsencrypt.org/docs/" target="_blank" rel="noopener noreferrer">Let&#39;s Encrypt Documentation<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="use-only-the-latest-supported-openssl-version" tabindex="-1"><a class="header-anchor" href="#use-only-the-latest-supported-openssl-version" aria-hidden="true">#</a> 🔰 Use only the latest supported OpenSSL version</h3><h4 id="rationale-8" tabindex="-1"><a class="header-anchor" href="#rationale-8" aria-hidden="true">#</a> Rationale</h4><blockquote><p>Before start see <a href="https://www.openssl.org/policies/releasestrat.html" target="_blank" rel="noopener noreferrer">Release Strategy Policies<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> and <a href="https://www.openssl.org/news/changelog.html" target="_blank" rel="noopener noreferrer">Changelog<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> on the OpenSSL website.</p></blockquote><blockquote><p>Criteria for choosing OpenSSL version can vary and it depends all on your use.</p></blockquote><blockquote><p>The latest versions of the major OpenSSL library are (may be changed):</p><ul><li>the next version of OpenSSL will be 3.0.0</li><li>version 1.1.1 will be supported until 2023-09-11 (LTS) <ul><li>last minor version: 1.1.1c (May 23, 2019)</li></ul></li><li>version 1.1.0 will be supported until 2019-09-11 <ul><li>last minor version: 1.1.0k (May 28, 2018)</li></ul></li><li>version 1.0.2 will be supported until 2019-12-31 (LTS) <ul><li>last minor version: 1.0.2s (May 28, 2018)</li></ul></li><li>any other versions are no longer supported</li></ul></blockquote><blockquote><p>In my opinion the only safe way is based on the up-to-date and still supported version of the OpenSSL. And what&#39;s more, I recommend to hang on to the latest versions (e.g. 1.1.1).</p></blockquote><blockquote><p>If your system repositories do not have the newest OpenSSL, you can do the <a href="https://github.com/trimstray/nginx-admins-handbook#installing-from-source" target="_blank" rel="noopener noreferrer">compilation<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> process (see OpenSSL sub-section).</p></blockquote><h4 id="external-resources-8" tabindex="-1"><a class="header-anchor" href="#external-resources-8" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://www.openssl.org/" target="_blank" rel="noopener noreferrer">OpenSSL Official Website<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.openssl.org/blog/" target="_blank" rel="noopener noreferrer">OpenSSL Official Blog<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.openssl.org/news/newslog.html" target="_blank" rel="noopener noreferrer">OpenSSL Official Newslog<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="use-min-2048-bit-private-keys" tabindex="-1"><a class="header-anchor" href="#use-min-2048-bit-private-keys" aria-hidden="true">#</a> 🔰 Use min. 2048-bit private keys</h3><h4 id="rationale-9" tabindex="-1"><a class="header-anchor" href="#rationale-9" aria-hidden="true">#</a> Rationale</h4><blockquote><p>Advisories recommend 2048 for now. Security experts are projecting that 2048 bits will be sufficient for commercial use until around the year 2030 (as per NIST).</p></blockquote><blockquote><p>The latest version of FIPS-186 also say the U.S. Federal Government generate (and use) digital signatures with 1024, 2048, or 3072 bit key lengths.</p></blockquote><blockquote><p>Generally there is no compelling reason to choose 4096 bit keys over 2048 provided you use sane expiration intervals.</p></blockquote><blockquote><p>If you want to get <strong>A+ with 100%s on SSL Lab</strong> (for Key Exchange) you should definitely use 4096 bit private keys. That&#39;s the main reason why you should use them.</p></blockquote><blockquote><p>Longer keys take more time to generate and require more CPU and power when used for encrypting and decrypting, also the SSL handshake at the start of each connection will be slower. It also has a small impact on the client side (e.g. browsers).</p></blockquote><blockquote><p>You can test above on your server with <code>openssl speed rsa</code> but remember: in OpenSSL speed tests you see difference on block cipher speed, while in real life most cpu time is spent on asymmetric algorithms during ssl handshake. On the other hand, modern processors are capable of executing at least 1k of RSA 1024-bit signs per second on a single core, so this isn&#39;t usually an issue.</p></blockquote><blockquote><p>Use of alternative solution: <a href="https://en.wikipedia.org/wiki/Elliptic-curve_cryptography" target="_blank" rel="noopener noreferrer">ECC Certificate Signing Request (CSR)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> - <code>ECDSA</code> certificates contain an <code>ECC</code> public key. <code>ECC</code> keys are better than <code>RSA &amp; DSA</code> keys in that the <code>ECC</code> algorithm is harder to break.</p></blockquote><p>The &quot;SSL/TLS Deployment Best Practices&quot; book say:</p><blockquote><p><em>The cryptographic handshake, which is used to establish secure connections, is an operation whose cost is highly influenced by private key size. Using a key that is too short is insecure, but using a key that is too long will result in &quot;too much&quot; security and slow operation. For most web sites, using RSA keys stronger than 2048 bits and ECDSA keys stronger than 256 bits is a waste of CPU power and might impair user experience. Similarly, there is little benefit to increasing the strength of the ephemeral key exchange beyond 2048 bits for DHE and 256 bits for ECDHE.</em></p></blockquote><p>Konstantin Ryabitsev (Reddit):</p><blockquote><p><em>Generally speaking, if we ever find ourselves in a world where 2048-bit keys are no longer good enough, it won&#39;t be because of improvements in brute-force capabilities of current computers, but because RSA will be made obsolete as a technology due to revolutionary computing advances. If that ever happens, 3072 or 4096 bits won&#39;t make much of a difference anyway. This is why anything above 2048 bits is generally regarded as a sort of feel-good hedging theatre.</em></p></blockquote><p><strong>My recommendation:</strong></p><blockquote><p>Use 2048-bit key instead of 4096-bit at this moment.</p></blockquote><h4 id="example-7" tabindex="-1"><a class="header-anchor" href="#example-7" aria-hidden="true">#</a> Example</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">### Example (RSA):</span>
<span class="token punctuation">(</span> <span class="token assign-left variable">_fd</span><span class="token operator">=</span><span class="token string">&quot;domain.com.key&quot;</span> <span class="token punctuation">;</span> <span class="token assign-left variable">_len</span><span class="token operator">=</span><span class="token string">&quot;2048&quot;</span> <span class="token punctuation">;</span> openssl genrsa <span class="token parameter variable">-out</span> <span class="token variable">${_fd}</span> <span class="token variable">${_len}</span> <span class="token punctuation">)</span>

<span class="token comment">## Let&#39;s Encrypt:</span>
certbot certonly <span class="token parameter variable">-d</span> domain.com <span class="token parameter variable">-d</span> www.domain.com --rsa-key-size <span class="token number">2048</span>

<span class="token comment">### Example (ECC):</span>
<span class="token comment">## _curve: prime256v1, secp521r1, secp384r1</span>
<span class="token punctuation">(</span> <span class="token assign-left variable">_fd</span><span class="token operator">=</span><span class="token string">&quot;domain.com.key&quot;</span> <span class="token punctuation">;</span> <span class="token assign-left variable">_fd_csr</span><span class="token operator">=</span><span class="token string">&quot;domain.com.csr&quot;</span> <span class="token punctuation">;</span> <span class="token assign-left variable">_curve</span><span class="token operator">=</span><span class="token string">&quot;prime256v1&quot;</span> <span class="token punctuation">;</span> <span class="token punctuation">\</span>
openssl ecparam <span class="token parameter variable">-out</span> <span class="token variable">${_fd}</span> <span class="token parameter variable">-name</span> <span class="token variable">${_curve}</span> <span class="token parameter variable">-genkey</span> <span class="token punctuation">;</span> <span class="token punctuation">\</span>
openssl req <span class="token parameter variable">-new</span> <span class="token parameter variable">-key</span> <span class="token variable">${_fd}</span> <span class="token parameter variable">-out</span> <span class="token variable">${_fd_csr}</span> <span class="token parameter variable">-sha256</span> <span class="token punctuation">)</span>

<span class="token comment">## Let&#39;s Encrypt (from above):</span>
certbot <span class="token parameter variable">--csr</span> <span class="token variable">${_fd_csr}</span> -<span class="token punctuation">[</span>other-args<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>For <code>x25519</code>:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">(</span> <span class="token assign-left variable">_fd</span><span class="token operator">=</span><span class="token string">&quot;private.key&quot;</span> <span class="token punctuation">;</span> <span class="token assign-left variable">_curve</span><span class="token operator">=</span><span class="token string">&quot;x25519&quot;</span> <span class="token punctuation">;</span> <span class="token punctuation">\</span>
openssl genpkey <span class="token parameter variable">-algorithm</span> <span class="token variable">${_curve}</span> <span class="token parameter variable">-out</span> <span class="token variable">${_fd}</span> <span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>  ➡️ ssllabs score: <b>100%</b></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">(</span> <span class="token assign-left variable">_fd</span><span class="token operator">=</span><span class="token string">&quot;domain.com.key&quot;</span> <span class="token punctuation">;</span> <span class="token assign-left variable">_len</span><span class="token operator">=</span><span class="token string">&quot;2048&quot;</span> <span class="token punctuation">;</span> openssl genrsa <span class="token parameter variable">-out</span> <span class="token variable">${_fd}</span> <span class="token variable">${_len}</span> <span class="token punctuation">)</span>

<span class="token comment">## Let&#39;s Encrypt:</span>
certbot certonly <span class="token parameter variable">-d</span> domain.com <span class="token parameter variable">-d</span> www.domain.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>  ➡️ ssllabs score: <b>90%</b></p><h4 id="external-resources-9" tabindex="-1"><a class="header-anchor" href="#external-resources-9" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://csrc.nist.gov/Projects/Key-Management/Key-Management-Guidelines" target="_blank" rel="noopener noreferrer">Key Management Guidelines by NIST<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://csrc.nist.gov/publications/detail/sp/800-131a/archive/2011-01-13" target="_blank" rel="noopener noreferrer">Recommendation for Transitioning the Use of Cryptographic Algorithms and Key Lengths<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="http://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.186-4.pdf" target="_blank" rel="noopener noreferrer">FIPS PUB 186-4 - Digital Signature Standard (DSS)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> <sup>[pdf]</sup></li><li><a href="https://www.keylength.com/" target="_blank" rel="noopener noreferrer">Cryptographic Key Length Recommendations<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://certsimple.com/blog/measuring-ssl-rsa-keys" target="_blank" rel="noopener noreferrer">So you&#39;re making an RSA key for an HTTPS certificate. What key size do you use?<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://danielpocock.com/rsa-key-sizes-2048-or-4096-bits/" target="_blank" rel="noopener noreferrer">RSA Key Sizes: 2048 or 4096 bits?<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://msol.io/blog/tech/create-a-self-signed-ecc-certificate/" target="_blank" rel="noopener noreferrer">Create a self-signed ECC certificate<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="keep-only-tls-1-3-and-tls-1-2" tabindex="-1"><a class="header-anchor" href="#keep-only-tls-1-3-and-tls-1-2" aria-hidden="true">#</a> 🔰 Keep only TLS 1.3 and TLS 1.2</h3><h4 id="rationale-10" tabindex="-1"><a class="header-anchor" href="#rationale-10" aria-hidden="true">#</a> Rationale</h4><blockquote><p>It is recommended to run TLS 1.2/1.3 and fully disable SSLv2, SSLv3, TLS 1.0 and TLS 1.1 that have protocol weaknesses and uses older cipher suites (do not provide any modern ciper modes).</p></blockquote><blockquote><p>TLS 1.0 and TLS 1.1 must not be used (see <a href="https://tools.ietf.org/id/draft-moriarty-tls-oldversions-diediedie-00.html" target="_blank" rel="noopener noreferrer">Deprecating TLSv1.0 and TLSv1.1<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>) and were superceded by TLS 1.2, which has now itself been superceded by TLS 1.3. They are also actively being deprecated in accordance with guidance from government agencies (e.g. NIST SP 80052r2) and industry consortia such as the Payment Card Industry Association (PCI) [PCI-TLS1].</p></blockquote><blockquote><p>TLS 1.2 and TLS 1.3 are both without security issues. Only these versions provides modern cryptographic algorithms. TLS 1.3 is a new TLS version that will power a faster and more secure web for the next few years. What&#39;s more, TLS 1.3 comes without a ton of stuff (was removed): renegotiation, compression, and many legacy algorithms: <code>DSA</code>, <code>RC4</code>, <code>SHA1</code>, <code>MD5</code>, <code>CBC</code> MAC-then-Encrypt ciphers. TLS 1.0 and TLS 1.1 protocols will be removed from browsers at the beginning of 2020.</p></blockquote><blockquote><p>TLS 1.2 does require careful configuration to ensure obsolete cipher suites with identified vulnerabilities are not used in conjunction with it. TLS 1.3 removes the need to make these decisions. TLS 1.3 version also improves TLS 1.2 security, privace and performance issues.</p></blockquote><blockquote><p>Before enabling specific protocol version, you should check which ciphers are supported by the protocol. So if you turn on TLS 1.2 and TLS 1.3 both remember about <a href="#beginner-use-only-strong-ciphers">the correct (and strong)</a> ciphers to handle them. Otherwise, they will not be anyway works without supported ciphers (no TLS handshake will succeed).</p></blockquote><blockquote><p>I think the best way to deploy secure configuration is: enable TLS 1.2 without any <code>CBC</code> Ciphers (is safe enough) only TLS 1.3 is safer because of its handling improvement and the exclusion of everything that went obsolete since TLS 1.2 came up.</p></blockquote><blockquote><p>If you told Nginx to use TLS 1.3, it will use TLS 1.3 only where is available. Nginx supports TLS 1.3 since version 1.13.0 (released in April 2017), when built against OpenSSL 1.1.1 or more.</p></blockquote><blockquote><p>For TLS 1.3, think about using <a href="#beginner-prevent-replay-attacks-on-zero-round-trip-time"><code>ssl_early_data</code></a> to allow TLS 1.3 0-RTT handshakes.</p></blockquote><p><strong>My recommendation:</strong></p><blockquote><p>Use only <a href="#keep-only-tls1.2-tls13">TLSv1.3 and TLSv1.2</a>.</p></blockquote><h4 id="example-8" tabindex="-1"><a class="header-anchor" href="#example-8" aria-hidden="true">#</a> Example</h4><p>TLS 1.3 + 1.2:</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">ssl_protocols</span> TLSv1.3 TLSv1.2</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>TLS 1.2:</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">ssl_protocols</span> TLSv1.2</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>  ➡️ ssllabs score: <b>100%</b></p><p>TLS 1.3 + 1.2 + 1.1:</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">ssl_protocols</span> TLSv1.3 TLSv1.2 TLSv1.1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>TLS 1.2 + 1.1:</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">ssl_protocols</span> TLSv1.2 TLSv1.1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>  ➡️ ssllabs score: <b>95%</b></p><h4 id="external-resources-10" tabindex="-1"><a class="header-anchor" href="#external-resources-10" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://www.ietf.org/rfc/rfc5246.txt" target="_blank" rel="noopener noreferrer">The Transport Layer Security (TLS) Protocol Version 1.2<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://tools.ietf.org/html/draft-ietf-tls-tls13-18" target="_blank" rel="noopener noreferrer">The Transport Layer Security (TLS) Protocol Version 1.3<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://tls12.ulfheim.net/" target="_blank" rel="noopener noreferrer">TLS1.2 - Every byte explained and reproduced<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://tls13.ulfheim.net/" target="_blank" rel="noopener noreferrer">TLS1.3 - Every byte explained and reproduced<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://wiki.openssl.org/index.php/TLS1.3" target="_blank" rel="noopener noreferrer">TLS1.3 - OpenSSLWiki<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://medium.com/@ethicalevil/tls-handshake-protocol-overview-a39e8eee2cf5" target="_blank" rel="noopener noreferrer">TLS v1.2 handshake overview<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://kinsta.com/blog/tls-1-3/" target="_blank" rel="noopener noreferrer">An Overview of TLS 1.3 - Faster and More Secure<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://blog.cloudflare.com/rfc-8446-aka-tls-1-3/" target="_blank" rel="noopener noreferrer">A Detailed Look at RFC 8446 (a.k.a. TLS 1.3)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.wolfssl.com/differences-between-tls-1-2-and-tls-1-3/" target="_blank" rel="noopener noreferrer">Differences between TLS 1.2 and TLS 1.3<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://assured.se/2018/08/29/tls-1-3-in-a-nut-shell/" target="_blank" rel="noopener noreferrer">TLS 1.3 in a nutshell<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.ssl.com/article/tls-1-3-is-here-to-stay/" target="_blank" rel="noopener noreferrer">TLS 1.3 is here to stay<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://ma.ttias.be/enable-tls-1-3-nginx/" target="_blank" rel="noopener noreferrer">How to enable TLS 1.3 on Nginx<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://blog.probely.com/how-to-deploy-modern-tls-in-2018-1b9a9cafc454" target="_blank" rel="noopener noreferrer">How to deploy modern TLS in 2019?<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://media.ccc.de/v/33c3-8348-deploying_tls_1_3_the_great_the_good_and_the_bad" target="_blank" rel="noopener noreferrer">Deploying TLS 1.3: the great, the good and the bad<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.nccgroup.trust/us/about-us/newsroom-and-events/blog/2019/february/downgrade-attack-on-tls-1.3-and-vulnerabilities-in-major-tls-libraries/" target="_blank" rel="noopener noreferrer">Downgrade Attack on TLS 1.3 and Vulnerabilities in Major TLS Libraries<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.fastly.com/blog/phase-two-our-tls-10-and-11-deprecation-plan" target="_blank" rel="noopener noreferrer">Phase two of our TLS 1.0 and 1.1 deprecation plan<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.keycdn.com/blog/deprecating-tls-1-0-and-1-1" target="_blank" rel="noopener noreferrer">Deprecating TLS 1.0 and 1.1 - Enhancing Security for Everyone<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.acunetix.com/blog/articles/tls-vulnerabilities-attacks-final-part/" target="_blank" rel="noopener noreferrer">TLS/SSL Explained – Examples of a TLS Vulnerability and Attack, Final Part<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://security.googleblog.com/2014/10/this-poodle-bites-exploiting-ssl-30.html" target="_blank" rel="noopener noreferrer">This POODLE bites: exploiting the SSL 3.0 fallback<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://blog.pcisecuritystandards.org/are-you-ready-for-30-june-2018-sayin-goodbye-to-ssl-early-tls" target="_blank" rel="noopener noreferrer">Are You Ready for 30 June 2018? Saying Goodbye to SSL/early TLS<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://tools.ietf.org/id/draft-moriarty-tls-oldversions-diediedie-00.html" target="_blank" rel="noopener noreferrer">Deprecating TLSv1.0 and TLSv1.1<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="use-only-strong-ciphers" tabindex="-1"><a class="header-anchor" href="#use-only-strong-ciphers" aria-hidden="true">#</a> 🔰 Use only strong ciphers</h3><h4 id="rationale-11" tabindex="-1"><a class="header-anchor" href="#rationale-11" aria-hidden="true">#</a> Rationale</h4><blockquote><p>This parameter changes quite often, the recommended configuration for today may be out of date tomorrow.</p></blockquote><blockquote><p>To check ciphers supported by OpenSSL on your server: <code>openssl ciphers -s -v</code>, <code>openssl ciphers -s -v ECDHE</code> or <code>openssl ciphers -s -v DHE</code>.</p></blockquote><blockquote><p>For more security use only strong and not vulnerable cipher suites. Place <code>ECDHE</code> and <code>DHE</code> suites at the top of your list. The order is important because <code>ECDHE</code> suites are faster, you want to use them whenever clients supports them. Ephemeral <code>DHE/ECDHE</code> are recommended and support Perfect Forward Secrecy.</p></blockquote><blockquote><p>For backward compatibility software components you should use less restrictive ciphers. Not only that you have to enable at least one special <code>AES128</code> cipher for HTTP/2 support regarding to <a href="https://tools.ietf.org/html/rfc7540#section-9.2.2" target="_blank" rel="noopener noreferrer">RFC7540: TLS 1.2 Cipher Suites<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, you also have to allow <code>prime256</code> elliptic curves which reduces the score for key exchange by another 10% even if a secure server preferred order is set.</p></blockquote><blockquote><p>Also modern cipher suites (e.g. from Mozilla recommendations) suffers from compatibility troubles mainly because drops <code>SHA-1</code>. But be careful if you want to use ciphers with <code>HMAC-SHA-1</code> - there&#39;s a perfectly good <a href="https://crypto.stackexchange.com/a/26518" target="_blank" rel="noopener noreferrer">explanation<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> why.</p></blockquote><blockquote><p>If you want to get <strong>A+ with 100%s on SSL Lab</strong> (for Cipher Strength) you should definitely disable <code>128-bit</code> ciphers. That&#39;s the main reason why you should not use them.</p></blockquote><blockquote><p>In my opinion <code>128-bit</code> symmetric encryption doesn’t less secure. Moreover, there are about 30% faster and still secure. For example TLS 1.3 use <code>TLS_AES_128_GCM_SHA256 (0x1301)</code> (for TLS-compliant applications).</p></blockquote><blockquote><p>It is not possible to control ciphers for TLS 1.3 without support from client to use new API for TLS 1.3 cipher suites. Nginx isn&#39;t able to influence that so at this moment it&#39;s always on (also if you disable potentially weak cipher from Nginx). On the other hand the ciphers in TLSv1.3 have been restricted to only a handful of completely secure ciphers by leading crypto experts.</p></blockquote><blockquote><p>For TLS 1.2 you should consider disable weak ciphers without forward secrecy like ciphers with <code>CBC</code> algorithm. Using them also reduces the final grade because they don&#39;t use ephemeral keys. In my opinion you should use ciphers with <code>AEAD</code> (TLS 1.3 supports only these suites) encryption because they don&#39;t have any known weaknesses.</p></blockquote><blockquote><p>Recently new vulnerabilities like Zombie POODLE, GOLDENDOODLE, 0-Length OpenSSL and Sleeping POODLE were published for websites that use <code>CBC</code> (Cipher Block Chaining) block cipher modes. These vulnerabilities are applicable only if the server uses TLS 1.2 or TLS 1.1 or TLS 1.0 with <code>CBC</code> cipher modes. Look at <a href="https://i.blackhat.com/asia-19/Fri-March-29/bh-asia-Young-Zombie-Poodle-Goldendoodle-and-How-TLSv13-Can-Save-Us-All.pdf" target="_blank" rel="noopener noreferrer">Zombie POODLE, GOLDENDOODLE, &amp; How TLSv1.3 Can Save Us All<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> presentation from Black Hat Asia 2019.</p></blockquote><blockquote><p>Disable TLS cipher modes (all ciphers that start with <code>TLS_RSA_WITH_*</code>) that use RSA encryption because they are vulnerable to <a href="https://robotattack.org/" target="_blank" rel="noopener noreferrer">ROBOT<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> attack. Not all servers that support RSA key exchange are vulnerable, but it is recommended to disable RSA key exchange ciphers as it does not support forward secrecy.</p></blockquote><blockquote><p>You should also absolutely disable weak ciphers regardless of the TLS version do you use, like those with <code>DSS</code>, <code>DSA</code>, <code>DES/3DES</code>, <code>RC4</code>, <code>MD5</code>, <code>SHA1</code>, <code>null</code>, anon in the name.</p></blockquote><blockquote><p>We have a nice online tool for testing compatibility cipher suites with user agents: <a href="https://cryptcheck.fr/suite/" target="_blank" rel="noopener noreferrer">CryptCheck<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>. I think it will be very helpful for you.</p></blockquote><p><strong>My recommendation:</strong></p><blockquote><p>Use only <a href="#keep-only-tls1.2-tls13">TLSv1.3 and TLSv1.2</a> with below cipher suites:</p></blockquote><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">ssl_ciphers</span> <span class="token string">&quot;TLS13-CHACHA20-POLY1305-SHA256:TLS13-AES-256-GCM-SHA384:TLS13-AES-128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES128-GCM-SHA256&quot;</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="example-9" tabindex="-1"><a class="header-anchor" href="#example-9" aria-hidden="true">#</a> Example</h4><p>Cipher suites for TLS 1.3:</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">ssl_ciphers</span> <span class="token string">&quot;TLS13-CHACHA20-POLY1305-SHA256:TLS13-AES-256-GCM-SHA384&quot;</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Cipher suites for TLS 1.2:</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">ssl_ciphers</span> <span class="token string">&quot;ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES256-SHA384&quot;</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>  ➡️ ssllabs score: <b>100%</b></p><p>Cipher suites for TLS 1.3:</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">ssl_ciphers</span> <span class="token string">&quot;TLS13-CHACHA20-POLY1305-SHA256:TLS13-AES-256-GCM-SHA384:TLS13-AES-128-GCM-SHA256&quot;</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Cipher suites for TLS 1.2:</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment">## 1)</span>
<span class="token directive"><span class="token keyword">ssl_ciphers</span> <span class="token string">&quot;ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES256-SHA384&quot;</span></span><span class="token punctuation">;</span>

<span class="token comment">## 2)</span>
<span class="token directive"><span class="token keyword">ssl_ciphers</span> <span class="token string">&quot;ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES128-GCM-SHA256&quot;</span></span><span class="token punctuation">;</span>

<span class="token comment">## 3)</span>
<span class="token directive"><span class="token keyword">ssl_ciphers</span> <span class="token string">&quot;ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256&quot;</span></span><span class="token punctuation">;</span>

<span class="token comment">## 4)</span>
<span class="token directive"><span class="token keyword">ssl_ciphers</span> <span class="token string">&quot;EECDH+CHACHA20:EDH+AESGCM:AES256+EECDH:AES256+EDH&quot;</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Cipher suites for TLS 1.1 + 1.2:</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment">## 1)</span>
<span class="token directive"><span class="token keyword">ssl_ciphers</span> <span class="token string">&quot;ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES128-GCM-SHA256&quot;</span></span><span class="token punctuation">;</span>

<span class="token comment">## 2)</span>
<span class="token directive"><span class="token keyword">ssl_ciphers</span> <span class="token string">&quot;ECDHE-ECDSA-CHACHA20-POLY1305:ECDH+AESGCM:DH+AESGCM:ECDH+AES256:DH+AES256:ECDH+AES128:DH+AES:!AES256-GCM-SHA256:!AES256-GCM-SHA128:!aNULL:!MD5&quot;</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>  ➡️ ssllabs score: <b>90%</b></p><p>This will also give a baseline for comparison with <a href="https://mozilla.github.io/server-side-tls/ssl-config-generator/" target="_blank" rel="noopener noreferrer">Mozilla SSL Configuration Generator<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>:</p><ul><li>Modern profile with OpenSSL 1.1.0b (TLSv1.2)</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">ssl_ciphers</span> <span class="token string">&#39;ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256&#39;</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>Intermediate profile with OpenSSL 1.1.0b (TLSv1, TLSv1.1 and TLSv1.2)</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">ssl_ciphers</span> <span class="token string">&#39;ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA:ECDHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA:ECDHE-ECDSA-DES-CBC3-SHA:ECDHE-RSA-DES-CBC3-SHA:EDH-RSA-DES-CBC3-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:DES-CBC3-SHA:!DSS&#39;</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="external-resources-11" tabindex="-1"><a class="header-anchor" href="#external-resources-11" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://tools.ietf.org/html/rfc7525" target="_blank" rel="noopener noreferrer">RFC 7525 - TLS Recommendations<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.iana.org/assignments/tls-parameters/tls-parameters.xhtml#tls-parameters-4" target="_blank" rel="noopener noreferrer">TLS Cipher Suites<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://technology.amis.nl/2017/07/04/ssltls-choose-cipher-suite/" target="_blank" rel="noopener noreferrer">SSL/TLS: How to choose your cipher suite<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://sparanoid.com/note/http2-and-ecdsa-cipher-suites/" target="_blank" rel="noopener noreferrer">HTTP/2 and ECDSA Cipher Suites<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.securityevaluators.com/ssl-tls-protocol-versions-cipher-suites-use/" target="_blank" rel="noopener noreferrer">Which SSL/TLS Protocol Versions and Cipher Suites Should I Use?<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://github.com/OWASP/CheatSheetSeries/blob/master/cheatsheets/TLS_Cipher_String_Cheat_Sheet.md" target="_blank" rel="noopener noreferrer">Recommendations for a cipher string by OWASP<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.acunetix.com/blog/articles/tls-ssl-cipher-hardening/" target="_blank" rel="noopener noreferrer">Recommendations for TLS/SSL Cipher Hardening by Acunetix<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://wiki.mozilla.org/Security/Server_Side_TLS#Modern_compatibility" target="_blank" rel="noopener noreferrer">Mozilla’s Modern compatibility suite<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://tls.mbed.org/kb/cryptography/ephemeral-diffie-hellman" target="_blank" rel="noopener noreferrer">Why use Ephemeral Diffie-Hellman<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://blogs.technet.microsoft.com/askpfeplat/2017/12/26/cipher-suite-breakdown/" target="_blank" rel="noopener noreferrer">Cipher Suite Breakdown<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://blog.qualys.com/technology/2019/04/22/zombie-poodle-and-goldendoodle-vulnerabilities" target="_blank" rel="noopener noreferrer">Zombie POODLE and GOLDENDOODLE Vulnerabilities<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://testssl.sh/openssl-iana.mapping.html" target="_blank" rel="noopener noreferrer">OpenSSL IANA Mapping<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://lightshipsec.com/goodbye-tls_rsa/" target="_blank" rel="noopener noreferrer">Goodbye TLS_RSA<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="use-more-secure-ecdh-curve" tabindex="-1"><a class="header-anchor" href="#use-more-secure-ecdh-curve" aria-hidden="true">#</a> 🔰 Use more secure ECDH Curve</h3><h4 id="rationale-12" tabindex="-1"><a class="header-anchor" href="#rationale-12" aria-hidden="true">#</a> Rationale</h4><blockquote><p>In my opinion your main source of knowledge should be <a href="https://safecurves.cr.yp.to/" target="_blank" rel="noopener noreferrer">The SafeCurves web site<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>. This site reports security assessments of various specific curves.</p></blockquote><blockquote><p>For a SSL server certificate, an &quot;elliptic curve&quot; certificate will be used only with digital signatures (<code>ECDSA</code> algorithm). Nginx provides directive to specifies a curve for <code>ECDHE</code> ciphers.</p></blockquote><blockquote><p><code>x25519</code> is a more secure (also with SafeCurves requirements) but slightly less compatible option. I think to maximise interoperability with existing browsers and servers, stick to <code>P-256 prime256v1</code> and <code>P-384 secp384r1</code> curves. Of course there&#39;s tons of different opinions about <code>P-256</code> and <code>P-384</code> curves.</p></blockquote><blockquote><p>NSA Suite B says that NSA uses curves <code>P-256</code> and <code>P-384</code> (in OpenSSL, they are designated as, respectively, <code>prime256v1</code> and <code>secp384r1</code>). There is nothing wrong with <code>P-521</code>, except that it is, in practice, useless. Arguably, <code>P-384</code> is also useless, because the more efficient <code>P-256</code> curve already provides security that cannot be broken through accumulation of computing power.</p></blockquote><blockquote><p>Bernstein and Lange believe that the NIST curves are not optimal and there are better (more secure) curves that work just as fast, e.g. <code>x25519</code>.</p></blockquote><blockquote><p>Keep an eye also on this:</p><p><em>Secure implementations of the standard curves are theoretically possible but very hard.</em></p><p>The SafeCurves say:</p><ul><li><code>NIST P-224</code>, <code>NIST P-256</code> and <code>NIST P-384</code> are UNSAFE</li></ul><p>From the curves described here only <code>x25519</code> is a curve meets all SafeCurves requirements.</p></blockquote><blockquote><p>I think you can use <code>P-256</code> to minimise trouble. If you feel that your manhood is threatened by using a 256-bit curve where a 384-bit curve is available, then use <code>P-384</code>: it will increases your computational and network costs.</p></blockquote><blockquote><p>If you use TLS 1.3 you should enable <code>prime256v1</code> signature algorithm. Without this SSL Lab reports <code>TLS_AES_128_GCM_SHA256 (0x1301)</code> signature as weak.</p></blockquote><blockquote><p>If you do not set <code>ssl_ecdh_curve</code>, then Nginx will use its default settings, e.g. Chrome will prefer <code>x25519</code>, but it is <strong>not recommended</strong> because you can not control default settings (seems to be <code>P-256</code>) from the Nginx.</p></blockquote><blockquote><p>Explicitly set <code>ssl_ecdh_curve X25519:prime256v1:secp521r1:secp384r1;</code> <strong>decreases the Key Exchange SSL Labs rating</strong>.</p></blockquote><blockquote><p>Definitely do not use the <code>secp112r1</code>, <code>secp112r2</code>, <code>secp128r1</code>, <code>secp128r2</code>, <code>secp160k1</code>, <code>secp160r1</code>, <code>secp160r2</code>, <code>secp192k1</code> curves. They have a too small size for security application according to NIST recommendation.</p></blockquote><p><strong>My recommendation:</strong></p><blockquote><p>Use only <a href="#keep-only-tls1.2-tls13">TLSv1.3 and TLSv1.2</a> and <a href="#use-only-strong-ciphers">only strong ciphers</a> with above curves:</p></blockquote><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">ssl_ecdh_curve</span> X25519:secp521r1:secp384r1:prime256v1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="example-10" tabindex="-1"><a class="header-anchor" href="#example-10" aria-hidden="true">#</a> Example</h4><p>Curves for TLS 1.2:</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">ssl_ecdh_curve</span> secp521r1:secp384r1:prime256v1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>  ➡️ ssllabs score: <b>100%</b></p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment">## Alternative (this one doesn’t affect compatibility, by the way; it’s just a question of the preferred order).</span>

<span class="token comment">## This setup downgrade Key Exchange score but is recommended for TLS 1.2 + 1.3:</span>
<span class="token directive"><span class="token keyword">ssl_ecdh_curve</span> X25519:secp521r1:secp384r1:prime256v1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="external-resources-12" tabindex="-1"><a class="header-anchor" href="#external-resources-12" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://tools.ietf.org/html/rfc7748" target="_blank" rel="noopener noreferrer">Elliptic Curves for Security<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="http://www.secg.org/" target="_blank" rel="noopener noreferrer">Standards for Efficient Cryptography Group<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://safecurves.cr.yp.to/" target="_blank" rel="noopener noreferrer">SafeCurves: choosing safe curves for elliptic-curve cryptography<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://eprint.iacr.org/2013/647" target="_blank" rel="noopener noreferrer">A note on high-security general-purpose elliptic curves<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://blog.cr.yp.to/20140323-ecdsa.html" target="_blank" rel="noopener noreferrer">P-521 is pretty nice prime<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://certsimple.com/blog/safe-curves-and-openssl" target="_blank" rel="noopener noreferrer">Safe ECC curves for HTTPS are coming sooner than you think<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.keylength.com/" target="_blank" rel="noopener noreferrer">Cryptographic Key Length Recommendations<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.owasp.org/index.php/Testing_for_Weak_SSL/TLS_Ciphers,_Insufficient_Transport_Layer_Protection_(OTG-CRYPST-001)" target="_blank" rel="noopener noreferrer">Testing for Weak SSL/TLS Ciphers, Insufficient Transport Layer Protection (OTG-CRYPST-001)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://tls.mbed.org/kb/cryptography/elliptic-curve-performance-nist-vs-brainpool" target="_blank" rel="noopener noreferrer">Elliptic Curve performance: NIST vs Brainpool<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://security.stackexchange.com/questions/78621/which-elliptic-curve-should-i-use/91562" target="_blank" rel="noopener noreferrer">Which elliptic curve should I use?<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="http://www.lapsedordinary.net/files/ECC_BSidesLDN_2015.pdf" target="_blank" rel="noopener noreferrer">Elliptic Curve Cryptography for those who are afraid of maths<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="use-strong-key-exchange-with-perfect-forward-secrecy" tabindex="-1"><a class="header-anchor" href="#use-strong-key-exchange-with-perfect-forward-secrecy" aria-hidden="true">#</a> 🔰 Use strong Key Exchange with Perfect Forward Secrecy</h3><h4 id="rationale-13" tabindex="-1"><a class="header-anchor" href="#rationale-13" aria-hidden="true">#</a> Rationale</h4><blockquote><p>To use a signature based authentication you need some kind of DH exchange (fixed or ephemeral/temporary), to exchange the session key. If you use it, Nginx will use the default Ephemeral Diffie-Hellman (<code>DHE</code>) paramaters to define how performs the Diffie-Hellman (DH) key-exchange. This uses a weak key (by default: <code>1024 bit</code>) that gets lower scores.</p></blockquote><blockquote><p>You should always use the Elliptic Curve Diffie Hellman Ephemeral (<code>ECDHE</code>). Due to increasing concern about pervasive surveillance, key exchanges that provide Forward Secrecy are recommended, see for example <a href="https://tools.ietf.org/html/rfc7525#section-6.3" target="_blank" rel="noopener noreferrer">RFC 7525<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p></blockquote><blockquote><p>For greater compatibility but still for security in key exchange, you should prefer the latter E (ephemeral) over the former E (EC). There is recommended configuration: <code>ECDHE</code> &gt; <code>DHE</code> (with min. <code>2048 bit</code> size) &gt; <code>ECDH</code>. With this if the initial handshake fails, another handshake will be initiated using <code>DHE</code>.</p></blockquote><blockquote><p><code>DHE</code> is slower than <code>ECDHE</code>. If you are concerned about performance, prioritize <code>ECDHE-ECDSA</code> over <code>DHE</code>. OWASP estimates that the TLS handshake with <code>DHE</code> hinders the CPU by a factor of 2.4 compared to <code>ECDHE</code>.</p></blockquote><blockquote><p>Diffie-Hellman requires some set-up parameters to begin with. Parameters from <code>ssl_dhparam</code> (which are generated with <code>openssl dhparam ...</code>) define how OpenSSL performs the Diffie-Hellman (DH) key-exchange. They include a field prime <code>p</code> and a generator <code>g</code>. The purpose of the availability to customize these parameter is to allow everyone to use own parameters for this. This can be used to prevent being affected from the Logjam attack.</p></blockquote><blockquote><p>Modern clients prefer <code>ECDHE</code> instead other variants and if your Nginx accepts this preference then the handshake will not use the DH param at all since it will not do a <code>DHE</code> key exchange but an <code>ECDHE</code> key exchange. Thus, if no plain <code>DH/DHE</code> ciphers are configured at your server but only Eliptic curve DH (e.g. <code>ECDHE</code>) then you don&#39;t need to set your own <code>ssl_dhparam</code> directive. Enabling <code>DHE</code> requires us to take care of our DH primes (a.k.a. <code>dhparams</code>) and to trust in <code>DHE</code>.</p></blockquote><blockquote><p>Elliptic curve Diffie-Hellman is a modified Diffie-Hellman exchange which uses Elliptic curve cryptography instead of the traditional RSA-style large primes. So while I&#39;m not sure what parameters it may need (if any), I don&#39;t think it needs the kind you&#39;re generating (<code>ECDH</code> is based on curves, not primes, so I don&#39;t think the traditional DH params will do you any good).</p></blockquote><blockquote><p>Cipher suites using <code>DHE</code> key exchange in OpenSSL require <code>tmp_DH</code> parameters, which the <code>ssl_dhparam</code> directive provides. The same is true for <code>DH_anon</code> key exchange, but in practice nobody uses those. The OpenSSL wiki page for Diffie Hellman Parameters it says: <em>To use perfect forward secrecy cipher suites, you must set up Diffie-Hellman parameters (on the server side).</em> Look also at <a href="https://www.openssl.org/docs/man1.0.2/man3/SSL_CTX_set_tmp_dh.html" target="_blank" rel="noopener noreferrer">SSL_CTX_set_tmp_dh_callback<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p></blockquote><blockquote><p>If you use <code>ECDH/ECDHE</code> key exchange please see <a href="#beginner-use-more-secure-ecdh-curve">Use more secure ECDH Curve</a> rule.</p></blockquote><blockquote><p>Default key size in OpenSSL is <code>1024 bits</code> - it&#39;s vulnerable and breakable. For the best security configuration use your own DH Group (min. <code>2048 bit</code>) or use known safe ones pre-defined DH groups (it&#39;s recommended) from the <a href="https://wiki.mozilla.org/Security/Server_Side_TLS#ffdhe4096" target="_blank" rel="noopener noreferrer">Mozilla<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p></blockquote><blockquote><p>The <code>2048 bit</code> is generally expected to be safe and is already very far into the &quot;cannot break it zone&quot;. However years ago people expected 1024 bit to be safe so if you are after long term resistance You would go up to <code>4096 bit</code> (for both RSA keys and DH parameters). It&#39;s also important if you want to get 100% on Key Exchange of the SSL Labs test.</p></blockquote><blockquote><p>You should remember that the <code>4096 bit</code> modulus will make DH computations slower and won’t actually improve security.</p></blockquote><p>There is <a href="https://security.stackexchange.com/questions/47204/dh-parameters-recommended-size/47207#47207" target="_blank" rel="noopener noreferrer">good explanation<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> about DH parameters recommended size:</p><blockquote><p><em>Current recommendations from various bodies (including NIST) call for a <code>2048-bit</code> modulus for DH. Known DH-breaking algorithms would have a cost so ludicrously high that they could not be run to completion with known Earth-based technology. See this site for pointers on that subject.</em></p></blockquote><blockquote><p><em>You don&#39;t want to overdo the size because the computational usage cost rises relatively sharply with prime size (somewhere between quadratic and cubic, depending on some implementation details) but a <code>2048-bit</code> DH ought to be fine (a basic low-end PC can do several hundreds of <code>2048-bit</code> DH per second).</em></p></blockquote><p>Look also at this answer by <a href="https://www.hezmatt.org/~mpalmer/blog/" target="_blank" rel="noopener noreferrer">Matt Palmer<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>:</p><blockquote><p><em>Indeed, characterising <code>2048 bit</code> DH parameters as &quot;weak as hell&quot; is quite misleading. There are no known feasible cryptographic attacks against arbitrary strong 2048 bit DH groups. To protect against future disclosure of a session key due to breaking DH, sure, you want your DH parameters to be as long as is practical, but since <code>1024 bit</code> DH is only just getting feasible, <code>2048 bits</code> should be OK for most purposes for a while yet.</em></p></blockquote><p><strong>My recommendation:</strong></p><blockquote><p>If you use only TLS 1.3 - <code>ssl_dhparam</code> is not required (not used). Also, if you use <code>ECDHE/ECDH</code> - <code>ssl_dhparam</code> is not required (not used). If you use <code>DHE/DH</code> - <code>ssl_dhparam</code> with DH parameters is required (min. <code>2048 bit</code>). By default no parameters are set, and therefore <code>DHE</code> ciphers will not be used.</p></blockquote><h4 id="example-11" tabindex="-1"><a class="header-anchor" href="#example-11" aria-hidden="true">#</a> Example</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">## To generate a DH parameters:</span>
openssl dhparam <span class="token parameter variable">-out</span> /etc/nginx/ssl/dhparam_4096.pem <span class="token number">4096</span>

<span class="token comment">## To produce &quot;DSA-like&quot; DH parameters:</span>
openssl dhparam <span class="token parameter variable">-dsaparam</span> <span class="token parameter variable">-out</span> /etc/nginx/ssl/dhparam_4096.pem <span class="token number">4096</span>

<span class="token comment">## Nginx configuration only for DH/DHE:</span>
ssl_dhparam /etc/nginx/ssl/dhparams_4096.pem<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>  ➡️ ssllabs score: <b>100%</b></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">## To generate a DH parameters:</span>
openssl dhparam <span class="token parameter variable">-out</span> /etc/nginx/ssl/dhparam_2048.pem <span class="token number">2048</span>

<span class="token comment">## To produce &quot;DSA-like&quot; DH parameters:</span>
openssl dhparam <span class="token parameter variable">-dsaparam</span> <span class="token parameter variable">-out</span> /etc/nginx/ssl/dhparam_2048.pem <span class="token number">2048</span>

<span class="token comment">## Nginx configuration only for DH/DHE:</span>
ssl_dhparam /etc/nginx/ssl/dhparam_2048.pem<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>  ➡️ ssllabs score: <b>90%</b></p><h4 id="external-resources-13" tabindex="-1"><a class="header-anchor" href="#external-resources-13" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://weakdh.org/" target="_blank" rel="noopener noreferrer">Weak Diffie-Hellman and the Logjam Attack<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://weakdh.org/sysadmin.html" target="_blank" rel="noopener noreferrer">Guide to Deploying Diffie-Hellman for TLS<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://wiki.mozilla.org/Security/Server_Side_TLS#ffdhe4096" target="_blank" rel="noopener noreferrer">Pre-defined DHE groups<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://security.stackexchange.com/questions/95178/diffie-hellman-parameters-still-calculating-after-24-hours/95184#95184" target="_blank" rel="noopener noreferrer">Instructs OpenSSL to produce &quot;DSA-like&quot; DH parameters<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://security.stackexchange.com/questions/44251/openssl-generate-different-types-of-self-signed-certificate" target="_blank" rel="noopener noreferrer">OpenSSL generate different types of self signed certificate<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://2ton.com.au/dhtool/" target="_blank" rel="noopener noreferrer">Public Diffie-Hellman Parameter Service/Tool<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="http://vincent.bernat.im/en/blog/2011-ssl-perfect-forward-secrecy.html" target="_blank" rel="noopener noreferrer">Vincent Bernat&#39;s SSL/TLS &amp; Perfect Forward Secrecy<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://securitypitfalls.wordpress.com/2014/10/06/rsa-and-ecdsa-performance/" target="_blank" rel="noopener noreferrer">RSA and ECDSA performance<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://technology.amis.nl/2017/07/04/ssltls-choose-cipher-suite/" target="_blank" rel="noopener noreferrer">SSL/TLS: How to choose your cipher suite<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://security.stackexchange.com/questions/41205/diffie-hellman-and-its-tls-ssl-usage" target="_blank" rel="noopener noreferrer">Diffie-Hellman and its TLS/SSL usage<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="prevent-replay-attacks-on-zero-round-trip-time" tabindex="-1"><a class="header-anchor" href="#prevent-replay-attacks-on-zero-round-trip-time" aria-hidden="true">#</a> 🔰 Prevent Replay Attacks on Zero Round-Trip Time</h3><h4 id="rationale-14" tabindex="-1"><a class="header-anchor" href="#rationale-14" aria-hidden="true">#</a> Rationale</h4><blockquote><p>This rules is only important for TLS 1.3. By default enabling TLS 1.3 will not enable 0-RTT support. After all, you should be fully aware of all the potential exposure factors and related risks with the use of this option.</p></blockquote><blockquote><p>0-RTT Handshakes is part of the replacement of TLS Session Resumption and was inspired by the QUIC Protocol.</p></blockquote><blockquote><p>0-RTT creates a significant security risk. With 0-RTT, a threat actor can intercept an encrypted client message and resend it to the server, tricking the server into improperly extending trust to the threat actor and thus potentially granting the threat actor access to sensitive data.</p></blockquote><blockquote><p>On the other hand, including 0-RTT (Zero Round Trip Time Resumption) results in a significant increase in efficiency and connection times. TLS 1.3 has a faster handshake that completes in 1-RTT. Additionally, it has a particular session resumption mode where, under certain conditions, it is possible to send data to the server on the first flight (0-RTT).</p></blockquote><blockquote><p>For example, Cloudflare only supports 0-RTT for <a href="https://new.blog.cloudflare.com/introducing-0-rtt/" target="_blank" rel="noopener noreferrer">GET requests with no query parameters<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> in an attempt to limit the attack surface. Moreover, in order to improve identify connection resumption attempts, they relay this information to the origin by adding an extra header to 0-RTT requests. This header uniquely identifies the request, so if one gets repeated, the origin will know it&#39;s a replay attack (the application needs to track values received from that and reject duplicates on non-idempotent endpoints).</p></blockquote><blockquote><p>To protect against such attacks at the application layer, the <code>$ssl_early_data</code> variable should be used. You&#39;ll also need to ensure that the <code>Early-Data</code> header is passed to your application. <code>$ssl_early_data</code> returns 1 if TLS 1.3 early data is used and the handshake is not complete.</p></blockquote><blockquote><p>However, as part of the upgrade, you should disable 0-RTT until you can audit your application for this class of vulnerability.</p></blockquote><blockquote><p>In order to send early-data, client and server <a href="https://tools.ietf.org/html/rfc8446#section-2.3" target="_blank" rel="noopener noreferrer">must support PSK exchange mode<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> (session cookies).</p></blockquote><blockquote><p>In addition, I would like to recommend <a href="https://news.ycombinator.com/item?id=16667036" target="_blank" rel="noopener noreferrer">this<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> great discussion about TLS 1.3 and 0-RTT.</p></blockquote><p>If you are unsure to enable 0-RTT, look what Cloudflare say about it:</p><blockquote><p><em>Generally speaking, 0-RTT is safe for most web sites and applications. If your web application does strange things and you’re concerned about its replay safety, consider not using 0-RTT until you can be certain that there are no negative effects. [...] TLS 1.3 is a big step forward for web performance and security. By combining TLS 1.3 with 0-RTT, the performance gains are even more dramatic.</em></p></blockquote><h4 id="example-12" tabindex="-1"><a class="header-anchor" href="#example-12" aria-hidden="true">#</a> Example</h4><p>Test 0-RTT with OpenSSL:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">## 1)</span>
<span class="token assign-left variable">_host</span><span class="token operator">=</span><span class="token string">&quot;example.com&quot;</span>

<span class="token function">cat</span> <span class="token operator">&gt;</span> req.in <span class="token operator">&lt;&lt;</span> <span class="token string">__EOF__
HEAD / HTTP/1.1
Host: <span class="token variable">$_host</span>
Connection: close
__EOF__</span>
<span class="token comment">## or:</span>
<span class="token comment">## echo -e &quot;GET / HTTP/1.1\r\nHost: $_host\r\nConnection: close\r\n\r\n&quot; &gt; req.in</span>

openssl s_client <span class="token parameter variable">-connect</span> <span class="token variable">${_host}</span>:443 <span class="token parameter variable">-tls1_3</span> <span class="token parameter variable">-sess_out</span> session.pem <span class="token parameter variable">-ign_eof</span> <span class="token operator">&lt;</span> req.in
openssl s_client <span class="token parameter variable">-connect</span> <span class="token variable">${_host}</span>:443 <span class="token parameter variable">-tls1_3</span> <span class="token parameter variable">-sess_in</span> session.pem <span class="token parameter variable">-early_data</span> req.in

<span class="token comment">## 2)</span>
python <span class="token parameter variable">-m</span> sslyze <span class="token parameter variable">--early_data</span> <span class="token string">&quot;<span class="token variable">$_host</span>&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Enable 0-RTT with <code>$ssl_early_data</code> variable:</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

  ...

  <span class="token directive"><span class="token keyword">ssl_protocols</span>   TLSv1.2 TLSv1.3</span><span class="token punctuation">;</span>
  <span class="token comment">## To enable 0-RTT (TLS 1.3):</span>
  <span class="token directive"><span class="token keyword">ssl_early_data</span>  <span class="token boolean">on</span></span><span class="token punctuation">;</span>

  <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>

    <span class="token directive"><span class="token keyword">proxy_pass</span>       http://backend_x20</span><span class="token punctuation">;</span>
    <span class="token comment">## It protect against such attacks at the application layer:</span>
    <span class="token directive"><span class="token keyword">proxy_set_header</span> Early-Data <span class="token variable">$ssl_early_data</span></span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

  ...

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="external-resources-14" tabindex="-1"><a class="header-anchor" href="#external-resources-14" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://github.com/tlswg/tls13-spec/issues/1001" target="_blank" rel="noopener noreferrer">Security Review of TLS1.3 0-RTT<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://new.blog.cloudflare.com/introducing-0-rtt/" target="_blank" rel="noopener noreferrer">Introducing Zero Round Trip Time Resumption (0-RTT)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://blog.trailofbits.com/2019/03/25/what-application-developers-need-to-know-about-tls-early-data-0rtt/" target="_blank" rel="noopener noreferrer">What Application Developers Need To Know About TLS Early Data (0RTT)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://eprint.iacr.org/2017/082.pdf" target="_blank" rel="noopener noreferrer">Replay Attacks on Zero Round-Trip Time: The Case of the TLS 1.3 Handshake Candidates<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://tools.ietf.org/html/rfc8446#section-8" target="_blank" rel="noopener noreferrer">0-RTT and Anti-Replay<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://tools.ietf.org/id/draft-thomson-http-replay-00.html_" target="_blank" rel="noopener noreferrer">Using Early Data in HTTP (2017)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://tools.ietf.org/html/draft-ietf-httpbis-replay-04" target="_blank" rel="noopener noreferrer">Using Early Data in HTTP (2018)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://ldapwiki.com/wiki/0-RTT%20Handshakes" target="_blank" rel="noopener noreferrer">0-RTT Handshakes<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="defend-against-the-beast-attack" tabindex="-1"><a class="header-anchor" href="#defend-against-the-beast-attack" aria-hidden="true">#</a> 🔰 Defend against the BEAST attack</h3><h4 id="rationale-15" tabindex="-1"><a class="header-anchor" href="#rationale-15" aria-hidden="true">#</a> Rationale</h4><blockquote><p>Generally the BEAST attack relies on a weakness in the way <code>CBC</code> mode is used in SSL/TLS.</p></blockquote><blockquote><p>More specifically, to successfully perform the BEAST attack, there are some conditions which needs to be met:</p><ul><li>vulnerable version of SSL must be used using a block cipher (<code>CBC</code> in particular)</li><li>JavaScript or a Java applet injection - should be in the same origin of the web site</li><li>data sniffing of the network connection must be possible</li></ul></blockquote><blockquote><p>To prevent possible use BEAST attacks you should enable server-side protection, which causes the server ciphers should be preferred over the client ciphers, and completely excluded TLS 1.0 from your protocol stack.</p></blockquote><h4 id="example-13" tabindex="-1"><a class="header-anchor" href="#example-13" aria-hidden="true">#</a> Example</h4><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">ssl_prefer_server_ciphers</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="external-resources-15" tabindex="-1"><a class="header-anchor" href="#external-resources-15" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://commandlinefanatic.com/cgi-bin/showarticle.cgi?article=art027" target="_blank" rel="noopener noreferrer">An Illustrated Guide to the BEAST Attack<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://blog.ivanristic.com/2013/09/is-beast-still-a-threat.html" target="_blank" rel="noopener noreferrer">Is BEAST still a threat?<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://blogs.cisco.com/security/beat-the-beast-with-tls" target="_blank" rel="noopener noreferrer">Beat the BEAST with TLS 1.1/1.2 and More<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="#beginner-use-only-strong-ciphers">Use only strong ciphers (from this handbook)</a></li></ul><h3 id="mitigation-of-crime-breach-attacks" tabindex="-1"><a class="header-anchor" href="#mitigation-of-crime-breach-attacks" aria-hidden="true">#</a> 🔰 Mitigation of CRIME/BREACH attacks</h3><h4 id="rationale-16" tabindex="-1"><a class="header-anchor" href="#rationale-16" aria-hidden="true">#</a> Rationale</h4><blockquote><p>Disable HTTP compression or compress only zero sensitive content.</p></blockquote><blockquote><p>You should probably never use TLS compression. Some user agents (at least Chrome) will disable it anyways. Disabling SSL/TLS compression stops the attack very effectively. A deployment of HTTP/2 over TLS 1.2 must disable TLS compression (please see <a href="https://tools.ietf.org/html/rfc7540#section-9.2" target="_blank" rel="noopener noreferrer">RFC 7540: 9.2. Use of TLS Features<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>).</p></blockquote><blockquote><p>CRIME exploits SSL/TLS compression which is disabled since nginx 1.3.2. BREACH exploits HTTP compression</p></blockquote><blockquote><p>Some attacks are possible (e.g. the real BREACH attack is a complicated) because of gzip (HTTP compression not TLS compression) being enabled on SSL requests. In most cases, the best action is to simply disable gzip for SSL.</p></blockquote><blockquote><p>Compression is not the only requirement for the attack to be done so using it does not mean that the attack will succeed. Generally you should consider whether having an accidental performance drop on HTTPS sites is better than HTTPS sites being accidentally vulnerable.</p></blockquote><blockquote><p>You shouldn&#39;t use HTTP compression on private responses when using TLS.</p></blockquote><blockquote><p>I would gonna to prioritise security over performance but compression can be (I think) okay to HTTP compress publicly available static content like css or js and HTML content with zero sensitive info (like an &quot;About Us&quot; page).</p></blockquote><blockquote><p>Remember: by default, Nginx doesn&#39;t compress image files using its per-request gzip module.</p></blockquote><blockquote><p>Gzip static module is better, for 2 reasons:</p><ul><li>you don&#39;t have to gzip for each request</li><li>you can use a higher gzip level</li></ul></blockquote><blockquote><p>You should put the <code>gzip_static on;</code> inside the blocks that configure static files, but if you’re only running one site, it’s safe to just put it in the http block.</p></blockquote><h4 id="example-14" tabindex="-1"><a class="header-anchor" href="#example-14" aria-hidden="true">#</a> Example</h4><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment">## Disable dynamic HTTP compression:</span>
<span class="token directive"><span class="token keyword">gzip</span> <span class="token boolean">off</span></span><span class="token punctuation">;</span>

<span class="token comment">## Enable dynamic HTTP compression for specific location context:</span>
<span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">gzip</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>

  ...

<span class="token punctuation">}</span>

<span class="token comment">## Enable static gzip compression:</span>
<span class="token directive"><span class="token keyword">location</span> ^~ /assets/</span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">gzip_static</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>

  ...

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="external-resources-16" tabindex="-1"><a class="header-anchor" href="#external-resources-16" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://security.stackexchange.com/questions/20406/is-http-compression-safe" target="_blank" rel="noopener noreferrer">Is HTTP compression safe?<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.pcworld.com/article/3051675/http-compression-continues-to-put-encrypted-communications-at-risk.html" target="_blank" rel="noopener noreferrer">HTTP compression continues to put encrypted communications at risk<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="http://niiconsulting.com/checkmate/2013/12/ssltls-attacks-part-2-crime-attack/" target="_blank" rel="noopener noreferrer">SSL/TLS attacks: Part 2 – CRIME Attack<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://blog.qualys.com/ssllabs/2013/08/07/defending-against-the-breach-attack" target="_blank" rel="noopener noreferrer">Defending against the BREACH Attack<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://security.stackexchange.com/questions/172581/to-avoid-breach-can-we-use-gzip-on-non-token-responses" target="_blank" rel="noopener noreferrer">To avoid BREACH, can we use gzip on non-token responses?<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://blog.ircmaxell.com/2013/08/dont-worry-about-breach.html" target="_blank" rel="noopener noreferrer">Don&#39;t Worry About BREACH<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="http://nginx.org/en/docs/http/ngx_http_gzip_static_module.html" target="_blank" rel="noopener noreferrer">Module ngx_http_gzip_static_module<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://theartofmachinery.com/2016/06/06/nginx_gzip_static.html" target="_blank" rel="noopener noreferrer">Offline Compression with Nginx<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="http-strict-transport-security" tabindex="-1"><a class="header-anchor" href="#http-strict-transport-security" aria-hidden="true">#</a> 🔰 HTTP Strict Transport Security</h3><h4 id="rationale-17" tabindex="-1"><a class="header-anchor" href="#rationale-17" aria-hidden="true">#</a> Rationale</h4><blockquote><p>Generally HSTS is a way for websites to tell browsers that the connection should only ever be encrypted. This prevents MITM attacks, downgrade attacks, sending plain text cookies and session ids.</p></blockquote><blockquote><p>The header indicates for how long a browser should unconditionally refuse to take part in unsecured HTTP connection for a specific domain.</p></blockquote><blockquote><p>When a browser knows that a domain has enabled HSTS, it does two things:</p><ul><li>always uses an <code>https://</code> connection, even when clicking on an <code>http://</code> link or after typing a domain into the location bar without specifying a protocol</li><li>removes the ability for users to click through warnings about invalid certificates</li></ul></blockquote><blockquote><p>I recommend to set the <code>max-age</code> to a big value like <code>31536000</code> (12 months) or <code>63072000</code> (24 months).</p></blockquote><blockquote><p>There are a few simple best practices for HSTS (from <a href="https://blog.qualys.com/securitylabs/2016/03/28/the-importance-of-a-proper-http-strict-transport-security-implementation-on-your-web-server" target="_blank" rel="noopener noreferrer"> The Importance of a Proper HTTP Strict Transport Security Implementation on Your Web Server<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>):</p><ul><li><p>The strongest protection is to ensure that all requested resources use only TLS with a well-formed HSTS header. Qualys recommends providing an HSTS header on all HTTPS resources in the target domain</p></li><li><p>It is advisable to assign the max-age directive’s value to be greater than <code>10368000</code> seconds (120 days) and ideally to <code>31536000</code> (one year). Websites should aim to ramp up the max-age value to ensure heightened security for a long duration for the current domain and/or subdomains</p></li><li><p><a href="https://tools.ietf.org/html/rfc6797" target="_blank" rel="noopener noreferrer">RFC 6797<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, section 14.4 advocates that a web application must aim to add the <code>includeSubDomain</code> directive in the policy definition whenever possible. The directive’s presence ensures the HSTS policy is applied to the domain of the issuing host and all of its subdomains, e.g. <code>example.com</code> and <code>www.example.com</code></p></li><li><p>The application should never send an HSTS header over a plaintext HTTP header, as doing so makes the connection vulnerable to SSL stripping attacks</p></li><li><p>It is not recommended to provide an HSTS policy via the http-equiv attribute of a meta tag. According to HSTS RFC 6797, user agents don’t heed <code>http-equiv=&quot;Strict-Transport-Security&quot;</code> attribute on <code>&lt;meta&gt;</code> elements on the received content`</p></li></ul></blockquote><blockquote><p>To meet the HSTS preload list standard a root domain needs to return a <code>strict-transport-security</code> header that includes both the <code>includeSubDomains</code> and <code>preload</code> directives and has a minimum <code>max-age</code> of one year. Your site must also serve a valid SSL certificate on the root domain and all subdomains, as well as redirect all HTTP requests to HTTPS on the same host.</p></blockquote><blockquote><p>You had better be pretty sure that your website is indeed all HTTPS before you turn this on because HSTS adds complexity to your rollback strategy. Google recommend enabling HSTS this way:</p><ol><li>Roll out your HTTPS pages without HSTS first</li><li>Start sending HSTS headers with a short <code>max-age</code>. Monitor your traffic both from users and other clients, and also dependents&#39; performance, such as ads</li><li>Slowly increase the HSTS <code>max-age</code></li><li>If HSTS doesn&#39;t affect your users and search engines negatively, you can, if you wish, ask your site to be added to the HSTS preload list used by most major browsers</li></ol></blockquote><h4 id="example-15" tabindex="-1"><a class="header-anchor" href="#example-15" aria-hidden="true">#</a> Example</h4><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">add_header</span> Strict-Transport-Security <span class="token string">&quot;max-age=63072000; includeSubdomains&quot;</span> always</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>  ➡️ ssllabs score: <b>A+</b></p><h4 id="external-resources-17" tabindex="-1"><a class="header-anchor" href="#external-resources-17" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security" target="_blank" rel="noopener noreferrer">Strict-Transport-Security<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://zinoui.com/blog/security-http-headers#strict-transport-security" target="_blank" rel="noopener noreferrer">Security HTTP Headers - Strict-Transport-Security<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://https.cio.gov/hsts/" target="_blank" rel="noopener noreferrer">HTTP Strict Transport Security<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.owasp.org/index.php/HTTP_Strict_Transport_Security_Cheat_Sheet" target="_blank" rel="noopener noreferrer">HTTP Strict Transport Security Cheat Sheet<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://scotthelme.co.uk/hsts-cheat-sheet/" target="_blank" rel="noopener noreferrer">HSTS Cheat Sheet<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://textslashplain.com/2018/04/09/hsts-preload-and-subdomains/" target="_blank" rel="noopener noreferrer">HSTS Preload and Subdomains<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.nginx.com/blog/http-strict-transport-security-hsts-and-nginx/" target="_blank" rel="noopener noreferrer">HTTP Strict Transport Security (HSTS) and Nginx<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.reddit.com/r/bigseo/comments/8zw45d/is_hsts_as_a_proper_substitute_for_httptohttps/" target="_blank" rel="noopener noreferrer">Is HSTS as a proper substitute for HTTP-to-HTTPS redirects?<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.danielmorell.com/blog/how-to-configure-hsts-on-www-and-other-subdomains" target="_blank" rel="noopener noreferrer">How to configure HSTS on www and other subdomains<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://serverfault.com/questions/927336/hsts-is-includesubdomains-on-main-domain-sufficient" target="_blank" rel="noopener noreferrer">HSTS: Is includeSubDomains on main domain sufficient?<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.danielmorell.com/blog/how-to-configure-hsts-on-www-and-other-subdomains" target="_blank" rel="noopener noreferrer">The HSTS preload list eligibility<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://hstspreload.org/" target="_blank" rel="noopener noreferrer">Check HSTS preload status and eligibility<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://hstspreload.org/#deployment-recommendations" target="_blank" rel="noopener noreferrer">HSTS Deployment Recommendations<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://serverfault.com/questions/927145/how-does-hsts-handle-mixed-content" target="_blank" rel="noopener noreferrer">How does HSTS handle mixed content?<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="reduce-xss-risks-content-security-policy" tabindex="-1"><a class="header-anchor" href="#reduce-xss-risks-content-security-policy" aria-hidden="true">#</a> 🔰 Reduce XSS risks (Content-Security-Policy)</h3><h4 id="rationale-18" tabindex="-1"><a class="header-anchor" href="#rationale-18" aria-hidden="true">#</a> Rationale</h4><blockquote><p>CSP reduce the risk and impact of XSS attacks in modern browsers.</p></blockquote><blockquote><p>Whitelisting known-good resource origins, refusing to execute potentially dangerous inline scripts, and banning the use of eval are all effective mechanisms for mitigating cross-site scripting attacks.</p></blockquote><blockquote><p>The inclusion of CSP policies significantly impedes successful XSS attacks, UI Redressing (Clickjacking), malicious use of frames or CSS injections.</p></blockquote><blockquote><p>CSP is a good defence-in-depth measure to make exploitation of an accidental lapse in that less likely.</p></blockquote><blockquote><p>The default policy that starts building a header is: block everything. By modifying the CSP value, the programmer loosens restrictions for specific groups of resources (e.g. separately for scripts, images, etc.).</p></blockquote><blockquote><p>Before enable this header you should discuss with developers about it. They probably going to have to update your application to remove any inline script and style, and make some additional modifications there.</p></blockquote><blockquote><p>Strict policies will significantly increase security, and higher code quality will reduce the overall number of errors. CSP can never replace secure code - new restrictions help reduce the effects of attacks (such as XSS), but they are not mechanisms to prevent them!</p></blockquote><blockquote><p>You should always validate CSP before implement: <a href="https://csp-evaluator.withgoogle.com/" target="_blank" rel="noopener noreferrer">CSP Evaluator<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> and <a href="https://cspvalidator.org/" target="_blank" rel="noopener noreferrer">Content Security Policy (CSP) Validator<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p></blockquote><blockquote><p>For generate a policy: <a href="https://report-uri.com/home/generate" target="_blank" rel="noopener noreferrer">https://report-uri.com/home/generate<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>. Remember, however, that these types of tools may become outdated or have errors.</p></blockquote><h4 id="example-16" tabindex="-1"><a class="header-anchor" href="#example-16" aria-hidden="true">#</a> Example</h4><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment">## This policy allows images, scripts, AJAX, and CSS from the same origin, and does not allow any other resources to load:</span>
<span class="token directive"><span class="token keyword">add_header</span> Content-Security-Policy <span class="token string">&quot;default-src &#39;none&#39;; script-src &#39;self&#39;; connect-src &#39;self&#39;; img-src &#39;self&#39;; style-src &#39;self&#39;;&quot;</span> always</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="external-resources-18" tabindex="-1"><a class="header-anchor" href="#external-resources-18" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://content-security-policy.com/" target="_blank" rel="noopener noreferrer">Content Security Policy (CSP) Quick Reference Guide<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.owasp.org/index.php/Content_Security_Policy_Cheat_Sheet" target="_blank" rel="noopener noreferrer">Content Security Policy Cheat Sheet – OWASP<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.owasp.org/index.php/Content_Security_Policy" target="_blank" rel="noopener noreferrer">Content Security Policy – OWASP<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://scotthelme.co.uk/content-security-policy-an-introduction/" target="_blank" rel="noopener noreferrer">Content Security Policy - An Introduction - Scott Helme<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://scotthelme.co.uk/csp-cheat-sheet/" target="_blank" rel="noopener noreferrer">CSP Cheat Sheet - Scott Helme<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://zinoui.com/blog/security-http-headers#content-security-policy" target="_blank" rel="noopener noreferrer">Security HTTP Headers - Content-Security-Policy<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://csp-evaluator.withgoogle.com/" target="_blank" rel="noopener noreferrer">CSP Evaluator<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://cspvalidator.org/" target="_blank" rel="noopener noreferrer">Content Security Policy (CSP) Validator<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://caniuse.com/#search=CSP" target="_blank" rel="noopener noreferrer">Can I Use CSP<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://ai.google/research/pubs/pub45542" target="_blank" rel="noopener noreferrer">CSP Is Dead, Long Live CSP!<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="control-the-behaviour-of-the-referer-header-referrer-policy" tabindex="-1"><a class="header-anchor" href="#control-the-behaviour-of-the-referer-header-referrer-policy" aria-hidden="true">#</a> 🔰 Control the behaviour of the Referer header (Referrer-Policy)</h3><h4 id="rationale-19" tabindex="-1"><a class="header-anchor" href="#rationale-19" aria-hidden="true">#</a> Rationale</h4><blockquote><p>Determine what information is sent along with the requests.</p></blockquote><h4 id="example-17" tabindex="-1"><a class="header-anchor" href="#example-17" aria-hidden="true">#</a> Example</h4><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">add_header</span> Referrer-Policy <span class="token string">&quot;no-referrer&quot;</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="external-resources-19" tabindex="-1"><a class="header-anchor" href="#external-resources-19" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://scotthelme.co.uk/a-new-security-header-referrer-policy/" target="_blank" rel="noopener noreferrer">A new security header: Referrer Policy<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://zinoui.com/blog/security-http-headers#referrer-policy" target="_blank" rel="noopener noreferrer">Security HTTP Headers - Referrer-Policy<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="provide-clickjacking-protection-x-frame-options" tabindex="-1"><a class="header-anchor" href="#provide-clickjacking-protection-x-frame-options" aria-hidden="true">#</a> 🔰 Provide clickjacking protection (X-Frame-Options)</h3><h4 id="rationale-20" tabindex="-1"><a class="header-anchor" href="#rationale-20" aria-hidden="true">#</a> Rationale</h4><blockquote><p>Helps to protect your visitors against clickjacking attacks. It is recommended that you use the <code>x-frame-options</code> header on pages which should not be allowed to render a page in a frame.</p></blockquote><h4 id="example-18" tabindex="-1"><a class="header-anchor" href="#example-18" aria-hidden="true">#</a> Example</h4><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">add_header</span> X-Frame-Options <span class="token string">&quot;SAMEORIGIN&quot;</span> always</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="external-resources-20" tabindex="-1"><a class="header-anchor" href="#external-resources-20" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://tools.ietf.org/html/rfc7034" target="_blank" rel="noopener noreferrer">HTTP Header Field X-Frame-Options<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.owasp.org/index.php/Clickjacking_Defense_Cheat_Sheet" target="_blank" rel="noopener noreferrer">Clickjacking Defense Cheat Sheet<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://zinoui.com/blog/security-http-headers#x-frame-options" target="_blank" rel="noopener noreferrer">Security HTTP Headers - X-Frame-Options<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://scotthelme.co.uk/hardening-your-http-response-headers/#x-frame-options" target="_blank" rel="noopener noreferrer">X-Frame-Options - Scott Helme<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="prevent-some-categories-of-xss-attacks-x-xss-protection" tabindex="-1"><a class="header-anchor" href="#prevent-some-categories-of-xss-attacks-x-xss-protection" aria-hidden="true">#</a> 🔰 Prevent some categories of XSS attacks (X-XSS-Protection)</h3><h4 id="rationale-21" tabindex="-1"><a class="header-anchor" href="#rationale-21" aria-hidden="true">#</a> Rationale</h4><blockquote><p>Enable the cross-site scripting (XSS) filter built into modern web browsers.</p></blockquote><h4 id="example-19" tabindex="-1"><a class="header-anchor" href="#example-19" aria-hidden="true">#</a> Example</h4><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">add_header</span> X-XSS-Protection <span class="token string">&quot;1; mode=block&quot;</span> always</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="external-resources-21" tabindex="-1"><a class="header-anchor" href="#external-resources-21" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet" target="_blank" rel="noopener noreferrer">XSS (Cross Site Scripting) Prevention Cheat Sheet<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.owasp.org/index.php/DOM_based_XSS_Prevention_Cheat_Sheet" target="_blank" rel="noopener noreferrer">DOM based XSS Prevention Cheat Sheet<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.tunetheweb.com/security/http-security-headers/x-xss-protection/" target="_blank" rel="noopener noreferrer">X-XSS-Protection HTTP Header<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://zinoui.com/blog/security-http-headers#x-xss-protection" target="_blank" rel="noopener noreferrer">Security HTTP Headers - X-XSS-Protection<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="prevent-sniff-mimetype-middleware-x-content-type-options" tabindex="-1"><a class="header-anchor" href="#prevent-sniff-mimetype-middleware-x-content-type-options" aria-hidden="true">#</a> 🔰 Prevent Sniff Mimetype middleware (X-Content-Type-Options)</h3><h4 id="rationale-22" tabindex="-1"><a class="header-anchor" href="#rationale-22" aria-hidden="true">#</a> Rationale</h4><blockquote><p>It prevents the browser from doing MIME-type sniffing (prevents &quot;mime&quot; based attacks).</p></blockquote><h4 id="example-20" tabindex="-1"><a class="header-anchor" href="#example-20" aria-hidden="true">#</a> Example</h4><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">add_header</span> X-Content-Type-Options <span class="token string">&quot;nosniff&quot;</span> always</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="external-resources-22" tabindex="-1"><a class="header-anchor" href="#external-resources-22" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://www.keycdn.com/support/x-content-type-options" target="_blank" rel="noopener noreferrer">X-Content-Type-Options HTTP Header<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://zinoui.com/blog/security-http-headers#x-content-type-options" target="_blank" rel="noopener noreferrer">Security HTTP Headers - X-Content-Type-Options<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://scotthelme.co.uk/hardening-your-http-response-headers/#x-content-type-options" target="_blank" rel="noopener noreferrer">X-Content-Type-Options - Scott Helme<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="deny-the-use-of-browser-features-feature-policy" tabindex="-1"><a class="header-anchor" href="#deny-the-use-of-browser-features-feature-policy" aria-hidden="true">#</a> 🔰 Deny the use of browser features (Feature-Policy)</h3><h4 id="rationale-23" tabindex="-1"><a class="header-anchor" href="#rationale-23" aria-hidden="true">#</a> Rationale</h4><blockquote><p>This header protects your site from third parties using APIs that have security and privacy implications, and also from your own team adding outdated APIs or poorly optimised images.</p></blockquote><h4 id="example-21" tabindex="-1"><a class="header-anchor" href="#example-21" aria-hidden="true">#</a> Example</h4><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">add_header</span> Feature-Policy <span class="token string">&quot;geolocation &#39;none&#39;; midi &#39;none&#39;; notifications &#39;none&#39;; push &#39;none&#39;; sync-xhr &#39;none&#39;; microphone &#39;none&#39;; camera &#39;none&#39;; magnetometer &#39;none&#39;; gyroscope &#39;none&#39;; speaker &#39;none&#39;; vibrate &#39;none&#39;; fullscreen &#39;none&#39;; payment &#39;none&#39;; usb &#39;none&#39;;&quot;</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="external-resources-23" tabindex="-1"><a class="header-anchor" href="#external-resources-23" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://docs.google.com/document/d/1k0Ua-ZWlM_PsFCFdLMa8kaVTo32PeNZ4G7FFHqpFx4E/edit" target="_blank" rel="noopener noreferrer">Feature Policy Explainer<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://github.com/w3c/webappsec-feature-policy/blob/master/features.md" target="_blank" rel="noopener noreferrer">Policy Controlled Features<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://zinoui.com/blog/security-http-headers#feature-policy" target="_blank" rel="noopener noreferrer">Security HTTP Headers - Feature-Policy<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="reject-unsafe-http-methods" tabindex="-1"><a class="header-anchor" href="#reject-unsafe-http-methods" aria-hidden="true">#</a> 🔰 Reject unsafe HTTP methods</h3><h4 id="rationale-24" tabindex="-1"><a class="header-anchor" href="#rationale-24" aria-hidden="true">#</a> Rationale</h4><blockquote><p>Set of methods support by a resource. An ordinary web server supports the <code>HEAD</code>, <code>GET</code> and <code>POST</code> methods to retrieve static and dynamic content. Other (e.g. <code>OPTIONS</code>, <code>TRACE</code>) methods should not be supported on public web servers, as they increase the attack surface.</p></blockquote><h4 id="example-22" tabindex="-1"><a class="header-anchor" href="#example-22" aria-hidden="true">#</a> Example</h4><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">add_header</span> Allow <span class="token string">&quot;GET, POST, HEAD&quot;</span> always</span><span class="token punctuation">;</span>

<span class="token directive"><span class="token keyword">if</span> (<span class="token variable">$request_method</span> !~ ^(GET|POST|HEAD)$)</span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">return</span> <span class="token number">405</span></span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="external-resources-24" tabindex="-1"><a class="header-anchor" href="#external-resources-24" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://www.onwebsecurity.com/security/unsafe-http-methods.html" target="_blank" rel="noopener noreferrer">Vulnerability name: Unsafe HTTP methods<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="prevent-caching-of-sensitive-data" tabindex="-1"><a class="header-anchor" href="#prevent-caching-of-sensitive-data" aria-hidden="true">#</a> 🔰 Prevent caching of sensitive data</h3><h4 id="rationale-25" tabindex="-1"><a class="header-anchor" href="#rationale-25" aria-hidden="true">#</a> Rationale</h4><blockquote><p>This policy should be implemented by the application architect, however, I know from experience that this does not always happen.</p></blockquote><blockquote><p>Don&#39; to cache or persist sensitive data. As browsers have different default behaviour for caching HTTPS content, pages containing sensitive information should include a <code>Cache-Control</code> header to ensure that the contents are not cached.</p></blockquote><blockquote><p>One option is to add anticaching headers to relevant HTTP/1.1 and HTTP/2 responses, e.g. <code>Cache-Control: no-cache, no-store</code> and <code>Expires: 0</code>.</p></blockquote><blockquote><p>To cover various browser implementations the full set of headers to prevent content being cached should be:</p><p><code>Cache-Control: no-cache, no-store, private, must-revalidate, max-age=0, no-transform</code> &gt; <code>Pragma: no-cache</code> &gt; <code>Expires: 0</code></p></blockquote><h4 id="example-23" tabindex="-1"><a class="header-anchor" href="#example-23" aria-hidden="true">#</a> Example</h4><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /api</span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">expires</span> <span class="token number">0</span></span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">add_header</span> Cache-Control <span class="token string">&quot;no-cache, no-store&quot;</span></span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="external-resources-25" tabindex="-1"><a class="header-anchor" href="#external-resources-25" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://tools.ietf.org/html/rfc2616" target="_blank" rel="noopener noreferrer">RFC 2616 - Hypertext Transfer Protocol (HTTP/1.1): Standards Track<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://tools.ietf.org/html/rfc7234" target="_blank" rel="noopener noreferrer">RFC 7234 - Hypertext Transfer Protocol (HTTP/1.1): Caching<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.keycdn.com/blog/http-cache-headers" target="_blank" rel="noopener noreferrer">HTTP Cache Headers - A Complete Guide<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://jakearchibald.com/2016/caching-best-practices/" target="_blank" rel="noopener noreferrer">Caching best practices &amp; max-age gotchas<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://devcenter.heroku.com/articles/increasing-application-performance-with-http-cache-headers" target="_blank" rel="noopener noreferrer">Increasing Application Performance with HTTP Cache Headers<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching" target="_blank" rel="noopener noreferrer">HTTP Caching<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="control-buffer-overflow-attacks" tabindex="-1"><a class="header-anchor" href="#control-buffer-overflow-attacks" aria-hidden="true">#</a> 🔰 Control Buffer Overflow attacks</h3><h4 id="rationale-26" tabindex="-1"><a class="header-anchor" href="#rationale-26" aria-hidden="true">#</a> Rationale</h4><blockquote><p>Buffer overflow attacks are made possible by writing data to a buffer and exceeding that buffers’ boundary and overwriting memory fragments of a process. To prevent this in Nginx we can set buffer size limitations for all clients.</p></blockquote><h4 id="example-24" tabindex="-1"><a class="header-anchor" href="#example-24" aria-hidden="true">#</a> Example</h4><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">client_body_buffer_size</span> <span class="token number">100k</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">client_header_buffer_size</span> <span class="token number">1k</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">client_max_body_size</span> <span class="token number">100k</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">large_client_header_buffers</span> <span class="token number">2</span> <span class="token number">1k</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="external-resources-26" tabindex="-1"><a class="header-anchor" href="#external-resources-26" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://www.owasp.org/index.php/SCG_WS_nginx" target="_blank" rel="noopener noreferrer">SCG WS nginx<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="mitigating-slow-http-dos-attacks-closing-slow-connections" tabindex="-1"><a class="header-anchor" href="#mitigating-slow-http-dos-attacks-closing-slow-connections" aria-hidden="true">#</a> 🔰 Mitigating Slow HTTP DoS attacks (Closing Slow Connections)</h3><h4 id="rationale-27" tabindex="-1"><a class="header-anchor" href="#rationale-27" aria-hidden="true">#</a> Rationale</h4><blockquote><p>Close connections that are writing data too infrequently, which can represent an attempt to keep connections open as long as possible.</p></blockquote><blockquote><p>You can close connections that are writing data too infrequently, which can represent an attempt to keep connections open as long as possible (thus reducing the server’s ability to accept new connections).</p></blockquote><h4 id="example-25" tabindex="-1"><a class="header-anchor" href="#example-25" aria-hidden="true">#</a> Example</h4><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">client_body_timeout</span> <span class="token number">10s</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">client_header_timeout</span> <span class="token number">10s</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">keepalive_timeout</span> <span class="token number">5s</span> <span class="token number">5s</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">send_timeout</span> <span class="token number">10s</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="external-resources-27" tabindex="-1"><a class="header-anchor" href="#external-resources-27" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://www.nginx.com/blog/mitigating-ddos-attacks-with-nginx-and-nginx-plus/" target="_blank" rel="noopener noreferrer">Mitigating DDoS Attacks with Nginx and Nginx Plus<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.owasp.org/index.php/SCG_WS_nginx" target="_blank" rel="noopener noreferrer">SCG WS nginx<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://blog.qualys.com/securitylabs/2011/11/02/how-to-protect-against-slow-http-attacks" target="_blank" rel="noopener noreferrer">How to Protect Against Slow HTTP Attacks<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://ma.ttias.be/effectively-using-detecting-the-slowloris-http-dos-tool/" target="_blank" rel="noopener noreferrer">Effectively Using and Detecting The Slowloris HTTP DoS Tool<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="反向代理" tabindex="-1"><a class="header-anchor" href="#反向代理" aria-hidden="true">#</a> 反向代理</h2><h3 id="使用与后端协议兼容的-pass-指令" tabindex="-1"><a class="header-anchor" href="#使用与后端协议兼容的-pass-指令" aria-hidden="true">#</a> 使用与后端协议兼容的 pass 指令</h3><blockquote><p>All <code>proxy_*</code> directives are related to the backends that use the specific backend protocol.</p></blockquote><blockquote><p>You should use <code>proxy_pass</code> only for HTTP servers working on the backend layer (set also the <code>http://</code> protocol before referencing the HTTP backend) and other <code>*_pass</code> directives only for non-HTTP backend servers (like a uWSGI or FastCGI).</p></blockquote><blockquote><p>Directives such as <code>uwsgi_pass</code>, <code>fastcgi_pass</code>, or <code>scgi_pass</code> are designed specifically for non-HTTP apps and you should use them instead of the <code>proxy_pass</code> (non-HTTP talking).</p></blockquote><blockquote><p>For example: <code>uwsgi_pass</code> uses an uwsgi protocol. <code>proxy_pass</code> uses normal HTTP to talking with uWSGI server. uWSGI docs claims that uwsgi protocol is better, faster and can benefit from all of uWSGI special features. You can send to uWSGI information what type of data you are sending and what uWSGI plugin should be invoked to generate response. With http (<code>proxy_pass</code>) you won&#39;t get that.</p></blockquote><p>示例：</p><p>❌ 错误配置</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">location</span> /app/</span> <span class="token punctuation">{</span>

    <span class="token comment">## For this, you should use uwsgi_pass directive.</span>
    <span class="token directive"><span class="token keyword">proxy_pass</span>      192.168.154.102:4000</span><span class="token punctuation">;</span>         <span class="token comment">## backend layer: uWSGI Python app.</span>

  <span class="token punctuation">}</span>

  ...

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>⭕ 正确配置</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">location</span> /app/</span> <span class="token punctuation">{</span>

    <span class="token directive"><span class="token keyword">proxy_pass</span>      http://192.168.154.102:80</span><span class="token punctuation">;</span>    <span class="token comment">## backend layer: OpenResty as a front for app.</span>

  <span class="token punctuation">}</span>

  <span class="token directive"><span class="token keyword">location</span> /app/v3</span> <span class="token punctuation">{</span>

    <span class="token directive"><span class="token keyword">uwsgi_pass</span>      192.168.154.102:8080</span><span class="token punctuation">;</span>         <span class="token comment">## backend layer: uWSGI Python app.</span>

  <span class="token punctuation">}</span>

  <span class="token directive"><span class="token keyword">location</span> /app/v4</span> <span class="token punctuation">{</span>

    <span class="token directive"><span class="token keyword">fastcgi_pass</span>    192.168.154.102:8081</span><span class="token punctuation">;</span>         <span class="token comment">## backend layer: php-fpm app.</span>

  <span class="token punctuation">}</span>
  ...

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="小心-proxy-pass-指令中的斜杠" tabindex="-1"><a class="header-anchor" href="#小心-proxy-pass-指令中的斜杠" aria-hidden="true">#</a> 小心 <code>proxy_pass</code> 指令中的斜杠</h3><blockquote><p>注意尾随斜杠，因为 Nginx 会逐字替换部分，并且您可能会得到一些奇怪的 URL。</p><p>如果 proxy_pass 不带 URI 使用（即 server:port 之后没有路径），Nginx 会将原始请求中的 URI 与所有双斜杠 <code>../</code> 完全一样。</p><p><code>proxy_pass</code> 中的 URI 就像别名指令一样，意味着 Nginx 将用 <code>proxy_pass</code> 指令中的 URI 替换与位置前缀匹配的部分（我故意将其与位置前缀相同），因此 URI 将与请求的相同，但被规范化（没有小写斜杠和其他所有内容） 员工）。</p></blockquote><p>示例：</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> = /a</span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">proxy_pass</span> http://127.0.0.1:8080/a</span><span class="token punctuation">;</span>

  ...

<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> ^~ /a/</span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">proxy_pass</span> http://127.0.0.1:8080/a/</span><span class="token punctuation">;</span>

  ...

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="仅使用-host-变量设置和传递-host-头" tabindex="-1"><a class="header-anchor" href="#仅使用-host-变量设置和传递-host-头" aria-hidden="true">#</a> 仅使用 <code>$host</code> 变量设置和传递 Host 头</h4><blockquote><p>几乎应该始终将 <code>$host</code> 用作传入的主机变量，因为无论用户代理如何行为，它都是保证具有某种意义的唯一变量，除非您特别需要其他变量之一的语义。</p><p>变量 <code>$host</code> 是请求行或http头中的主机名。 变量 <code>$server_name</code> 是我们当前所在的服务器块的名称。</p></blockquote><blockquote><p>区别：</p><ul><li><code>$host</code> 包含“按此优先顺序：请求行中的主机名，或“主机”请求标头字段中的主机名，或与请求匹配的服务器名”</li><li>如果请求中包含HTTP主机标头字段，则 <code>$http_host</code> 包含该内容（始终等于HTTP_HOST请求标头）</li><li><code>$server_name</code> contains the <code>server_name</code> of the virtual host which processed the request, as it was defined in the Nginx configuration. If a server contains multiple server names, only the first one will be present in this variable</li></ul></blockquote><blockquote><p><code>http_host</code>, moreover, is better than <code>$host:$server_port</code> because it uses the port as present in the URL, unlike <code>$server_port</code> which uses the port that Nginx listens on.</p></blockquote><p>示例：</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">proxy_set_header</span>    Host    <span class="token variable">$host</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="正确设置-x-forwarded-for-头的值" tabindex="-1"><a class="header-anchor" href="#正确设置-x-forwarded-for-头的值" aria-hidden="true">#</a> 正确设置 <code>X-Forwarded-For</code> 头的值</h3><h4 id="rationale-28" tabindex="-1"><a class="header-anchor" href="#rationale-28" aria-hidden="true">#</a> Rationale</h4><blockquote><p>In the light of the latest httpoxy vulnerabilities, there is really a need for a full example, how to use <code>HTTP_X_FORWARDED_FOR</code> properly. In short, the load balancer sets the &#39;most recent&#39; part of the header. In my opinion, for security reasons, the proxy servers must be specified by the administrator manually.</p></blockquote><blockquote><p><code>X-Forwarded-For</code> is the custom HTTP header that carries along the original IP address of a client so the app at the other end knows what it is. Otherwise it would only see the proxy IP address, and that makes some apps angry.</p></blockquote><blockquote><p>The <code>X-Forwarded-For</code> depends on the proxy server, which should actually pass the IP address of the client connecting to it. Where a connection passes through a chain of proxy servers, <code>X-Forwarded-For</code> can give a comma-separated list of IP addresses with the first being the furthest downstream (that is, the user). Because of this, servers behind proxy servers need to know which of them are trustworthy.</p></blockquote><blockquote><p>The proxy used can set this header to anything it wants to, and therefore you can&#39;t trust its value. Most proxies do set the correct value though. This header is mostly used by caching proxies, and in those cases you&#39;re in control of the proxy and can thus verify that is gives you the correct information. In all other cases its value should be considered untrustworthy.</p></blockquote><blockquote><p>Some systems also use <code>X-Forwarded-For</code> to enforce access control. A good number of applications rely on knowing the actual IP address of a client to help prevent fraud and enable access.</p></blockquote><blockquote><p>Value of the <code>X-Forwarded-For</code> header field can be set at the client&#39;s side - this can also be termed as <code>X-Forwarded-For</code> spoofing. However, when the web request is made via a proxy server, the proxy server modifies the <code>X-Forwarded-For</code> field by appending the IP address of the client (user). This will result in 2 comma separated IP addresses in the <code>X-Forwarded-For</code> field.</p></blockquote><blockquote><p>A reverse proxy is not source IP address transparent. This is a pain when you need the client source IP address to be correct in the logs of the backend servers. I think the best solution of this problem is configure the load balancer to add/modify an <code>X-Forwarded-For</code> header with the source IP of the client and forward it to the backend in the correct form.</p></blockquote><blockquote><p>Unfortunately, on the proxy side we are not able to solve this problem (all solutions can be spoofable), it is important that this header is correctly interpreted by application servers. Doing so ensures that the apps or downstream services have accurate information on which to make their decisions, including those regarding access and authorization.</p></blockquote><p>There is also an interesing idea what to do in this situation:</p><blockquote><p><em>To prevent this we must distrust that header by default and follow the IP address breadcrumbs backwards from our server. First we need to make sure the <code>REMOTE_ADDR</code> is someone we trust to have appended a proper value to the end of <code>X-Forwarded-For</code>. If so then we need to make sure we trust the <code>X-Forwarded-For</code> IP to have appended the proper IP before it, so on and so forth. Until, finally we get to an IP we don’t trust and at that point we have to assume that’s the IP of our user.</em> - it comes from <a href="https://xyu.io/2013/07/04/proxies-ip-spoofing/" target="_blank" rel="noopener noreferrer">Proxies &amp; IP Spoofing<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> by <a href="https://github.com/xyu" target="_blank" rel="noopener noreferrer">Xiao Yu<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p></blockquote><h4 id="example-26" tabindex="-1"><a class="header-anchor" href="#example-26" aria-hidden="true">#</a> Example</h4><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment">## The whole purpose that it exists is to do the appending behavior:</span>
<span class="token directive"><span class="token keyword">proxy_set_header</span>    X-Forwarded-For    <span class="token variable">$proxy_add_x_forwarded_for</span></span><span class="token punctuation">;</span>
<span class="token comment">## Above is equivalent for this:</span>
<span class="token directive"><span class="token keyword">proxy_set_header</span>    X-Forwarded-For    <span class="token variable">$http_x_forwarded_for,</span><span class="token variable">$remote_addr</span></span><span class="token punctuation">;</span>
<span class="token comment">## The following is also equivalent for above but in this example we use http_realip_module:</span>
<span class="token directive"><span class="token keyword">proxy_set_header</span>    X-Forwarded-For    <span class="token string">&quot;<span class="token variable">$http_x_forwarded_for,</span> <span class="token variable">$realip_remote_addr</span>&quot;</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="external-resources-28" tabindex="-1"><a class="header-anchor" href="#external-resources-28" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://totaluptime.com/kb/prevent-x-forwarded-for-spoofing-or-manipulation/" target="_blank" rel="noopener noreferrer">Prevent X-Forwarded-For Spoofing or Manipulation<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.sjoerdlangkemper.nl/2017/03/01/bypass-ip-block-with-x-forwarded-for-header/" target="_blank" rel="noopener noreferrer">Bypass IP blocks with the X-Forwarded-For header<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Forwarded" target="_blank" rel="noopener noreferrer">Forwarded header<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="不要在反向代理后面使用带有-scheme-的-x-forwarded-proto" tabindex="-1"><a class="header-anchor" href="#不要在反向代理后面使用带有-scheme-的-x-forwarded-proto" aria-hidden="true">#</a> 不要在反向代理后面使用带有 <code>$scheme</code> 的 <code>X-Forwarded-Proto</code></h3><blockquote><p>反向代理可以设置 <code>X-Forwarded-Proto</code>，以告知应用程序它是HTTPS还是HTTP甚至是无效名称。schema 变量仅在需要的时候才会被评估（仅用于当前请求）。</p><p>如果设置了 $schema 变量且沿途遇上多个代理，则会导致变形。例如：如果客户端转到<a href="https://example.com" target="_blank" rel="noopener noreferrer">https://example.com<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，则代理将方案值存储为HTTPS。 如果代理与下一级代理之间的通信是通过HTTP进行的，则后端会将方案视为HTTP。</p></blockquote><p>示例：</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment">## 1) client &lt;-&gt; proxy &lt;-&gt; backend</span>
<span class="token directive"><span class="token keyword">proxy_set_header</span>    X-Forwarded-Proto  <span class="token variable">$scheme</span></span><span class="token punctuation">;</span>

<span class="token comment">## 2) client &lt;-&gt; proxy &lt;-&gt; proxy &lt;-&gt; backend</span>
<span class="token comment">## proxy_set_header  X-Forwarded-Proto  https;</span>
<span class="token directive"><span class="token keyword">proxy_set_header</span>    X-Forwarded-Proto  <span class="token variable">$proxy_x_forwarded_proto</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="始终将-host-x-real-ip-和-x-forwarded-标头传递给后端" tabindex="-1"><a class="header-anchor" href="#始终将-host-x-real-ip-和-x-forwarded-标头传递给后端" aria-hidden="true">#</a> 始终将 Host，X-Real-IP 和 X-Forwarded 标头传递给后端</h4><h4 id="rationale-29" tabindex="-1"><a class="header-anchor" href="#rationale-29" aria-hidden="true">#</a> Rationale</h4><blockquote><p>When using Nginx as a reverse proxy you may want to pass through some information of the remote client to your backend web server. I think it&#39;s good practices because gives you more control of forwarded headers.</p></blockquote><blockquote><p>It&#39;s very important for servers behind proxy because it allow to interpret the client correctly. Proxies are the &quot;eyes&quot; of such servers, they should not allow a curved perception of reality. If not all requests are passed through a proxy, as a result, requests received directly from clients may contain e.g. inaccurate IP addresses in headers.</p></blockquote><blockquote><p><code>X-Forwarded</code> headers are also important for statistics or filtering. Other example could be access control rules on your app, because without these headers filtering mechanism may not working properly.</p></blockquote><blockquote><p>If you use a front-end service like Apache or whatever else as the front-end to your APIs, you will need these headers to understand what IP or hostname was used to connect to the API.</p></blockquote><blockquote><p>Forwarding these headers is also important if you use the https protocol (it has become a standard nowadays).</p></blockquote><blockquote><p>However, I would not rely on either the presence of all <code>X-Forwarded</code> headers, or the validity of their data.</p></blockquote><h4 id="example-27" tabindex="-1"><a class="header-anchor" href="#example-27" aria-hidden="true">#</a> Example</h4><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">proxy_pass</span>          http://bk_upstream_01</span><span class="token punctuation">;</span>

  <span class="token comment">## The following headers also should pass to the backend:</span>
  <span class="token comment">##   - Host - host name from the request line, or host name from the Host request header field, or the server name matching a request</span>
  <span class="token comment">## proxy_set_header  Host               $host:$server_port;</span>
  <span class="token comment">## proxy_set_header  Host               $http_host;</span>
  <span class="token directive"><span class="token keyword">proxy_set_header</span>    Host               <span class="token variable">$host</span></span><span class="token punctuation">;</span>

  <span class="token comment">##   - X-Real-IP - forwards the real visitor remote IP address to the proxied server</span>
  <span class="token directive"><span class="token keyword">proxy_set_header</span>    X-Real-IP          <span class="token variable">$remote_addr</span></span><span class="token punctuation">;</span>

  <span class="token comment">## X-Forwarded headers stack:</span>
  <span class="token comment">##   - X-Forwarded-For - mark origin IP of client connecting to server through proxy</span>
  <span class="token comment">## proxy_set_header  X-Forwarded-For    $remote_addr;</span>
  <span class="token comment">## proxy_set_header  X-Forwarded-For    $http_x_forwarded_for,$remote_addr;</span>
  <span class="token comment">## proxy_set_header  X-Forwarded-For    &quot;$http_x_forwarded_for, $realip_remote_addr&quot;;</span>
  <span class="token directive"><span class="token keyword">proxy_set_header</span>    X-Forwarded-For    <span class="token variable">$proxy_add_x_forwarded_for</span></span><span class="token punctuation">;</span>

  <span class="token comment">##   - X-Forwarded-Host - mark origin host of client connecting to server through proxy</span>
  <span class="token comment">## proxy_set_header  X-Forwarded-Host   $host:443;</span>
  <span class="token directive"><span class="token keyword">proxy_set_header</span>    X-Forwarded-Host   <span class="token variable">$host</span>:<span class="token variable">$server_port</span></span><span class="token punctuation">;</span>

  <span class="token comment">##   - X-Forwarded-Server - the hostname of the proxy server</span>
  <span class="token directive"><span class="token keyword">proxy_set_header</span>    X-Forwarded-Server <span class="token variable">$host</span></span><span class="token punctuation">;</span>

  <span class="token comment">##   - X-Forwarded-Port - defines the original port requested by the client</span>
  <span class="token comment">## proxy_set_header  X-Forwarded-Port   443;</span>
  <span class="token directive"><span class="token keyword">proxy_set_header</span>    X-Forwarded-Port   <span class="token variable">$server_port</span></span><span class="token punctuation">;</span>

  <span class="token comment">##   - X-Forwarded-Proto - mark protocol of client connecting to server through proxy</span>
  <span class="token comment">## proxy_set_header  X-Forwarded-Proto  https;</span>
  <span class="token comment">## proxy_set_header  X-Forwarded-Proto  $proxy_x_forwarded_proto;</span>
  <span class="token directive"><span class="token keyword">proxy_set_header</span>    X-Forwarded-Proto  <span class="token variable">$scheme</span></span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="prefix-使用不带-x-前缀的自定义头" tabindex="-1"><a class="header-anchor" href="#prefix-使用不带-x-前缀的自定义头" aria-hidden="true">#</a> prefix 使用不带 <code>X-</code> 前缀的自定义头</h3><h4 id="rationale-30" tabindex="-1"><a class="header-anchor" href="#rationale-30" aria-hidden="true">#</a> Rationale</h4><blockquote><p>Internet Engineering Task Force released a new RFC (<a href="https://tools.ietf.org/html/rfc6648" target="_blank" rel="noopener noreferrer">RFC-6648<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>), recommending deprecation of <code>X-</code> prefix.</p></blockquote><blockquote><p>The <code>X-</code> in front of a header name customarily has denoted it as experimental/non-standard/vendor-specific. Once it&#39;s a standard part of HTTP, it&#39;ll lose the prefix.</p></blockquote><blockquote><p>If it’s possible for new custom header to be standardized, use a non-used and meaningful header name.</p></blockquote><blockquote><p>The use of custom headers with <code>X-</code> prefix is not forbidden but discouraged. In other words, you can keep using <code>X-</code> prefixed headers, but it&#39;s not recommended and you may not document them as if they are public standard.</p></blockquote><h4 id="example-28" tabindex="-1"><a class="header-anchor" href="#example-28" aria-hidden="true">#</a> Example</h4><p>Not recommended configuration:</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">add_header</span> X-Backend-Server <span class="token variable">$hostname</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Recommended configuration:</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">add_header</span> Backend-Server   <span class="token variable">$hostname</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="external-resources-29" tabindex="-1"><a class="header-anchor" href="#external-resources-29" aria-hidden="true">#</a> External resources</h4><ul><li><a href="https://tools.ietf.org/html/draft-saintandre-xdash-00" target="_blank" rel="noopener noreferrer">Use of the &quot;X-&quot; Prefix in Application Protocols<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://stackoverflow.com/questions/3561381/custom-http-headers-naming-conventions/3561399#3561399" target="_blank" rel="noopener noreferrer">Custom HTTP headers : naming conventions<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="负载均衡" tabindex="-1"><a class="header-anchor" href="#负载均衡" aria-hidden="true">#</a> 负载均衡</h2><p>负载平衡是一种有用的机制，可将传入的流量分布在几个有能力的服务器之间。</p><h3 id="健康检查" tabindex="-1"><a class="header-anchor" href="#健康检查" aria-hidden="true">#</a> 健康检查</h3><blockquote><p>健康监控对于所有类型的负载平衡都非常重要，主要是为了业务连续性。 被动检查会按照客户端的请求监视通过 Nginx 的连接失败或超时。</p><p>默认情况下启用此功能，但是此处提到的参数允许您调整其行为。 默认值为：<code>max_fails = 1</code> 和 <code>fail_timeout = 10s</code>。</p></blockquote><p>示例：</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">upstream</span> backend</span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">server</span> bk01_node:80 max_fails=3 fail_timeout=5s</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">server</span> bk02_node:80 max_fails=3 fail_timeout=5s</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="down-参数" tabindex="-1"><a class="header-anchor" href="#down-参数" aria-hidden="true">#</a> down 参数</h3><blockquote><p>有时我们需要关闭后端，例如 在维护时。 我认为良好的解决方案是使用 down 参数将服务器标记为永久不可用，即使停机时间很短也是如此。</p><p>如果您使用 IP 哈希负载平衡技术，那也很重要。 如果其中一台服务器需要临时删除，则应使用此参数进行标记，以保留客户端 IP 地址的当前哈希值。</p><p>注释对于真正永久禁用服务器或要出于历史目的而保留信息非常有用。</p><p>Nginx 还提供了一个备份参数，将该服务器标记为备份服务器。 当主服务器不可用时，将传递请求。 仅当我确定后端将在维护时正常工作时，我才很少将此选项用于上述目的。</p></blockquote><h4 id="示例" tabindex="-1"><a class="header-anchor" href="#示例" aria-hidden="true">#</a> 示例</h4><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">upstream</span> backend</span> <span class="token punctuation">{</span>

  <span class="token directive"><span class="token keyword">server</span> bk01_node:80 max_fails=3 fail_timeout=5s down</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">server</span> bk02_node:80 max_fails=3 fail_timeout=5s</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="安全" tabindex="-1"><a class="header-anchor" href="#安全" aria-hidden="true">#</a> 安全</h2><h3 id="防盗链" tabindex="-1"><a class="header-anchor" href="#防盗链" aria-hidden="true">#</a> 防盗链</h3><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> ~* \.(gif|jpg|png)$</span> <span class="token punctuation">{</span>
    <span class="token comment"># 只允许 192.168.0.1 请求资源</span>
    <span class="token directive"><span class="token keyword">valid_referers</span> none blocked 192.168.0.1</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">if</span> (<span class="token variable">$invalid_referer</span>)</span> <span class="token punctuation">{</span>
       <span class="token directive"><span class="token keyword">rewrite</span> ^/ http://<span class="token variable">$host</span>/logo.png</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料" aria-hidden="true">#</a> 参考资料</h2><ul><li><a href="https://juejin.im/post/5d81906c518825300a3ec7ca" target="_blank" rel="noopener noreferrer">nginx 这一篇就够了<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/dunwu/waterdrop/edit/main/docs/04.DevOps/工具/Nginx/Nginx_配置.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->在 GitHub 上编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: forbreak@163.com">dunwu</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="vp-link nav-link prev" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E7%AE%80%E4%BB%8B.html"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:nginx" width="1em" height="1em"></iconify-icon>Nginx 简介</div></a><a class="vp-link nav-link next" href="/waterdrop/04.DevOps/%E5%B7%A5%E5%85%B7/Nginx/Nginx_%E8%BF%90%E7%BB%B4.html"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">Nginx 运维<iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:nginx" width="1em" height="1em"></iconify-icon></div></a></nav><div id="comment" class="waline-wrapper" darkmode="false" style="display:block;"><div data-waline provider="Waline"><!--v-if--><div class="wl-comment"><!--v-if--><div class="wl-panel"><div class="wl-header item3"><!--[--><div class="wl-header-item"><label for="wl-nick">昵称</label><input id="wl-nick" class="wl-input wl-nick" name="nick" type="text" value></div><div class="wl-header-item"><label for="wl-mail">邮箱</label><input id="wl-mail" class="wl-input wl-mail" name="mail" type="email" value></div><div class="wl-header-item"><label for="wl-link">网址</label><input id="wl-link" class="wl-input wl-link" name="link" type="text" value></div><!--]--></div><textarea id="wl-edit" class="wl-editor" placeholder="请留言。(填写邮箱可在被回复时收到邮件提醒)"></textarea><div class="wl-preview" style="display:none;"><hr><h4>预览:</h4><div class="wl-content"></div></div><div class="wl-footer"><div class="wl-actions"><a href="https://guides.github.com/features/mastering-markdown/" title="Markdown Guide" aria-label="Markdown is supported" class="wl-action" target="_blank" rel="noopener noreferrer"><svg width="16" height="16" ariaHidden="true"><path d="M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z" fill="currentColor"></path></svg></a><button type="button" class="wl-action" title="表情" style="display:none;"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M563.2 463.3 677 540c1.7 1.2 3.7 1.8 5.8 1.8.7 0 1.4-.1 2-.2 2.7-.5 5.1-2.1 6.6-4.4l25.3-37.8c1.5-2.3 2.1-5.1 1.6-7.8s-2.1-5.1-4.4-6.6l-73.6-49.1 73.6-49.1c2.3-1.5 3.9-3.9 4.4-6.6.5-2.7 0-5.5-1.6-7.8l-25.3-37.8a10.1 10.1 0 0 0-6.6-4.4c-.7-.1-1.3-.2-2-.2-2.1 0-4.1.6-5.8 1.8l-113.8 76.6c-9.2 6.2-14.7 16.4-14.7 27.5.1 11 5.5 21.3 14.7 27.4zM387 348.8h-45.5c-5.7 0-10.4 4.7-10.4 10.4v153.3c0 5.7 4.7 10.4 10.4 10.4H387c5.7 0 10.4-4.7 10.4-10.4V359.2c0-5.7-4.7-10.4-10.4-10.4zm333.8 241.3-41-20a10.3 10.3 0 0 0-8.1-.5c-2.6.9-4.8 2.9-5.9 5.4-30.1 64.9-93.1 109.1-164.4 115.2-5.7.5-9.9 5.5-9.5 11.2l3.9 45.5c.5 5.3 5 9.5 10.3 9.5h.9c94.8-8 178.5-66.5 218.6-152.7 2.4-5 .3-11.2-4.8-13.6zm186-186.1c-11.9-42-30.5-81.4-55.2-117.1-24.1-34.9-53.5-65.6-87.5-91.2-33.9-25.6-71.5-45.5-111.6-59.2-41.2-14-84.1-21.1-127.8-21.1h-1.2c-75.4 0-148.8 21.4-212.5 61.7-63.7 40.3-114.3 97.6-146.5 165.8-32.2 68.1-44.3 143.6-35.1 218.4 9.3 74.8 39.4 145 87.3 203.3.1.2.3.3.4.5l36.2 38.4c1.1 1.2 2.5 2.1 3.9 2.6 73.3 66.7 168.2 103.5 267.5 103.5 73.3 0 145.2-20.3 207.7-58.7 37.3-22.9 70.3-51.5 98.1-85 27.1-32.7 48.7-69.5 64.2-109.1 15.5-39.7 24.4-81.3 26.6-123.8 2.4-43.6-2.5-87-14.5-129zm-60.5 181.1c-8.3 37-22.8 72-43 104-19.7 31.1-44.3 58.6-73.1 81.7-28.8 23.1-61 41-95.7 53.4-35.6 12.7-72.9 19.1-110.9 19.1-82.6 0-161.7-30.6-222.8-86.2l-34.1-35.8c-23.9-29.3-42.4-62.2-55.1-97.7-12.4-34.7-18.8-71-19.2-107.9-.4-36.9 5.4-73.3 17.1-108.2 12-35.8 30-69.2 53.4-99.1 31.7-40.4 71.1-72 117.2-94.1 44.5-21.3 94-32.6 143.4-32.6 49.3 0 97 10.8 141.8 32 34.3 16.3 65.3 38.1 92 64.8 26.1 26 47.5 56 63.6 89.2 16.2 33.2 26.6 68.5 31 105.1 4.6 37.5 2.7 75.3-5.6 112.3z" fill="currentColor"></path></svg></button><button type="button" class="wl-action" title="表情包"><svg width="24" height="24" fill="currentcolor" viewBox="0 0 24 24"><path style="transform: translateY(0.5px)" d="M18.968 10.5H15.968V11.484H17.984V12.984H15.968V15H14.468V9H18.968V10.5V10.5ZM8.984 9C9.26533 9 9.49967 9.09367 9.687 9.281C9.87433 9.46833 9.968 9.70267 9.968 9.984V10.5H6.499V13.5H8.468V12H9.968V14.016C9.968 14.2973 9.87433 14.5317 9.687 14.719C9.49967 14.9063 9.26533 15 8.984 15H5.984C5.70267 15 5.46833 14.9063 5.281 14.719C5.09367 14.5317 5 14.2973 5 14.016V9.985C5 9.70367 5.09367 9.46933 5.281 9.282C5.46833 9.09467 5.70267 9.001 5.984 9.001H8.984V9ZM11.468 9H12.968V15H11.468V9V9Z"></path><path d="M18.5 3H5.75C3.6875 3 2 4.6875 2 6.75V18C2 20.0625 3.6875 21.75 5.75 21.75H18.5C20.5625 21.75 22.25 20.0625 22.25 18V6.75C22.25 4.6875 20.5625 3 18.5 3ZM20.75 18C20.75 19.2375 19.7375 20.25 18.5 20.25H5.75C4.5125 20.25 3.5 19.2375 3.5 18V6.75C3.5 5.5125 4.5125 4.5 5.75 4.5H18.5C19.7375 4.5 20.75 5.5125 20.75 6.75V18Z"></path></svg></button><input id="wl-image-upload" class="upload" type="file" accept=".png,.jpg,.jpeg,.webp,.bmp,.gif"><label for="wl-image-upload" class="wl-action" title="上传图片"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M784 112H240c-88 0-160 72-160 160v480c0 88 72 160 160 160h544c88 0 160-72 160-160V272c0-88-72-160-160-160zm96 640c0 52.8-43.2 96-96 96H240c-52.8 0-96-43.2-96-96V272c0-52.8 43.2-96 96-96h544c52.8 0 96 43.2 96 96v480z" fill="currentColor"></path><path d="M352 480c52.8 0 96-43.2 96-96s-43.2-96-96-96-96 43.2-96 96 43.2 96 96 96zm0-128c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm462.4 379.2-3.2-3.2-177.6-177.6c-25.6-25.6-65.6-25.6-91.2 0l-80 80-36.8-36.8c-25.6-25.6-65.6-25.6-91.2 0L200 728c-4.8 6.4-8 14.4-8 24 0 17.6 14.4 32 32 32 9.6 0 16-3.2 22.4-9.6L380.8 640l134.4 134.4c6.4 6.4 14.4 9.6 24 9.6 17.6 0 32-14.4 32-32 0-9.6-4.8-17.6-9.6-24l-52.8-52.8 80-80L769.6 776c6.4 4.8 12.8 8 20.8 8 17.6 0 32-14.4 32-32 0-8-3.2-16-8-20.8z" fill="currentColor"></path></svg></label><button type="button" class="wl-action" title="预览"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M710.816 654.301c70.323-96.639 61.084-230.578-23.705-314.843-46.098-46.098-107.183-71.109-172.28-71.109-65.008 0-126.092 25.444-172.28 71.109-45.227 46.098-70.756 107.183-70.756 172.106 0 64.923 25.444 126.007 71.194 172.106 46.099 46.098 107.184 71.109 172.28 71.109 51.414 0 100.648-16.212 142.824-47.404l126.53 126.006c7.058 7.06 16.297 10.979 26.406 10.979 10.105 0 19.343-3.919 26.402-10.979 14.467-14.467 14.467-38.172 0-52.723L710.816 654.301zm-315.107-23.265c-65.88-65.88-65.88-172.54 0-238.42 32.069-32.07 74.245-49.149 119.471-49.149 45.227 0 87.407 17.603 119.472 49.149 65.88 65.879 65.88 172.539 0 238.42-63.612 63.178-175.242 63.178-238.943 0zm0 0" fill="currentColor"></path><path d="M703.319 121.603H321.03c-109.8 0-199.469 89.146-199.469 199.38v382.034c0 109.796 89.236 199.38 199.469 199.38h207.397c20.653 0 37.384-16.645 37.384-37.299 0-20.649-16.731-37.296-37.384-37.296H321.03c-68.582 0-124.352-55.77-124.352-124.267V321.421c0-68.496 55.77-124.267 124.352-124.267h382.289c68.582 0 124.352 55.771 124.352 124.267V524.72c0 20.654 16.736 37.299 37.385 37.299 20.654 0 37.384-16.645 37.384-37.299V320.549c-.085-109.8-89.321-198.946-199.121-198.946zm0 0" fill="currentColor"></path></svg></button></div><div class="wl-info"><div class="wl-captcha-container"></div><div class="wl-text-number">0 <!--v-if-->  字</div><button type="button" class="wl-btn">登录</button><button type="submit" class="primary wl-btn" title="Cmd|Ctrl + Enter"><!--[-->提交<!--]--></button></div><div class="wl-gif-popup"><input type="text" placeholder="搜索表情包"><!--v-if--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div></div><div class="wl-emoji-popup"><!--[--><!--]--><!--v-if--></div></div></div><!--v-if--></div><div class="wl-meta-head"><div class="wl-count"><!--v-if--> 评论</div><ul class="wl-sort"><!--[--><li class="active">按正序</li><li class="">按倒序</li><li class="">按热度</li><!--]--></ul></div><div class="wl-cards"><!--[--><!--]--></div><!--[--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div><!--]--><div class="wl-power"> Powered by <a href="https://github.com/walinejs/waline" target="_blank" rel="noopener noreferrer"> Waline </a> v2.15.7</div></div></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><!----><div class="vp-copyright">Copyright © 2025 钝悟</div></footer></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/waterdrop/assets/app-c4d395b2.js" defer></script>
  </body>
</html>
