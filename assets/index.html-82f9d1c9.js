import{_ as t}from"./plugin-vue_export-helper-c27b6911.js";import{r as l,o as p,c as r,a as s,b as n,d as e,e as d}from"./app-1c9286fd.js";const o={},i=s("h1",{id:"postgresql",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#postgresql","aria-hidden":"true"},"#"),n(" PostgreSQL")],-1),c={href:"https://www.postgresql.org/",target:"_blank",rel:"noopener noreferrer"},u=s("p",null,"å…³é”®è¯ï¼šDatabase, RDBM, psql",-1),m=s("figure",null,[s("img",{src:"https://raw.githubusercontent.com/dunwu/images/master/snap/20180920181010182614.png",alt:"img",tabindex:"0",loading:"lazy"}),s("figcaption",null,"img")],-1),k=s("h2",{id:"å®‰è£…",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#å®‰è£…","aria-hidden":"true"},"#"),n(" å®‰è£…")],-1),v=s("blockquote",null,[s("p",null,"æœ¬æ–‡ä»…ä»¥è¿è¡Œåœ¨ Centos ç¯å¢ƒä¸‹ä¸¾ä¾‹ã€‚")],-1),b={href:"https://www.postgresql.org/download/",target:"_blank",rel:"noopener noreferrer"},g=d(`<p>å®˜æ–¹ä¸‹è½½é¡µé¢è¦æ±‚ç”¨æˆ·é€‰æ‹©ç›¸åº”ç‰ˆæœ¬ï¼Œç„¶ååŠ¨æ€çš„ç»™å‡ºå®‰è£…æç¤ºï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><figure><img src="https://raw.githubusercontent.com/dunwu/images/master/snap/20180920181010174348.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>å‰ 3 æ­¥è¦æ±‚ç”¨æˆ·é€‰æ‹©ï¼Œå 4 æ­¥æ˜¯æ ¹æ®é€‰æ‹©åŠ¨æ€æç¤ºçš„å®‰è£…æ­¥éª¤</p><p>ï¼ˆ1ï¼‰é€‰æ‹© PostgreSQL ç‰ˆæœ¬</p><p>ï¼ˆ2ï¼‰é€‰æ‹©å¹³å°</p><p>ï¼ˆ3ï¼‰é€‰æ‹©æ¶æ„</p><p>ï¼ˆ4ï¼‰å®‰è£… PostgreSQL çš„ rpm ä»“åº“ï¼ˆä¸ºäº†è¯†åˆ«ä¸‹è½½æºï¼‰</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum <span class="token function">install</span> https://download.postgresql.org/pub/repos/yum/10/redhat/rhel-7-x86_64/pgdg-centos10-10-2.noarch.rpm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ï¼ˆ5ï¼‰å®‰è£…å®¢æˆ·ç«¯</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum <span class="token function">install</span> postgresql10
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ï¼ˆ6ï¼‰å®‰è£…æœåŠ¡ç«¯ï¼ˆå¯é€‰çš„ï¼‰</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum <span class="token function">install</span> postgresql10-server
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ï¼ˆ7ï¼‰è®¾ç½®å¼€æœºå¯åŠ¨ï¼ˆå¯é€‰çš„ï¼‰</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>/usr/pgsql-10/bin/postgresql-10-setup initdb
systemctl <span class="token builtin class-name">enable</span> postgresql-10
systemctl start postgresql-10
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ·»åŠ æ–°ç”¨æˆ·å’Œæ–°æ•°æ®åº“" tabindex="-1"><a class="header-anchor" href="#æ·»åŠ æ–°ç”¨æˆ·å’Œæ–°æ•°æ®åº“" aria-hidden="true">#</a> æ·»åŠ æ–°ç”¨æˆ·å’Œæ–°æ•°æ®åº“</h2><p>åˆæ¬¡å®‰è£…åï¼Œé»˜è®¤ç”Ÿæˆä¸€ä¸ªåä¸º postgres çš„æ•°æ®åº“å’Œä¸€ä¸ªåä¸º postgres çš„æ•°æ®åº“ç”¨æˆ·ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒåŒæ—¶è¿˜ç”Ÿæˆäº†ä¸€ä¸ªåä¸º postgres çš„ Linux ç³»ç»Ÿç”¨æˆ·ã€‚</p><p>é¦–å…ˆï¼Œæ–°å»ºä¸€ä¸ª Linux æ–°ç”¨æˆ·ï¼Œå¯ä»¥å–ä½ æƒ³è¦çš„åå­—ï¼Œè¿™é‡Œä¸º dbuserã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>sudo adduser dbuser
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä½¿ç”¨ psql å‘½ä»¤ç™»å½• PostgreSQL æ§åˆ¶å°ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>sudo -u postgres psql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™æ—¶ç›¸å½“äºç³»ç»Ÿç”¨æˆ· postgres ä»¥åŒåæ•°æ®åº“ç”¨æˆ·çš„èº«ä»½ï¼Œç™»å½•æ•°æ®åº“ï¼Œè¿™æ˜¯ä¸ç”¨è¾“å…¥å¯†ç çš„ã€‚å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œç³»ç»Ÿæç¤ºç¬¦ä¼šå˜ä¸º&quot;postgres=#&quot;ï¼Œè¡¨ç¤ºè¿™æ—¶å·²ç»è¿›å…¥äº†æ•°æ®åº“æ§åˆ¶å°ã€‚ä»¥ä¸‹çš„å‘½ä»¤éƒ½åœ¨æ§åˆ¶å°å†…å®Œæˆã€‚</p><p>ï¼ˆ1ï¼‰ä½¿ç”¨ <code>\\password</code> å‘½ä»¤ï¼Œä¸º postgres ç”¨æˆ·è®¾ç½®ä¸€ä¸ªå¯†ç ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>postgres=# \\password postgres
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ï¼ˆ2ï¼‰åˆ›å»ºæ•°æ®åº“ç”¨æˆ· dbuserï¼ˆåˆšæ‰åˆ›å»ºçš„æ˜¯ Linux ç³»ç»Ÿç”¨æˆ·ï¼‰ï¼Œå¹¶è®¾ç½®å¯†ç ã€‚</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> dbuser <span class="token keyword">WITH</span> PASSWORD <span class="token string">&#39;password&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ï¼ˆ3ï¼‰åˆ›å»ºç”¨æˆ·æ•°æ®åº“ï¼Œè¿™é‡Œä¸º exampledbï¼Œå¹¶æŒ‡å®šæ‰€æœ‰è€…ä¸º dbuserã€‚</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> exampledb OWNER dbuser<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ï¼ˆ4ï¼‰å°† exampledb æ•°æ®åº“çš„æ‰€æœ‰æƒé™éƒ½èµ‹äºˆ dbuserï¼Œå¦åˆ™ dbuser åªèƒ½ç™»å½•æ§åˆ¶å°ï¼Œæ²¡æœ‰ä»»ä½•æ•°æ®åº“æ“ä½œæƒé™ã€‚</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token keyword">DATABASE</span> exampledb <span class="token keyword">to</span> dbuser<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ï¼ˆ5ï¼‰ä½¿ç”¨\\q å‘½ä»¤é€€å‡ºæ§åˆ¶å°ï¼ˆä¹Ÿå¯ä»¥ç›´æ¥æŒ‰ ctrl+Dï¼‰ã€‚</p><h2 id="ç™»å½•æ•°æ®åº“" tabindex="-1"><a class="header-anchor" href="#ç™»å½•æ•°æ®åº“" aria-hidden="true">#</a> ç™»å½•æ•°æ®åº“</h2><p>æ·»åŠ æ–°ç”¨æˆ·å’Œæ–°æ•°æ®åº“ä»¥åï¼Œå°±è¦ä»¥æ–°ç”¨æˆ·çš„åä¹‰ç™»å½•æ•°æ®åº“ï¼Œè¿™æ—¶ä½¿ç”¨çš„æ˜¯ psql å‘½ä»¤ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>psql -U dbuser -d exampledb -h 127.0.0.1 -p 5432
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸Šé¢å‘½ä»¤çš„å‚æ•°å«ä¹‰å¦‚ä¸‹ï¼š-U æŒ‡å®šç”¨æˆ·ï¼Œ-d æŒ‡å®šæ•°æ®åº“ï¼Œ-h æŒ‡å®šæœåŠ¡å™¨ï¼Œ-p æŒ‡å®šç«¯å£ã€‚</p><p>è¾“å…¥ä¸Šé¢å‘½ä»¤ä»¥åï¼Œç³»ç»Ÿä¼šæç¤ºè¾“å…¥ dbuser ç”¨æˆ·çš„å¯†ç ã€‚è¾“å…¥æ­£ç¡®ï¼Œå°±å¯ä»¥ç™»å½•æ§åˆ¶å°äº†ã€‚</p><p>psql å‘½ä»¤å­˜åœ¨ç®€å†™å½¢å¼ã€‚å¦‚æœå½“å‰ Linux ç³»ç»Ÿç”¨æˆ·ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ PostgreSQL ç”¨æˆ·ï¼Œåˆ™å¯ä»¥çœç•¥ç”¨æˆ·åï¼ˆ-U å‚æ•°çš„éƒ¨åˆ†ï¼‰ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘çš„ Linux ç³»ç»Ÿç”¨æˆ·åä¸º ruanyfï¼Œä¸” PostgreSQL æ•°æ®åº“å­˜åœ¨åŒåç”¨æˆ·ï¼Œåˆ™æˆ‘ä»¥ ruanyf èº«ä»½ç™»å½• Linux ç³»ç»Ÿåï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ç™»å½•æ•°æ®åº“ï¼Œä¸”ä¸éœ€è¦å¯†ç ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>psql exampledb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ­¤æ—¶ï¼Œå¦‚æœ PostgreSQL å†…éƒ¨è¿˜å­˜åœ¨ä¸å½“å‰ç³»ç»Ÿç”¨æˆ·åŒåçš„æ•°æ®åº“ï¼Œåˆ™è¿æ•°æ®åº“åéƒ½å¯ä»¥çœç•¥ã€‚æ¯”å¦‚ï¼Œå‡å®šå­˜åœ¨ä¸€ä¸ªå«åš ruanyf çš„æ•°æ®åº“ï¼Œåˆ™ç›´æ¥é”®å…¥ psql å°±å¯ä»¥ç™»å½•è¯¥æ•°æ®åº“ã€‚</p><p>psql</p><p>å¦å¤–ï¼Œå¦‚æœè¦æ¢å¤å¤–éƒ¨æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>psql exampledb &lt; exampledb.sql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="æ§åˆ¶å°å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#æ§åˆ¶å°å‘½ä»¤" aria-hidden="true">#</a> æ§åˆ¶å°å‘½ä»¤</h2><p>é™¤äº†å‰é¢å·²ç»ç”¨åˆ°çš„ \\password å‘½ä»¤ï¼ˆè®¾ç½®å¯†ç ï¼‰å’Œ \\q å‘½ä»¤ï¼ˆé€€å‡ºï¼‰ä»¥å¤–ï¼Œæ§åˆ¶å°è¿˜æä¾›ä¸€ç³»åˆ—å…¶ä»–å‘½ä»¤ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>\\password           è®¾ç½®å¯†ç 
\\q                  é€€å‡º
\\h                  æŸ¥çœ‹SQLå‘½ä»¤çš„è§£é‡Šï¼Œæ¯”å¦‚\\h select
\\?                  æŸ¥çœ‹psqlå‘½ä»¤åˆ—è¡¨
\\l                  åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“
\\c [database_name]  è¿æ¥å…¶ä»–æ•°æ®åº“
\\d                  åˆ—å‡ºå½“å‰æ•°æ®åº“çš„æ‰€æœ‰è¡¨æ ¼
\\d [table_name]     åˆ—å‡ºæŸä¸€å¼ è¡¨æ ¼çš„ç»“æ„
\\x                  å¯¹æ•°æ®åšå±•å¼€æ“ä½œ
\\du                 åˆ—å‡ºæ‰€æœ‰ç”¨æˆ·
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ•°æ®åº“æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#æ•°æ®åº“æ“ä½œ" aria-hidden="true">#</a> æ•°æ®åº“æ“ä½œ</h2><p>åŸºæœ¬çš„æ•°æ®åº“æ“ä½œï¼Œå°±æ˜¯ä½¿ç”¨ä¸€èˆ¬çš„ SQL è¯­è¨€ã€‚</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># åˆ›å»ºæ–°è¡¨</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> user_tbl<span class="token punctuation">(</span>name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> signup_date <span class="token keyword">DATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># æ’å…¥æ•°æ®</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> user_tbl<span class="token punctuation">(</span>name<span class="token punctuation">,</span> signup_date<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">&#39;å¼ ä¸‰&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2013-12-22&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># é€‰æ‹©è®°å½•</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> user_tbl<span class="token punctuation">;</span>
<span class="token comment"># æ›´æ–°æ•°æ®</span>
<span class="token keyword">UPDATE</span> user_tbl <span class="token keyword">set</span> name <span class="token operator">=</span> <span class="token string">&#39;æå››&#39;</span> <span class="token keyword">WHERE</span> name <span class="token operator">=</span> <span class="token string">&#39;å¼ ä¸‰&#39;</span><span class="token punctuation">;</span>
<span class="token comment"># åˆ é™¤è®°å½•</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> user_tbl <span class="token keyword">WHERE</span> name <span class="token operator">=</span> <span class="token string">&#39;æå››&#39;</span> <span class="token punctuation">;</span>
<span class="token comment"># æ·»åŠ æ ä½</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> user_tbl <span class="token keyword">ADD</span> email <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># æ›´æ–°ç»“æ„</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> user_tbl <span class="token keyword">ALTER</span> <span class="token keyword">COLUMN</span> signup_date <span class="token keyword">SET</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
<span class="token comment"># æ›´åæ ä½</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> user_tbl <span class="token keyword">RENAME</span> <span class="token keyword">COLUMN</span> signup_date <span class="token keyword">TO</span> signup<span class="token punctuation">;</span>
<span class="token comment"># åˆ é™¤æ ä½</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> user_tbl <span class="token keyword">DROP</span> <span class="token keyword">COLUMN</span> email<span class="token punctuation">;</span>
<span class="token comment"># è¡¨æ ¼æ›´å</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> user_tbl <span class="token keyword">RENAME</span> <span class="token keyword">TO</span> backup_tbl<span class="token punctuation">;</span>
<span class="token comment"># åˆ é™¤è¡¨æ ¼</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> backup_tbl<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å¤‡ä»½å’Œæ¢å¤" tabindex="-1"><a class="header-anchor" href="#å¤‡ä»½å’Œæ¢å¤" aria-hidden="true">#</a> å¤‡ä»½å’Œæ¢å¤</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>pg_dump <span class="token parameter variable">--format</span><span class="token operator">=</span>t <span class="token parameter variable">-d</span> db_name <span class="token parameter variable">-U</span> user_name <span class="token parameter variable">-h</span> <span class="token number">127.0</span>.0.1 <span class="token parameter variable">-O</span> <span class="token parameter variable">-W</span>  <span class="token operator">&gt;</span> dump.sql
psql <span class="token parameter variable">-h</span> <span class="token number">127.0</span>.0.1 <span class="token parameter variable">-U</span> user_name db_name <span class="token operator">&lt;</span> dump.sql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å‚è€ƒèµ„æ–™" tabindex="-1"><a class="header-anchor" href="#å‚è€ƒèµ„æ–™" aria-hidden="true">#</a> å‚è€ƒèµ„æ–™</h2>`,50),h={href:"https://www.postgresql.org/download/",target:"_blank",rel:"noopener noreferrer"},w={href:"http://www.ruanyifeng.com/blog/2013/12/getting_started_with_postgresql.html",target:"_blank",rel:"noopener noreferrer"},_=s("h2",{id:"ğŸšª-ä¼ é€",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#ğŸšª-ä¼ é€","aria-hidden":"true"},"#"),n(" ğŸšª ä¼ é€")],-1),x={href:"https://dunwu.github.io/waterdrop/",target:"_blank",rel:"noopener noreferrer"};function y(q,E){const a=l("ExternalLinkIcon");return p(),r("div",null,[i,s("blockquote",null,[s("p",null,[s("a",c,[n("PostgreSQL"),e(a)]),n(" æ˜¯ä¸€ä¸ªå…³ç³»å‹æ•°æ®åº“ï¼ˆRDBMï¼‰ã€‚")]),u]),m,k,v,s("p",null,[n("è¿›å…¥"),s("a",b,[n("å®˜æ–¹ä¸‹è½½é¡µé¢"),e(a)]),n("ï¼Œæ ¹æ®æ“ä½œç³»ç»Ÿé€‰æ‹©åˆé€‚ç‰ˆæœ¬ã€‚")]),g,s("ul",null,[s("li",null,[s("a",h,[n("https://www.postgresql.org/download/"),e(a)])]),s("li",null,[s("a",w,[n("http://www.ruanyifeng.com/blog/2013/12/getting_started_with_postgresql.html"),e(a)])])]),_,s("p",null,[n("â—¾ ğŸ’§ "),s("a",x,[n("é’æ‚Ÿçš„ IT çŸ¥è¯†å›¾è°±"),e(a)]),n(" â—¾")])])}const A=t(o,[["render",y],["__file","index.html.vue"]]);export{A as default};
