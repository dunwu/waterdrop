import{_ as e}from"./plugin-vue_export-helper-c27b6911.js";import{r as o,o as r,c as l,f as c,a as n,d as p,b as s,e as t}from"./app-6ed3f423.js";const i={},u=t('<h1 id="mongodb-crud" tabindex="-1"><a class="header-anchor" href="#mongodb-crud" aria-hidden="true">#</a> MongoDB CRUD</h1><div class="hint-container info"><p class="hint-container-title">概述</p><p><strong>CRUD</strong> 由英文单词 <strong>C</strong>reate, <strong>R</strong>ead, <strong>U</strong>pdate, <strong>D</strong>elete 的首字母组成，即<strong>增删改查</strong>。</p><p>本文通过介绍基本的 MongoDB CRUD 方法，向读者呈现如何访问 MongoDB 数据。</p></div>',2),k=n("h2",{id:"插入操作",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#插入操作","aria-hidden":"true"},"#"),s(" 插入操作")],-1),d=n("p",null,"MongoDB 提供了以下方法将文档插入集合：",-1),m={href:"https://docs.mongodb.com/manual/reference/method/db.collection.insertOne/#db.collection.insertOne",target:"_blank",rel:"noopener noreferrer"},b=n("code",null,"db.collection.insertOne()",-1),y={href:"https://docs.mongodb.com/manual/reference/method/db.collection.insertMany/#db.collection.insertMany",target:"_blank",rel:"noopener noreferrer"},v=n("code",null,"db.collection.insertMany()",-1),h=t(`<figure><img src="https://raw.githubusercontent.com/dunwu/images/master/snap/20200924112342.svg" alt="插入操作" tabindex="0" loading="lazy"><figcaption>插入操作</figcaption></figure><p>插入操作的特性：</p><ul><li>MongoDB 中的所有写入操作在单个文档级别上都是原子的。</li><li>如果要插入的 collection 当前不存在，则插入操作会自动创建 collection。</li><li>如果文档未指定 <code>_id</code> 字段，则 MongoDB 会将 <code>_id</code> 字段添加 ObjectId 值到新文档中。</li><li>可以 MongoDB 写入操作的确认级别来控制写入行为。</li></ul><p>【示例】插入一条 document 示例</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>inventory<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;canvas&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>【示例】插入多条 document 示例</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>inventory<span class="token punctuation">.</span><span class="token function">insertMany</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;journal&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span>
    <span class="token literal-property property">tags</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;blank&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;red&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;mat&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">85</span><span class="token punctuation">,</span>
    <span class="token literal-property property">tags</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;gray&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">27.9</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">35.5</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;mousepad&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span>
    <span class="token literal-property property">tags</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;gel&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;blue&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">22.85</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7),g={href:"https://www.mongodb.com/zh-cn/docs/manual/tutorial/insert-documents/",target:"_blank",rel:"noopener noreferrer"},_=n("h2",{id:"查询操作",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#查询操作","aria-hidden":"true"},"#"),s(" 查询操作")],-1),f={href:"https://www.mongodb.com/zh-cn/docs/manual/reference/method/db.collection.find/#mongodb-method-db.collection.find",target:"_blank",rel:"noopener noreferrer"},w=n("code",null,"db.collection.find()",-1),M=t(`<figure><img src="https://raw.githubusercontent.com/dunwu/images/master/snap/20200924113832.svg" alt="查询操作" tabindex="0" loading="lazy"><figcaption>查询操作</figcaption></figure><p>可以在 <code>{}</code> 中指定查询条件来查找要匹配的数据。如果 <code>{}</code> 为空，则会返回集合中的所有文档。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>inventory<span class="token punctuation">.</span><span class="token function">insertMany</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;journal&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;A&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;notebook&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
    <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">8.5</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;in&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;A&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;paper&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">8.5</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;in&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;D&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;planner&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">75</span><span class="token punctuation">,</span>
    <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">22.85</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;D&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;postcard&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">45</span><span class="token punctuation">,</span>
    <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">15.25</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;A&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// 查询集合中所有文档</span>
db<span class="token punctuation">.</span>inventory<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 查询集合所有 status 等于 &quot;D&quot; 的文档</span>
db<span class="token punctuation">.</span>inventory<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;D&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3),D={href:"https://www.mongodb.com/zh-cn/docs/manual/tutorial/query-documents/",target:"_blank",rel:"noopener noreferrer"},z=n("h2",{id:"更新操作",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#更新操作","aria-hidden":"true"},"#"),s(" 更新操作")],-1),x=n("p",null,"MongoDB 提供以下操作来更新集合中的文档：",-1),j={href:"https://docs.mongodb.com/manual/reference/method/db.collection.updateOne/#db.collection.updateOne",target:"_blank",rel:"noopener noreferrer"},O=n("code",null,"db.collection.updateOne()",-1),q={href:"https://docs.mongodb.com/manual/reference/method/db.collection.updateMany/#db.collection.updateMany",target:"_blank",rel:"noopener noreferrer"},B=n("code",null,"db.collection.updateMany()",-1),W={href:"https://docs.mongodb.com/manual/reference/method/db.collection.replaceOne/#db.collection.replaceOne",target:"_blank",rel:"noopener noreferrer"},A=n("code",null,"db.collection.replaceOne()",-1),C=n("p",null,"语法格式：",-1),R={href:"https://docs.mongodb.com/manual/reference/method/db.collection.updateOne/#db.collection.updateOne",target:"_blank",rel:"noopener noreferrer"},U=n("code",null,"db.collection.updateOne(<filter>, <update>, <options>)",-1),$={href:"https://docs.mongodb.com/manual/reference/method/db.collection.updateMany/#db.collection.updateMany",target:"_blank",rel:"noopener noreferrer"},N=n("code",null,"db.collection.updateMany(<filter>, <update>, <options>)",-1),V={href:"https://docs.mongodb.com/manual/reference/method/db.collection.replaceOne/#db.collection.replaceOne",target:"_blank",rel:"noopener noreferrer"},P=n("code",null,"db.collection.replaceOne(<filter>, <update>, <options>)",-1),E=t(`<figure><img src="https://raw.githubusercontent.com/dunwu/images/master/snap/20200924114043.svg" alt="更新操作" tabindex="0" loading="lazy"><figcaption>更新操作</figcaption></figure><p>【示例】插入测试数据</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>inventory<span class="token punctuation">.</span><span class="token function">insertMany</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;canvas&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">35.5</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;A&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;journal&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;A&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;mat&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">85</span><span class="token punctuation">,</span> <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">27.9</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">35.5</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;A&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;mousepad&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span>
    <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">22.85</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;P&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;notebook&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
    <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">8.5</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;in&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;P&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;paper&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">8.5</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;in&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;D&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;planner&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">75</span><span class="token punctuation">,</span>
    <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">22.85</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;D&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;postcard&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">45</span><span class="token punctuation">,</span>
    <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">15.25</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;A&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;sketchbook&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span>
    <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;A&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;sketch pad&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">95</span><span class="token punctuation">,</span>
    <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">22.85</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">30.5</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;A&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>【示例】更新一条 document</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>inventory<span class="token punctuation">.</span><span class="token function">updateOne</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;paper&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">$set</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;size.uom&#39;</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;P&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">$currentDate</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">lastModified</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>【示例】更新多条 document</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>inventory<span class="token punctuation">.</span><span class="token function">updateMany</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">$lt</span><span class="token operator">:</span> <span class="token number">50</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">$set</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;size.uom&#39;</span><span class="token operator">:</span> <span class="token string">&#39;in&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;P&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">$currentDate</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">lastModified</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>【示例】替换一条 document</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>inventory<span class="token punctuation">.</span><span class="token function">replaceOne</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;paper&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;paper&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">instock</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">warehouse</span><span class="token operator">:</span> <span class="token string">&#39;A&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">60</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">warehouse</span><span class="token operator">:</span> <span class="token string">&#39;B&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">40</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>更新操作的特性：</p>`,10),I=n("li",null,"MongoDB 中的所有写入操作在单个文档级别上都是原子性的。",-1),S={href:"https://docs.mongodb.com/manual/reference/glossary/#term-id",target:"_blank",rel:"noopener noreferrer"},L=n("code",null,"_id",-1),T=n("li",null,[s("除以下情况外，MongoDB 会在执行写操作后保留文档字段的顺序： "),n("ul",null,[n("li",null,[n("code",null,"_id"),s(" 字段始终是文档中的第一个字段。")]),n("li",null,"包括重命名字段名称的更新可能导致文档中字段的重新排序。")])],-1),F=n("li",null,[s("如果更新操作中包含 "),n("code",null,"upsert : true"),s(" 并且没有 document 匹配过滤器，MongoDB 会新插入一个 document；如果有匹配的 document，MongoDB 会修改或替换这些 document。")],-1),G=n("h2",{id:"删除操作",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#删除操作","aria-hidden":"true"},"#"),s(" 删除操作")],-1),H=n("p",null,"MongoDB 提供了以下操作来删除集合中的文档：",-1),J={href:"https://docs.mongodb.com/manual/reference/method/db.collection.deleteOne/#db.collection.deleteOne",target:"_blank",rel:"noopener noreferrer"},K=n("code",null,"db.collection.deleteOne()",-1),Q={href:"https://docs.mongodb.com/manual/reference/method/db.collection.deleteMany/#db.collection.deleteMany",target:"_blank",rel:"noopener noreferrer"},X=n("code",null,"db.collection.deleteMany()",-1),Y=t(`<figure><img src="https://raw.githubusercontent.com/dunwu/images/master/snap/20200924120007.svg" alt="删除操作" tabindex="0" loading="lazy"><figcaption>删除操作</figcaption></figure><p>可以指定用于标识要删除的文档的过滤器，这些筛选条件和 find 方法的过滤器语法一致。</p><p>【示例】删除集合中的所有文档</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>inventory<span class="token punctuation">.</span><span class="token function">deleteMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>【示例】删除 <code>status</code> 字段等于 <code>&quot;A&quot;</code> 的文档</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>inventory<span class="token punctuation">.</span><span class="token function">deleteMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;A&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>【示例】删除 <code>status</code> 为 <code>&quot;D&quot;</code> 的第一个文档</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>inventory<span class="token punctuation">.</span><span class="token function">deleteOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;D&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="批量写操作" tabindex="-1"><a class="header-anchor" href="#批量写操作" aria-hidden="true">#</a> 批量写操作</h2>`,9),Z={href:"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#db.collection.bulkWrite",target:"_blank",rel:"noopener noreferrer"},nn=n("code",null,"db.collection.bulkWrite()",-1),sn={href:"https://docs.mongodb.com/manual/reference/method/db.collection.insertMany/#db.collection.insertMany",target:"_blank",rel:"noopener noreferrer"},an=n("code",null,"db.collection.insertMany()",-1),pn=n("h3",{id:"有序和无序的操作",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#有序和无序的操作","aria-hidden":"true"},"#"),s(" 有序和无序的操作")],-1),tn=n("p",null,"批量写操作可以有序或无序。",-1),en=n("ul",null,[n("li",null,"对于有序列表，MongoDB 串行执行操作。如果在写操作的处理过程中发生错误，MongoDB 将不处理列表中剩余的写操作。"),n("li",null,"对于无序列表，MongoDB 可以并行执行操作，但是不能保证此行为。如果在写操作的处理过程中发生错误，MongoDB 将继续处理列表中剩余的写操作。")],-1),on=n("p",null,"在分片集合上执行操作的有序列表通常比执行无序列表要慢，因为对于有序列表，每个操作必须等待上一个操作完成。",-1),rn={href:"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#db.collection.bulkWrite",target:"_blank",rel:"noopener noreferrer"},ln=n("code",null,"bulkWrite()",-1),cn=n("code",null,"ordered : false",-1),un=n("h3",{id:"bulkwrite-方法",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#bulkwrite-方法","aria-hidden":"true"},"#"),s(" bulkWrite() 方法")],-1),kn={href:"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#db.collection.bulkWrite",target:"_blank",rel:"noopener noreferrer"},dn=n("code",null,"bulkWrite()",-1),mn={href:"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#bulkwrite-write-operations-insertone",target:"_blank",rel:"noopener noreferrer"},bn={href:"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#bulkwrite-write-operations-updateonemany",target:"_blank",rel:"noopener noreferrer"},yn={href:"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#bulkwrite-write-operations-updateonemany",target:"_blank",rel:"noopener noreferrer"},vn={href:"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#bulkwrite-write-operations-replaceone",target:"_blank",rel:"noopener noreferrer"},hn={href:"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#bulkwrite-write-operations-deleteonemany",target:"_blank",rel:"noopener noreferrer"},gn={href:"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#bulkwrite-write-operations-deleteonemany",target:"_blank",rel:"noopener noreferrer"},_n=n("p",null,"【示例】批量写操作示例",-1),fn={href:"https://www.mongodb.com/zh-cn/docs/manual/reference/method/db.collection.bulkWrite/#mongodb-method-db.collection.bulkWrite",target:"_blank",rel:"noopener noreferrer"},wn=n("code",null,"bulkWrite()",-1),Mn=n("code",null,"pizzas",-1),Dn=t(`<ul><li>使用 <code>insertOne</code> 添加两个文档。</li><li>使用 <code>updateOne</code> 更新一个文档。</li><li>使用 <code>deleteOne</code> 删除文档。</li><li>使用 <code>replaceOne</code> 替换一个文档。</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>pizzas<span class="token punctuation">.</span><span class="token function">bulkWrite</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">insertOne</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">document</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;beef&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token string">&#39;medium&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">6</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">insertOne</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">document</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;sausage&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token string">&#39;large&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">updateOne</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">filter</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;cheese&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">update</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">$set</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">8</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">deleteOne</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">filter</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;pepperoni&#39;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">replaceOne</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">filter</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;vegan&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">replacement</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;tofu&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token string">&#39;small&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="批量写操作策略" tabindex="-1"><a class="header-anchor" href="#批量写操作策略" aria-hidden="true">#</a> 批量写操作策略</h3><p>大量的插入操作（包括初始数据插入或常规数据导入）可能会影响分片集群的性能。对于批量插入，请考虑以下策略：</p><h4 id="预拆分-collection" tabindex="-1"><a class="header-anchor" href="#预拆分-collection" aria-hidden="true">#</a> 预拆分 collection</h4>`,5),zn={href:"https://docs.mongodb.com/manual/reference/glossary/#term-chunk",target:"_blank",rel:"noopener noreferrer"},xn={href:"https://docs.mongodb.com/manual/reference/glossary/#term-chunk",target:"_blank",rel:"noopener noreferrer"},jn=n("h4",{id:"无序写操作",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#无序写操作","aria-hidden":"true"},"#"),s(" 无序写操作")],-1),On={href:"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#db.collection.bulkWrite",target:"_blank",rel:"noopener noreferrer"},qn=n("code",null,"bulkWrite()",-1),Bn={href:"https://docs.mongodb.com/manual/reference/program/mongos/#bin.mongos",target:"_blank",rel:"noopener noreferrer"},Wn=n("code",null,"mongos",-1),An={href:"https://docs.mongodb.com/manual/reference/glossary/#term-chunk",target:"_blank",rel:"noopener noreferrer"},Cn=n("h4",{id:"避免单调限速",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#避免单调限速","aria-hidden":"true"},"#"),s(" 避免单调限速")],-1),Rn=n("p",null,"如果分片键在插入期间单调增加，则所有已插入数据都会进入集合中的最后一个数据段，该数据段将始终出现在单个分片上。因此，集群的插入容量永远不会超过该单个分片的插入容量。",-1),Un=n("p",null,"如果插入量大于单个分片可以处理的容量，并且无法避免分片键的单调增加，则可以考虑对应用程序进行以下修改：",-1),$n=n("ul",null,[n("li",null,"反转分片键的二进制位。这样将保留信息，并避免将插入顺序与递增的值序列相关联。"),n("li",null,"交换第一个和最后一个 16 位字，“随机打乱”插入。")],-1),Nn=n("h2",{id:"小结",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#小结","aria-hidden":"true"},"#"),s(" 小结")],-1),Vn=n("p",null,"一图胜千言，下面是 MongoDB CRUD 操作的基础要点：",-1),Pn=n("img",{src:"https://raw.githubusercontent.com/dunwu/images/master/snap/202503062320260.png",alt:"CRUD - 原图来自 MongoDB CRUD Operations – Simplified",tabindex:"0",loading:"lazy"},null,-1),En={href:"https://dbversity.com/mongodb-crud-operations-simplified/",target:"_blank",rel:"noopener noreferrer"},In=n("h2",{id:"参考资料",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#参考资料","aria-hidden":"true"},"#"),s(" 参考资料")],-1),Sn={href:"https://www.mongodb.com/zh-cn/docs/manual/crud/",target:"_blank",rel:"noopener noreferrer"};function Ln(Tn,Fn){const a=o("ExternalLinkIcon");return r(),l("div",null,[u,c(" more "),k,d,n("ul",null,[n("li",null,[n("a",m,[b,p(a)])]),n("li",null,[n("a",y,[v,p(a)])])]),h,n("blockquote",null,[n("p",null,[s("更多详情参考："),n("a",g,[s("https://www.mongodb.com/zh-cn/docs/manual/tutorial/insert-documents/"),p(a)])])]),_,n("p",null,[s("MongoDB 提供了 "),n("a",f,[w,p(a)]),s(" 方法从集合中查找文档。")]),M,n("blockquote",null,[n("p",null,[s("更多详情参考："),n("a",D,[s("https://www.mongodb.com/zh-cn/docs/manual/tutorial/query-documents/"),p(a)])])]),z,x,n("ul",null,[n("li",null,[n("a",j,[O,p(a)])]),n("li",null,[n("a",q,[B,p(a)])]),n("li",null,[n("a",W,[A,p(a)])])]),C,n("ul",null,[n("li",null,[n("a",R,[U,p(a)])]),n("li",null,[n("a",$,[N,p(a)])]),n("li",null,[n("a",V,[P,p(a)])])]),E,n("ul",null,[I,n("li",null,[s("一旦设置了，就无法更新或替换 "),n("a",S,[L,p(a)]),s(" 字段。")]),T,F]),G,H,n("ul",null,[n("li",null,[n("a",J,[K,p(a)])]),n("li",null,[n("a",Q,[X,p(a)])])]),Y,n("p",null,[s("MongoDB 通过 "),n("a",Z,[nn,p(a)]),s(" 方法来支持批量写操作（包括批量插入、更新、删除）。")]),n("p",null,[s("此外，"),n("a",sn,[an,p(a)]),s(" 方法支持批量插入操作。")]),pn,tn,en,on,n("p",null,[s("默认情况下，"),n("a",rn,[ln,p(a)]),s(" 执行有序操作。要指定无序写操作，请在选项文档中设置 "),cn,s("。")]),un,n("p",null,[n("a",kn,[dn,p(a)]),s(" 支持以下写操作：")]),n("ul",null,[n("li",null,[n("a",mn,[s("insertOne"),p(a)])]),n("li",null,[n("a",bn,[s("updateOne"),p(a)])]),n("li",null,[n("a",yn,[s("updateMany"),p(a)])]),n("li",null,[n("a",vn,[s("replaceOne"),p(a)])]),n("li",null,[n("a",hn,[s("deleteOne"),p(a)])]),n("li",null,[n("a",gn,[s("deleteMany"),p(a)])])]),_n,n("p",null,[s("以下 "),n("a",fn,[wn,p(a)]),s(" 示例对 "),Mn,s(" 集合运行以下操作：")]),Dn,n("p",null,[s("如果分片集合为空，则该集合只有一个初始 "),n("a",zn,[s("chunk"),p(a)]),s("，该 "),n("a",xn,[s("chunk"),p(a)]),s(" 位于单个分片上。然后，MongoDB 必须花一些时间来接收数据，创建拆分并将拆分的块分发到可用的分片。为了避免这种性能成本，您可以按照拆分群集中的拆分块中的说明预拆分 collection。")]),jn,n("p",null,[s("要提高对分片集群的写入性能，请使用 "),n("a",On,[qn,p(a)]),s("，并将可选参数顺序设置为 false。"),n("a",Bn,[Wn,p(a)]),s(" 可以尝试同时将写入操作发送到多个分片。对于空集合，首先按照分片群集中的分割 "),n("a",An,[s("chunk"),p(a)]),s(" 中的说明预拆分 collection。")]),Cn,Rn,Un,$n,Nn,Vn,n("figure",null,[Pn,n("figcaption",null,[s("CRUD - 原图来自 "),n("a",En,[s("MongoDB CRUD Operations – Simplified"),p(a)])])]),In,n("ul",null,[n("li",null,[n("a",Sn,[s("MongoDB 官方文档之 CRUD 操作"),p(a)])])])])}const Jn=e(i,[["render",Ln],["__file","index.html.vue"]]);export{Jn as default};
