import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as r,b as e,f as s,a as i,o as c}from"./app-D9ZsBuuN.js";const l={};function n(o,t){return c(),r("div",null,[t[0]||(t[0]=e("h1",{id:"elasticsearch-简介",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#elasticsearch-简介"},[e("span",null,"Elasticsearch 简介")])],-1)),t[1]||(t[1]=e("div",{class:"hint-container info"},[e("p",{class:"hint-container-title"},"概述"),e("p",null,"Elasticsearch 是一个基于 Lucene 的搜索和数据分析工具，它提供了一个分布式服务。Elasticsearch 是遵从 Apache 开源条款的一款开源产品，是当前主流的企业级搜索引擎。"),e("p",null,"本文简单介绍了 Elasticsearch 的功能、特性、简史、概念，可以让读者在短时间内对于 Elasticsearch 有一个初步的认识。")],-1)),s(" more "),t[2]||(t[2]=i('<h2 id="什么是-elasticsearch" tabindex="-1"><a class="header-anchor" href="#什么是-elasticsearch"><span>什么是 Elasticsearch？</span></a></h2><figure><img src="https://raw.githubusercontent.com/dunwu/images/master/archive/2024/11/f769820186fe432da503bb095aec7817.png" alt="Elasticsearch" tabindex="0" loading="lazy"><figcaption>Elasticsearch</figcaption></figure><p><a href="https://github.com/elastic/elasticsearch" target="_blank" rel="noopener noreferrer"><strong>Elasticsearch</strong></a> 是一个开源的分布式<strong>搜索和分析引擎</strong>。</p><p><a href="https://github.com/elastic/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch</a> <strong>基于搜索库 <a href="https://github.com/apache/lucene-solr" target="_blank" rel="noopener noreferrer">Lucene</a> 开发</strong>。Elasticsearch 隐藏了 Lucene 的复杂性，提供了简单易用的 REST API / Java API 接口（另外还有其他语言的 API 接口）。</p><p>Elasticsearch 是<strong>面向文档</strong>的，它将复杂数据结构序列化为 <strong>JSON</strong> 形式存储。</p><p>Elasticsearch 提供<strong>近实时</strong>（Near Realtime，缩写 NRT）的<strong>全文搜索</strong>。近实时是指：</p><ul><li>从写入数据到数据可以被搜索，存在较小的延迟（大概是 1s）。</li><li>基于 Elasticsearch 执行搜索和分析可以达到秒级。</li></ul><h2 id="为什么使用-elasticsearch" tabindex="-1"><a class="header-anchor" href="#为什么使用-elasticsearch"><span>为什么使用 Elasticsearch？</span></a></h2><p>Elasticsearch 是基于 Lucene 的，那么为什么不是直接使用 Lucene 呢？</p><p>Lucene 可以说是当下最先进、高性能、全功能的搜索引擎库。</p><p>但是，Lucene 仅仅只是一个库。为了充分发挥其功能，需要使用 Java 并将 Lucene 直接集成到应用程序中。 Lucene 非常复杂，了解其工作原理并不容易。</p><p>Elasticsearch 也是使用 Java 编写的，它的内部使用 Lucene 做索引与搜索，但是它的目的是使全文检索变得简单，<strong>通过隐藏 Lucene 的复杂性，取而代之的提供一套简单一致的 RESTful API</strong>。</p><p>然而，Elasticsearch 不仅仅是 Lucene，并且也不仅仅只是一个全文搜索引擎。 它可以被下面这样准确的形容：</p><ul><li>一个分布式的实时文档数据库，每个字段可以被索引与搜索。</li><li>一个分布式实时分析搜索引擎。</li><li>支持扩展为上百个服务节点的集群，并支持 PB 级别的半结构化数据。</li></ul><h2 id="elasticsearch-有哪些应用场景" tabindex="-1"><a class="header-anchor" href="#elasticsearch-有哪些应用场景"><span>Elasticsearch 有哪些应用场景？</span></a></h2><p>Elasticsearch 的主要功能如下：</p><ul><li><strong>海量数据的分布式存储及集群管理</strong></li><li><strong>提供丰富的近实时搜索能力</strong></li><li><strong>海量数据的近实时分析（聚合）</strong></li></ul><p>Elasticsearch 被广泛应用于以下场景：</p><ul><li><strong>搜索</strong><ul><li><strong>全文检索</strong> - Elasticsearch 通过快速搜索大型数据集，使复杂的搜索查询变得更加容易。它对于需要即时和相关搜索结果的网站、应用程序或企业特别有用。</li><li><strong>自动补全和拼写纠正</strong> - 可以在用户输入内容时，实时提供自动补全和拼写纠正，以增加用户体验并提高搜索效率。</li><li><strong>地理空间搜索</strong> - 使用地理空间查询搜索位置并计算空间关系。</li></ul></li><li><strong>可观测性</strong><ul><li><strong>日志、指标和链路追踪</strong> - 收集、存储和分析来自应用程序、系统和服务的日志、指标和追踪。</li><li><strong>性能监控</strong> - 监控和分析业务关键性能指标。</li><li><strong>OpenTelemetry</strong> - 使用 OpenTelemetry 标准，将遥测数据采集到 Elastic Stack。</li></ul></li></ul><h2 id="elasticsearch-简史" tabindex="-1"><a class="header-anchor" href="#elasticsearch-简史"><span>Elasticsearch 简史</span></a></h2><p>Elasticsearch 里程碑版本：</p><ul><li>1.0（2014 年）</li><li>5.0（2016 年） <ul><li>Lucene 6.x</li><li>默认打分机制从 TD-IDF 改为 BM25</li><li>增加 Keyword 类型</li></ul></li><li>6.0（2017 年） <ul><li>Lucene 7.x</li><li>跨集群复制</li><li>索引生命周期管理</li><li>SQL 的支持</li></ul></li><li>7.0（2019 年） <ul><li>Lucene 8.0</li><li>移除 Type</li><li>ECK （用于支持 K8S）</li><li>集群协调</li><li>High Level Rest Client</li><li>Script Score 查询</li></ul></li><li>8.0（2022 年） <ul><li>Lucene 9.0</li><li>向量搜索</li><li>支持 OpenTelemetry</li></ul></li></ul><h2 id="elasticsearch-概念" tabindex="-1"><a class="header-anchor" href="#elasticsearch-概念"><span>Elasticsearch 概念</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>index -&gt; type -&gt; mapping -&gt; document -&gt; field</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Elasticsearch 集群的核心概念如下：</p><ul><li><strong>Cluster（集群）</strong> - <strong>由多个协同工作的 ES 实例组合成的集合称为集群</strong>。集群架构使得 ES 具备了高可用性和可扩展性。</li><li><strong>Node（节点）</strong> - <strong>单个 ES 服务实例称为 Node，本质上就是一个 Java 进程</strong>。每个节点都有各自的名字，默认是随机分配的，也可以通过 <code>node.name</code> 指定。</li><li><strong>Shard（分片）</strong> - 当单台机器不足以存储大量数据时，Elasticsearch 可以将一个索引中的数据切分为多个 <strong><code>分片（shard）</code></strong> 。 <strong><code>分片（shard）</code></strong> 分布在多台服务器上存储。有了 shard 就可以横向扩展，存储更多数据，让搜索和分析等操作分布到多台服务器上去执行，提升吞吐量和性能。每个 shard 都是一个 lucene index。</li><li><strong>Replica（副本）</strong> - 任何一个服务器随时可能故障或宕机，此时 shard 可能就会丢失，因此可以为每个 shard 创建多个 <strong><code>副本（replica）</code></strong>。replica 可以在 shard 故障时提供备用服务，保证数据不丢失，多个 replica 还可以提升搜索操作的吞吐量和性能。primary shard（建立索引时一次设置，不能修改，默认 5 个），replica shard（随时修改数量，默认 1 个），默认每个索引 10 个 shard，5 个 primary shard，5 个 replica shard，最小的高可用配置，是 2 台服务器。</li></ul><p>Elasticsearch 数据的核心概念如下：</p><ul><li><strong>Index（索引）</strong> - 在 ES 中，<strong>可以将索引视为文档（document）的集合</strong>。 <ul><li>ES 会为所有字段建立索引，经过处理后写入一个倒排索引（Inverted Index）。查找数据的时候，直接查找该索引。</li><li>所以，ES 数据管理的顶层单位就叫做 Index（索引）。它是单个数据库的同义词。每个 Index （即数据库）的名字必须是小写。</li></ul></li><li><strong>Type（类型）</strong> - 每个索引里可以有一个或者多个类型（type）。<code>类型（type）</code> 是 Index 的一个逻辑分类。 <ul><li>不同的 Type 应该有相似的结构（schema），举例来说，<code>id</code>字段不能在这个组是字符串，在另一个组是数值。这是与关系型数据库的表的 <a href="https://www.elastic.co/guide/en/Elasticsearch/guide/current/mapping.html" target="_blank" rel="noopener noreferrer">一个区别</a>。性质完全不同的数据（比如<code>products</code>和<code>logs</code>）应该存成两个 Index，而不是一个 Index 里面的两个 Type（虽然可以做到）。</li><li>注意：ES 7.x 版已彻底移除 Type。</li></ul></li><li><strong>Document（文档）</strong> - Index 里面单条的记录称为 Document。文档是一组字段。每个文档都有一个唯一的 ID。</li><li><strong>Field（字段）</strong> - 包含数据的键值对。默认情况下，Elasticsearch 对每个字段中的所有数据建立索引，并且每个索引字段都具有专用的优化数据结构。</li><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-fields.html" target="_blank" rel="noopener noreferrer"><strong>Metadata Field（元数据字段）</strong></a> - 存储有关文档的信息的系统字段。元数据字段都以 <code>_</code> 开头。常见元数据字段： <ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-index-field.html" target="_blank" rel="noopener noreferrer"><code>_index</code></a> - 文档所属的索引</li><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-id-field.html" target="_blank" rel="noopener noreferrer"><code>_id</code></a> - 文档的 ID</li><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-source-field.html" target="_blank" rel="noopener noreferrer"><code>_source</code></a> - 表示文档原文的 JSON</li></ul></li></ul><p>ES 核心概念 vs. DB 核心概念：</p><table><thead><tr><th>ES</th><th>DB</th></tr></thead><tbody><tr><td>索引（index）</td><td>数据库（database）</td></tr><tr><td>类型（type，6.0 废弃，7.0 移除）</td><td>数据表（table）</td></tr><tr><td>文档（docuemnt）</td><td>行（row）</td></tr><tr><td>字符（field）</td><td>列（column）</td></tr><tr><td>映射（mapping）</td><td>表结构（schema）</td></tr></tbody></table><h2 id="elastic-stack" tabindex="-1"><a class="header-anchor" href="#elastic-stack"><span>Elastic Stack</span></a></h2><p>Elastic Stack 通常被用来作为日志采集、检索、可视化的解决方案。</p><figure><img src="https://raw.githubusercontent.com/dunwu/images/master/archive/2024/11/ec41500c0b614c4db5245a202c266967.png" alt="ELK" tabindex="0" loading="lazy"><figcaption>ELK</figcaption></figure><p>Elastic Stack 也常被称为 ELK，这是 Elastic 公司旗下三款产品 <a href="https://www.elastic.co/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch</a> 、<a href="https://www.elastic.co/products/logstash" target="_blank" rel="noopener noreferrer">Logstash</a> 、<a href="https://www.elastic.co/kibana" target="_blank" rel="noopener noreferrer">Kibana</a> 的首字母组合。</p><ul><li><a href="https://www.elastic.co/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch</a> 负责存储数据，并提供对数据的检索和分析。</li><li><a href="https://www.elastic.co/logstash" target="_blank" rel="noopener noreferrer">Logstash</a> 传输和处理你的日志、事务或其他数据。</li><li><a href="https://www.elastic.co/kibana" target="_blank" rel="noopener noreferrer">Kibana</a> 将 Elasticsearch 的数据分析并渲染为可视化的报表。</li></ul><p>Elastic Stack，在 ELK 的基础上扩展了一些新的产品。如：<a href="https://www.elastic.co/beats" target="_blank" rel="noopener noreferrer">Beats</a>，这是针对不同类型数据的轻量级采集器套件。</p><p>此外，基于 Elastic Stack，其技术生态还可以和一些主流的分布式中间件进行集成，以应对各种不同的场景。</p><figure><img src="https://raw.githubusercontent.com/dunwu/images/master/archive/2024/11/afa56f3c9bcf4f23b6c77dfd65c4eff8.png" alt="Elastic Stack" tabindex="0" loading="lazy"><figcaption>Elastic Stack</figcaption></figure><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h2><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/elasticsearch-intro.html" target="_blank" rel="noopener noreferrer">Elasticsearch 官方文档之基础知识</a></li></ul>',40))])}const d=a(l,[["render",n]]),g=JSON.parse('{"path":"/pages/6a251952/","title":"Elasticsearch 简介","lang":"zh-CN","frontmatter":{"icon":"logos:elasticsearch","title":"Elasticsearch 简介","cover":"https://raw.githubusercontent.com/dunwu/images/master/archive/2024/11/f769820186fe432da503bb095aec7817.png","date":"2020-06-16T07:10:44.000Z","categories":["数据库","搜索引擎数据库","Elasticsearch"],"tags":["数据库","搜索引擎数据库","Elasticsearch"],"permalink":"/pages/6a251952/","description":"概述 Elasticsearch 是一个基于 Lucene 的搜索和数据分析工具，它提供了一个分布式服务。Elasticsearch 是遵从 Apache 开源条款的一款开源产品，是当前主流的企业级搜索引擎。 本文简单介绍了 Elasticsearch 的功能、特性、简史、概念，可以让读者在短时间内对于 Elasticsearch 有一个初步的认识。","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Elasticsearch 简介\\",\\"image\\":[\\"https://raw.githubusercontent.com/dunwu/images/master/archive/2024/11/f769820186fe432da503bb095aec7817.png\\",\\"https://raw.githubusercontent.com/dunwu/images/master/archive/2024/11/ec41500c0b614c4db5245a202c266967.png\\",\\"https://raw.githubusercontent.com/dunwu/images/master/archive/2024/11/afa56f3c9bcf4f23b6c77dfd65c4eff8.png\\"],\\"datePublished\\":\\"2020-06-16T07:10:44.000Z\\",\\"dateModified\\":\\"2026-02-11T15:41:54.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"钝悟\\",\\"url\\":\\"https://dunwu.github.io/waterdrop\\"}]}"],["meta",{"property":"og:url","content":"https://dunwu.github.io/waterdrop/waterdrop/pages/6a251952/"}],["meta",{"property":"og:site_name","content":"钝悟"}],["meta",{"property":"og:title","content":"Elasticsearch 简介"}],["meta",{"property":"og:description","content":"概述 Elasticsearch 是一个基于 Lucene 的搜索和数据分析工具，它提供了一个分布式服务。Elasticsearch 是遵从 Apache 开源条款的一款开源产品，是当前主流的企业级搜索引擎。 本文简单介绍了 Elasticsearch 的功能、特性、简史、概念，可以让读者在短时间内对于 Elasticsearch 有一个初步的认识。"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://raw.githubusercontent.com/dunwu/images/master/archive/2024/11/f769820186fe432da503bb095aec7817.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-02-11T15:41:54.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://raw.githubusercontent.com/dunwu/images/master/archive/2024/11/f769820186fe432da503bb095aec7817.png"}],["meta",{"name":"twitter:image:alt","content":"Elasticsearch 简介"}],["meta",{"property":"article:tag","content":"Elasticsearch"}],["meta",{"property":"article:tag","content":"搜索引擎数据库"}],["meta",{"property":"article:tag","content":"数据库"}],["meta",{"property":"article:published_time","content":"2020-06-16T07:10:44.000Z"}],["meta",{"property":"article:modified_time","content":"2026-02-11T15:41:54.000Z"}]]},"git":{"createdTime":1651071272000,"updatedTime":1770824514000,"contributors":[{"name":"dunwu","username":"dunwu","email":"forbreak@163.com","commits":20,"url":"https://github.com/dunwu"}]},"readingTime":{"minutes":6.6,"words":1981},"filePathRelative":"12.数据库/搜索引擎数据库/Elasticsearch/Elasticsearch_简介.md","excerpt":"\\n<div class=\\"hint-container info\\">\\n<p class=\\"hint-container-title\\">概述</p>\\n<p>Elasticsearch 是一个基于 Lucene 的搜索和数据分析工具，它提供了一个分布式服务。Elasticsearch 是遵从 Apache 开源条款的一款开源产品，是当前主流的企业级搜索引擎。</p>\\n<p>本文简单介绍了 Elasticsearch 的功能、特性、简史、概念，可以让读者在短时间内对于 Elasticsearch 有一个初步的认识。</p>\\n</div>\\n","autoDesc":true}');export{d as comp,g as data};
