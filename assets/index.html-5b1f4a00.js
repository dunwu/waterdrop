import{_ as t}from"./plugin-vue_export-helper-c27b6911.js";import{r as c,o as p,c as l,a as n,b as s,d as a,e as o}from"./app-82865e7f.js";const r={},i=n("h1",{id:"docker-compose",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#docker-compose","aria-hidden":"true"},"#"),s(" Docker Compose")],-1),d={href:"https://github.com/docker/compose",target:"_blank",rel:"noopener noreferrer"},u=n("code",null,"OpenStack",-1),k=n("code",null,"Heat",-1),m=o('<h2 id="ä¸€ã€compose-ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€compose-ç®€ä»‹" aria-hidden="true">#</a> ä¸€ã€Compose ç®€ä»‹</h2><p><strong><code>Compose</code> çš„å®šä½æ˜¯ï¼šå®šä¹‰å’Œè¿è¡Œå¤šä¸ª Docker å®¹å™¨çš„åº”ç”¨</strong>ã€‚ ä½¿ç”¨ä¸€ä¸ª <code>Dockerfile</code> æ¨¡æ¿æ–‡ä»¶ï¼Œå¯ä»¥è®©ç”¨æˆ·å¾ˆæ–¹ä¾¿çš„å®šä¹‰ä¸€ä¸ªå•ç‹¬çš„åº”ç”¨å®¹å™¨ã€‚ç„¶è€Œï¼Œåœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œç»å¸¸ä¼šç¢°åˆ°éœ€è¦å¤šä¸ªå®¹å™¨ç›¸äº’é…åˆæ¥å®ŒæˆæŸé¡¹ä»»åŠ¡çš„æƒ…å†µã€‚ä¾‹å¦‚è¦å®ç°ä¸€ä¸ª Web é¡¹ç›®ï¼Œé™¤äº† Web æœåŠ¡å®¹å™¨æœ¬èº«ï¼Œå¾€å¾€è¿˜éœ€è¦å†åŠ ä¸Šåç«¯çš„æ•°æ®åº“æœåŠ¡å®¹å™¨ï¼Œç”šè‡³è¿˜åŒ…æ‹¬è´Ÿè½½å‡è¡¡å®¹å™¨ç­‰ã€‚</p><p><code>Compose</code> æ°å¥½æ»¡è¶³äº†è¿™æ ·çš„éœ€æ±‚ã€‚å®ƒå…è®¸ç”¨æˆ·é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„ <code>docker-compose.yml</code> æ¨¡æ¿æ–‡ä»¶ï¼ˆYAML æ ¼å¼ï¼‰æ¥å®šä¹‰ä¸€ç»„ç›¸å…³è”çš„åº”ç”¨å®¹å™¨ä¸ºä¸€ä¸ªé¡¹ç›®ï¼ˆprojectï¼‰ã€‚</p><p><code>Compose</code> ä¸­æœ‰ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼š</p><ul><li><strong>æœåŠ¡ (<code>service</code>)</strong>ï¼šä¸€ä¸ªåº”ç”¨çš„å®¹å™¨ï¼Œå®é™…ä¸Šå¯ä»¥åŒ…æ‹¬è‹¥å¹²è¿è¡Œç›¸åŒé•œåƒçš„å®¹å™¨å®ä¾‹ã€‚</li><li><strong>é¡¹ç›® (<code>project</code>)</strong>ï¼šç”±ä¸€ç»„å…³è”çš„åº”ç”¨å®¹å™¨ç»„æˆçš„ä¸€ä¸ªå®Œæ•´ä¸šåŠ¡å•å…ƒï¼Œåœ¨ <code>docker-compose.yml</code> æ–‡ä»¶ä¸­å®šä¹‰ã€‚</li></ul><p><code>Compose</code> çš„é»˜è®¤ç®¡ç†å¯¹è±¡æ˜¯é¡¹ç›®ï¼Œé€šè¿‡å­å‘½ä»¤å¯¹é¡¹ç›®ä¸­çš„ä¸€ç»„å®¹å™¨è¿›è¡Œä¾¿æ·åœ°ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</p><h2 id="äºŒã€å®‰è£…å¸è½½" tabindex="-1"><a class="header-anchor" href="#äºŒã€å®‰è£…å¸è½½" aria-hidden="true">#</a> äºŒã€å®‰è£…å¸è½½</h2><p><code>Compose</code> æ”¯æŒ Linuxã€macOSã€Windows10 ä¸‰å¤§å¹³å°ã€‚</p><p>Linux å®‰è£…æ–¹å¼ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">-L</span> https://github.com/docker/compose/releases/download/1.24.1/docker-compose-<span class="token variable"><span class="token variable">`</span><span class="token function">uname</span> <span class="token parameter variable">-s</span><span class="token variable">`</span></span>-<span class="token variable"><span class="token variable">`</span><span class="token function">uname</span> <span class="token parameter variable">-m</span><span class="token variable">`</span></span> <span class="token operator">&gt;</span> /usr/local/bin/docker-compose\n<span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/docker-compose\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>',10),h={href:"https://docs.docker.com/compose/install/",target:"_blank",rel:"noopener noreferrer"},v=o(`<h2 id="ä¸‰ã€å¿«é€Ÿå…¥é—¨" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€å¿«é€Ÿå…¥é—¨" aria-hidden="true">#</a> ä¸‰ã€å¿«é€Ÿå…¥é—¨</h2><h3 id="web-åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#web-åº”ç”¨" aria-hidden="true">#</a> web åº”ç”¨</h3><p>æ–°å»ºæ–‡ä»¶å¤¹ï¼Œåœ¨è¯¥ç›®å½•ä¸­ç¼–å†™ <code>app.py</code> æ–‡ä»¶</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> flask <span class="token keyword">import</span> Flask
<span class="token keyword">from</span> redis <span class="token keyword">import</span> Redis

app <span class="token operator">=</span> Flask<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>
redis <span class="token operator">=</span> Redis<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">&#39;redis&#39;</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">6379</span><span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    count <span class="token operator">=</span> redis<span class="token punctuation">.</span>incr<span class="token punctuation">(</span><span class="token string">&#39;hits&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">&#39;Hello World! è¯¥é¡µé¢å·²è¢«è®¿é—® {} æ¬¡ã€‚\\n&#39;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span>
    app<span class="token punctuation">.</span>run<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">&quot;0.0.0.0&quot;</span><span class="token punctuation">,</span> debug<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="dockerfile" tabindex="-1"><a class="header-anchor" href="#dockerfile" aria-hidden="true">#</a> Dockerfile</h3><p>ç¼–å†™ <code>Dockerfile</code> æ–‡ä»¶ï¼Œå†…å®¹ä¸º</p><div class="language-docker line-numbers-mode" data-ext="docker"><pre class="language-docker"><code><span class="token instruction"><span class="token keyword">FROM</span> python:3.6-alpine</span>
<span class="token instruction"><span class="token keyword">ADD</span> . /code</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> /code</span>
<span class="token instruction"><span class="token keyword">RUN</span> pip install redis flask</span>
<span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;python&quot;</span>, <span class="token string">&quot;app.py&quot;</span>]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="docker-compose-yml" tabindex="-1"><a class="header-anchor" href="#docker-compose-yml" aria-hidden="true">#</a> docker-compose.yml</h3><p>ç¼–å†™ <code>docker-compose.yml</code> æ–‡ä»¶ï¼Œè¿™ä¸ªæ˜¯ Compose ä½¿ç”¨çš„ä¸»æ¨¡æ¿æ–‡ä»¶ã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3&#39;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>

  <span class="token key atrule">web</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> .
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
     <span class="token punctuation">-</span> <span class="token string">&quot;5000:5000&quot;</span>

  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> <span class="token string">&quot;redis:alpine&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è¿è¡Œ-compose-é¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#è¿è¡Œ-compose-é¡¹ç›®" aria-hidden="true">#</a> è¿è¡Œ compose é¡¹ç›®</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">docker-compose</span> up
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ­¤æ—¶è®¿é—®æœ¬åœ° <code>5000</code> ç«¯å£ï¼Œæ¯æ¬¡åˆ·æ–°é¡µé¢ï¼Œè®¡æ•°å°±ä¼šåŠ  1ã€‚</p><h2 id="å››ã€å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#å››ã€å‘½ä»¤" aria-hidden="true">#</a> å››ã€å‘½ä»¤</h2>`,14),b=n("p",null,"ğŸ”” è¯·å‚è€ƒï¼š",-1),_={href:"https://docs.docker.com/compose/reference/",target:"_blank",rel:"noopener noreferrer"},f={href:"https://yeasy.gitbooks.io/docker_practice/content/compose/commands.html",target:"_blank",rel:"noopener noreferrer"},g=n("h2",{id:"äº”ã€æ¨¡æ¿æ–‡ä»¶",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#äº”ã€æ¨¡æ¿æ–‡ä»¶","aria-hidden":"true"},"#"),s(" äº”ã€æ¨¡æ¿æ–‡ä»¶")],-1),y=n("blockquote",null,[n("p",null,[n("code",null,"docker-compose.yml"),s(" æ–‡ä»¶æ˜¯ Docker Compose çš„æ¨¡æ¿æ–‡ä»¶ï¼Œå…¶ä½œç”¨ç±»ä¼¼äº Dockerfile å’Œ Dockerã€‚")])],-1),x={href:"https://docs.docker.com/compose/env-file/",target:"_blank",rel:"noopener noreferrer"},D=n("h2",{id:"å‚è€ƒèµ„æ–™",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#å‚è€ƒèµ„æ–™","aria-hidden":"true"},"#"),s(" å‚è€ƒèµ„æ–™")],-1),w=n("strong",null,"å®˜æ–¹",-1),C={href:"https://github.com/docker/compose",target:"_blank",rel:"noopener noreferrer"},q={href:"https://docs.docker.com/compose/",target:"_blank",rel:"noopener noreferrer"},L=n("strong",null,"æ•™ç¨‹",-1),R={href:"https://yeasy.gitbooks.io/docker_practice/content/compose/",target:"_blank",rel:"noopener noreferrer"};function N(W,I){const e=c("ExternalLinkIcon");return p(),l("div",null,[i,n("blockquote",null,[n("p",null,[n("a",d,[s("compose"),a(e)]),s(" é¡¹ç›®æ˜¯ Docker å®˜æ–¹çš„å¼€æºé¡¹ç›®ï¼Œè´Ÿè´£å®ç°å¯¹ Docker å®¹å™¨é›†ç¾¤çš„å¿«é€Ÿç¼–æ’ã€‚ä»åŠŸèƒ½ä¸Šçœ‹ï¼Œè·Ÿ "),u,s(" ä¸­çš„ "),k,s(" ååˆ†ç±»ä¼¼ã€‚")])]),m,n("blockquote",null,[n("p",null,[s("ğŸ”” è¯¦æƒ…è¯·å‚è€ƒï¼š"),n("a",h,[s("Install Docker Compose"),a(e)])])]),v,n("blockquote",null,[b,n("ul",null,[n("li",null,[n("a",_,[s("Compose å®˜æ–¹å‘½ä»¤è¯´æ˜æ–‡æ¡£"),a(e)])]),n("li",null,[n("a",f,[s("Compose å‘½ä»¤è¯´æ˜ä¸­æ–‡æ–‡æ¡£"),a(e)])])])]),g,y,n("p",null,[n("a",x,[s("docker-compose.yml æ”¯æŒçš„é»˜è®¤ç¯å¢ƒå˜é‡å®˜æ–¹æ–‡æ¡£"),a(e)])]),D,n("ul",null,[n("li",null,[w,n("ul",null,[n("li",null,[n("a",C,[s("Docker Compose Github"),a(e)])]),n("li",null,[n("a",q,[s("Docker Compose å®˜æ–¹æ–‡æ¡£"),a(e)])])])]),n("li",null,[L,n("ul",null,[n("li",null,[n("a",R,[s("Docker â€” ä»å…¥é—¨åˆ°å®è·µ - Docker Compose é¡¹ç›®"),a(e)])])])])])])}const B=t(r,[["render",N],["__file","index.html.vue"]]);export{B as default};
