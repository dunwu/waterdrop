import{_ as o}from"./plugin-vue_export-helper-c27b6911.js";import{r as c,o as i,c as l,a as n,d as e,b as a,e as t}from"./app-7c7efa3d.js";const p={},r=t(`<h1 id="shiro-å¿«é€Ÿå…¥é—¨" tabindex="-1"><a class="header-anchor" href="#shiro-å¿«é€Ÿå…¥é—¨" aria-hidden="true">#</a> Shiro å¿«é€Ÿå…¥é—¨</h1><blockquote><p>Shiro æ˜¯ä¸€ä¸ªå®‰å…¨æ¡†æ¶ï¼Œå…·æœ‰è®¤è¯ã€æˆæƒã€åŠ å¯†ã€ä¼šè¯ç®¡ç†åŠŸèƒ½ã€‚</p></blockquote><h2 id="ä¸€ã€shiro-ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€shiro-ç®€ä»‹" aria-hidden="true">#</a> ä¸€ã€Shiro ç®€ä»‹</h2><h3 id="shiro-ç‰¹æ€§" tabindex="-1"><a class="header-anchor" href="#shiro-ç‰¹æ€§" aria-hidden="true">#</a> Shiro ç‰¹æ€§</h3><p align="center"><img src="https://raw.githubusercontent.com/dunwu/images/master/cs/java/javaweb/standalone/security/shiro/shiro-features.png"></p><p>æ ¸å¿ƒåŠŸèƒ½ï¼š</p><ul><li><strong>Authentication</strong> - <strong>è®¤è¯</strong>ã€‚éªŒè¯ç”¨æˆ·æ˜¯ä¸æ˜¯æ‹¥æœ‰ç›¸åº”çš„èº«ä»½ã€‚</li><li><strong>Authorization</strong> - <strong>æˆæƒ</strong>ã€‚éªŒè¯æŸä¸ªå·²è®¤è¯çš„ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æŸä¸ªæƒé™ï¼›å³åˆ¤æ–­ç”¨æˆ·æ˜¯å¦èƒ½åšäº‹æƒ…ï¼Œå¸¸è§çš„å¦‚ï¼šéªŒè¯æŸä¸ªç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æŸä¸ªè§’è‰²ã€‚æˆ–è€…ç»†ç²’åº¦çš„éªŒè¯æŸä¸ªç”¨æˆ·å¯¹æŸä¸ªèµ„æºæ˜¯å¦å…·æœ‰æŸä¸ªæƒé™ã€‚</li><li><strong>Session Manager</strong> - <strong>ä¼šè¯ç®¡ç†</strong>ã€‚å³ç”¨æˆ·ç™»å½•åå°±æ˜¯ä¸€æ¬¡ä¼šè¯ï¼Œåœ¨æ²¡æœ‰é€€å‡ºä¹‹å‰ï¼Œå®ƒçš„æ‰€æœ‰ä¿¡æ¯éƒ½åœ¨ä¼šè¯ä¸­ã€‚ä¼šè¯å¯ä»¥æ˜¯æ™®é€š JavaSE ç¯å¢ƒçš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å¦‚ Web ç¯å¢ƒçš„ã€‚</li><li><strong>Cryptography</strong> - <strong>åŠ å¯†</strong>ã€‚ä¿æŠ¤æ•°æ®çš„å®‰å…¨æ€§ï¼Œå¦‚å¯†ç åŠ å¯†å­˜å‚¨åˆ°æ•°æ®åº“ï¼Œè€Œä¸æ˜¯æ˜æ–‡å­˜å‚¨ã€‚</li></ul><p>è¾…åŠ©åŠŸèƒ½ï¼š</p><ul><li><strong>Web Support</strong> - <strong>Web æ”¯æŒ</strong>ã€‚å¯ä»¥éå¸¸å®¹æ˜“çš„é›†æˆåˆ° Web ç¯å¢ƒï¼›</li><li><strong>Caching</strong> - <strong>ç¼“å­˜</strong>ã€‚æ¯”å¦‚ç”¨æˆ·ç™»å½•åï¼Œå…¶ç”¨æˆ·ä¿¡æ¯ã€æ‹¥æœ‰çš„è§’è‰² / æƒé™ä¸å¿…æ¯æ¬¡å»æŸ¥ï¼Œè¿™æ ·å¯ä»¥æé«˜æ•ˆç‡ï¼›</li><li><strong>Concurrency</strong> - <strong>å¹¶å‘</strong>ã€‚Shiro æ”¯æŒå¤šçº¿ç¨‹åº”ç”¨çš„å¹¶å‘éªŒè¯ï¼Œå³å¦‚åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­å¼€å¯å¦ä¸€ä¸ªçº¿ç¨‹ï¼Œèƒ½æŠŠæƒé™è‡ªåŠ¨ä¼ æ’­è¿‡å»ï¼›</li><li><strong>Testing</strong> - <strong>æµ‹è¯•</strong>ã€‚æä¾›æµ‹è¯•æ”¯æŒï¼›</li><li><strong>Run As</strong> - <strong>è¿è¡Œæ–¹å¼</strong>ã€‚å…è®¸ä¸€ä¸ªç”¨æˆ·å‡è£…ä¸ºå¦ä¸€ä¸ªç”¨æˆ·ï¼ˆå¦‚æœä»–ä»¬å…è®¸ï¼‰çš„èº«ä»½è¿›è¡Œè®¿é—®ï¼›</li><li><strong>Remember Me</strong> - <strong>è®°ä½æˆ‘</strong>ã€‚å³ä¸€æ¬¡ç™»å½•åï¼Œä¸‹æ¬¡å†è®¿é—®å…ç™»å½•ã€‚</li></ul><blockquote><p>ğŸ”” æ³¨æ„ï¼šShiro ä¸ä¼šå»ç»´æŠ¤ç”¨æˆ·ã€ç»´æŠ¤æƒé™ï¼›è¿™äº›éœ€è¦æˆ‘ä»¬è‡ªå·±å»æä¾›ï¼›ç„¶åé€šè¿‡ç›¸åº”çš„æ¥å£æ³¨å…¥ç»™ Shiro å³å¯ã€‚</p></blockquote><h3 id="shiro-æ¶æ„æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#shiro-æ¶æ„æ¦‚è¿°" aria-hidden="true">#</a> Shiro æ¶æ„æ¦‚è¿°</h3><p align="center"><img src="https://raw.githubusercontent.com/dunwu/images/master/cs/java/javaweb/standalone/security/shiro/ShiroBasicArchitecture.png"></p><ul><li><p><strong>Subject</strong> - <strong>ä¸»é¢˜</strong>ã€‚å®ƒä»£è¡¨å½“å‰ç”¨æˆ·ï¼Œ<code>Subject</code> å¯ä»¥æ˜¯ä¸€ä¸ªäººï¼Œä½†ä¹Ÿå¯ä»¥æ˜¯ç¬¬ä¸‰æ–¹æœåŠ¡ã€å®ˆæŠ¤è¿›ç¨‹å¸æˆ·ã€æ—¶é’Ÿå®ˆæŠ¤ä»»åŠ¡æˆ–è€…å…¶å®ƒâ€”â€”å½“å‰å’Œè½¯ä»¶äº¤äº’çš„ä»»ä½•äº‹ä»¶ã€‚<code>Subject</code> æ˜¯ Shiro çš„å…¥å£ã€‚</p><ul><li><code>Principals</code> æ˜¯ <code>Subject</code> çš„â€œè¯†åˆ«å±æ€§â€ã€‚<code>Principals</code> å¯ä»¥æ˜¯ä»»ä½•å¯ä»¥è¯†åˆ« <code>Subject</code> çš„ä¸œè¥¿ï¼Œä¾‹å¦‚åå­—ï¼ˆå§“æ°ï¼‰ï¼Œå§“æ°ï¼ˆå§“æ°æˆ–å§“æ°ï¼‰ï¼Œç”¨æˆ·åï¼Œç¤¾ä¼šä¿é™©å·ç­‰ã€‚å½“ç„¶ï¼Œ<code>Principals</code> åœ¨åº”ç”¨ç¨‹åºä¸­æœ€å¥½æ˜¯æƒŸä¸€çš„ã€‚</li><li><code>Credentials</code> é€šå¸¸æ˜¯ä»…ç”± <code>Subject</code> çŸ¥é“çš„ç§˜å¯†å€¼ï¼Œç”¨ä½œä»–ä»¬å®é™…ä¸Šâ€œæ‹¥æœ‰â€æ‰€ä¸»å¼ èº«ä»½çš„ä½è¯ å‡­æ®çš„ä¸€äº›å¸¸è§ç¤ºä¾‹æ˜¯å¯†ç ï¼Œç”Ÿç‰©ç‰¹å¾æ•°æ®ï¼ˆä¾‹å¦‚æŒ‡çº¹å’Œè§†ç½‘è†œæ‰«æï¼‰ä»¥åŠ X.509 è¯ä¹¦ã€‚</li></ul></li><li><p><strong>SecurityManager</strong> - <strong>å®‰å…¨ç®¡ç†</strong>ã€‚å®ƒæ˜¯ Shiro çš„æ ¸å¿ƒï¼Œæ‰€æœ‰ä¸å®‰å…¨æœ‰å…³çš„æ“ä½œï¼ˆè®¤è¯ã€æˆæƒã€åŠä¼šè¯ã€ç¼“å­˜çš„ç®¡ç†ï¼‰éƒ½ä¸ <code>SecurityManager</code> äº¤äº’ï¼Œä¸”å®ƒç®¡ç†ç€æ‰€æœ‰ <code>Subject</code>ã€‚</p></li><li><p><strong>Realm</strong> - <strong>åŸŸ</strong>ã€‚ç”¨äºè®¿é—®å®‰å…¨ç›¸å…³æ•°æ®ï¼Œå¯ä»¥è§†ä¸ºåº”ç”¨è‡ªèº«çš„æ•°æ®æºï¼Œéœ€è¦å¼€å‘è€…è‡ªå·±å®ç°ã€‚Shiro ä¼šé€šè¿‡ <code>Realm</code> è·å–å®‰å…¨æ•°æ®ï¼ˆå¦‚ç”¨æˆ·ã€è§’è‰²ã€æƒé™ï¼‰ï¼Œå°±æ˜¯è¯´ <code>SecurityManager</code> è¦éªŒè¯ç”¨æˆ·èº«ä»½ï¼Œé‚£ä¹ˆå®ƒéœ€è¦ä» <code>Realm</code> è·å–ç›¸åº”çš„ç”¨æˆ·è¿›è¡Œæ¯”è¾ƒä»¥ç¡®å®šç”¨æˆ·èº«ä»½æ˜¯å¦åˆæ³•ï¼›ä¹Ÿéœ€è¦ä» Realm å¾—åˆ°ç”¨æˆ·ç›¸åº”çš„è§’è‰²/æƒé™è¿›è¡ŒéªŒè¯ç”¨æˆ·æ˜¯å¦èƒ½è¿›è¡Œæ“ä½œï¼›å¯ä»¥æŠŠ <code>Realm</code> çœ‹æˆ DataSourceï¼Œå³å®‰å…¨æ•°æ®æºã€‚</p></li></ul><h3 id="securitymanager" tabindex="-1"><a class="header-anchor" href="#securitymanager" aria-hidden="true">#</a> SecurityManager</h3><p><code>SecurityManager</code> æ˜¯ Shiro æ¡†æ¶æ ¸å¿ƒä¸­çš„æ ¸å¿ƒï¼Œå®ƒç›¸å½“äº Shiro çš„æ€»æŒ‡æŒ¥ï¼Œè´Ÿè´£è°ƒåº¦æ‰€æœ‰è¡Œä¸ºï¼ŒåŒ…æ‹¬ï¼šè®¤è¯ã€æˆæƒã€è·å–å®‰å…¨æ•°æ®ï¼ˆè°ƒç”¨ <code>Realm</code>ï¼‰ã€ä¼šè¯ç®¡ç†ç­‰ã€‚</p><figure><img src="https://raw.githubusercontent.com/dunwu/images/master/cs/java/javaweb/standalone/security/shiro/ShiroArchitecture.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><code>SecurityManager</code> èšåˆäº†ä»¥ä¸‹ç»„ä»¶ï¼š</p><ul><li><strong>Authenticator</strong> - è®¤è¯å™¨ï¼Œè´Ÿè´£è®¤è¯ã€‚å¦‚æœç”¨æˆ·éœ€è¦å®šåˆ¶è®¤è¯ç­–ç•¥ï¼Œå¯ä»¥å®ç°æ­¤æ¥å£ã€‚</li><li><strong>Authorizer</strong> - æˆæƒå™¨ï¼Œè´Ÿè´£æƒé™æ§åˆ¶ã€‚ç”¨æ¥å†³å®šä¸»ä½“æ˜¯å¦æœ‰æƒé™è¿›è¡Œç›¸åº”çš„æ“ä½œï¼›å³æ§åˆ¶ç€ç”¨æˆ·èƒ½è®¿é—®åº”ç”¨ä¸­çš„å“ªäº›åŠŸèƒ½ï¼›</li><li><strong>SessionManager</strong> - ä¼šè¯ç®¡ç†å™¨ã€‚Shiro æŠ½è±¡äº†ä¸€ä¸ªè‡ªå·±çš„ Session æ¥ç®¡ç†ä¸»ä½“ä¸åº”ç”¨ä¹‹é—´äº¤äº’çš„æ•°æ®ã€‚</li><li><strong>SessionDAO</strong> - ä¼šè¯ DAO ç”¨äºå­˜å‚¨ä¼šè¯ï¼Œéœ€è¦ç”¨æˆ·è‡ªå·±å®ç°ã€‚</li><li><strong>CacheManager</strong> - ç¼“å­˜æ§åˆ¶å™¨ã€‚ç”¨äºç®¡ç†å¦‚ç”¨æˆ·ã€è§’è‰²ã€æƒé™ç­‰ä¿¡æ¯çš„ç¼“å­˜ã€‚</li><li><strong>Cryptography</strong> - å¯†ç å™¨ã€‚ç”¨äºå¯¹æ•°æ®åŠ å¯†ã€è§£å¯†ã€‚</li></ul><h2 id="äºŒã€shiro-è®¤è¯" tabindex="-1"><a class="header-anchor" href="#äºŒã€shiro-è®¤è¯" aria-hidden="true">#</a> äºŒã€Shiro è®¤è¯</h2><h3 id="è®¤è¯-subject" tabindex="-1"><a class="header-anchor" href="#è®¤è¯-subject" aria-hidden="true">#</a> è®¤è¯ Subject</h3><p>éªŒè¯ Subject çš„è¿‡ç¨‹å¯ä»¥æœ‰æ•ˆåœ°åˆ†ä¸ºä¸‰ä¸ªä¸åŒçš„æ­¥éª¤ï¼š</p><p>ï¼ˆ1ï¼‰æ”¶é›† <code>Subject</code> æäº¤çš„ <code>Principals</code> å’Œ <code>Credentials</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//Example using most common scenario of username/password pair:</span>
<span class="token class-name">UsernamePasswordToken</span> token <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UsernamePasswordToken</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//&quot;Remember Me&quot; built-in:</span>
token<span class="token punctuation">.</span><span class="token function">setRememberMe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ï¼ˆ2ï¼‰æäº¤ <code>Principals</code> å’Œ <code>Credentials</code> ä»¥è¿›è¡Œèº«ä»½éªŒè¯ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Subject</span> currentUser <span class="token operator">=</span> <span class="token class-name">SecurityUtils</span><span class="token punctuation">.</span><span class="token function">getSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

currentUser<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ï¼ˆ3ï¼‰å¦‚æœæäº¤æˆåŠŸï¼Œåˆ™å…è®¸è®¿é—®ï¼Œå¦åˆ™é‡è¯•èº«ä»½éªŒè¯æˆ–é˜»æ­¢è®¿é—®ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
    currentUser<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span> <span class="token class-name">UnknownAccountException</span> uae <span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span> <span class="token class-name">IncorrectCredentialsException</span> ice <span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span> <span class="token class-name">LockedAccountException</span> lae <span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span> <span class="token class-name">ExcessiveAttemptsException</span> eae <span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">catch</span> your own <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span> <span class="token class-name">AuthenticationException</span> ae <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//unexpected error?</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="remembered-å’Œ-authenticated" tabindex="-1"><a class="header-anchor" href="#remembered-å’Œ-authenticated" aria-hidden="true">#</a> Remembered å’Œ Authenticated</h3><ul><li><code>Remembered</code> - è®°ä½æˆ‘ã€‚è¢«è®°ä½çš„ <code>Subject</code> ä¸æ˜¯åŒ¿åçš„ï¼Œå¹¶ä¸”å…·æœ‰å·²çŸ¥çš„èº«ä»½ï¼ˆå³ <code>subject.getPrincipals()</code> æ˜¯éç©ºçš„ï¼‰ã€‚ ä½†æ˜¯ï¼Œåœ¨å…ˆå‰çš„ä¼šè¯æœŸé—´ï¼Œé€šè¿‡å…ˆå‰çš„èº«ä»½éªŒè¯ä¼šè®°ä½æ­¤èº«ä»½ã€‚ å¦‚æœ <code>subject.isRemembered()</code> è¿”å› <code>true</code>ï¼Œåˆ™è®¤ä¸ºè¯¥ä¸»é¢˜å·²è¢«è®°ä½ã€‚</li><li><code>Authenticated</code> - å·²è®¤è¯ã€‚å·²è®¤è¯çš„ <code>Subject</code> æ˜¯åœ¨å½“å‰ä¼šè¯æœŸé—´å·²æˆåŠŸè®¤è¯çš„ <code>Subject</code>ã€‚ å¦‚æœ <code>subject.isAuthenticated()</code> è¿”å› <code>true</code>ï¼Œåˆ™è®¤ä¸ºè¯¥ <code>Subject</code> å·²é€šè¿‡èº«ä»½éªŒè¯ã€‚</li></ul><h3 id="ç™»å‡º" tabindex="-1"><a class="header-anchor" href="#ç™»å‡º" aria-hidden="true">#</a> ç™»å‡º</h3><p>å½“ Subject ä¸åº”ç”¨ç¨‹åºå®Œæˆäº¤äº’åï¼Œå¯ä»¥è°ƒç”¨ <code>subject.logout()</code> ç™»å‡ºï¼Œå³æ”¾å¼ƒæ‰€æœ‰æ ‡è¯†ä¿¡æ¯ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>currentUser<span class="token punctuation">.</span><span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="è®¤è¯æµç¨‹" tabindex="-1"><a class="header-anchor" href="#è®¤è¯æµç¨‹" aria-hidden="true">#</a> è®¤è¯æµç¨‹</h3><figure><img src="https://raw.githubusercontent.com/dunwu/images/master/snap/20200317092427.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ol><li><p>åº”ç”¨ç¨‹åºä»£ç è°ƒç”¨ <code>Subject.login</code> æ–¹æ³•ï¼Œä¼ å…¥æ„é€ çš„ <code>AuthenticationToken</code> å®ä¾‹ï¼Œè¯¥å®ä¾‹ä»£è¡¨æœ€ç»ˆç”¨æˆ·çš„ <code>Principals</code> å’Œ <code>Credentials</code>ã€‚</p></li><li><p><code>Subject</code> å®ä¾‹ï¼ˆé€šå¸¸æ˜¯ <code>DelegatingSubject</code>ï¼ˆæˆ–å­ç±»ï¼‰ï¼‰é€šè¿‡è°ƒç”¨ <code>securityManager.login</code>ï¼ˆtokenï¼‰å§”æ‰˜åº”ç”¨ç¨‹åºçš„ <code>SecurityManager</code>ï¼Œåœ¨æ­¤å¤„å¼€å§‹å®é™…çš„èº«ä»½éªŒè¯å·¥ä½œã€‚</p></li><li><p><code>SecurityManager</code> æ¥æ”¶ä»¤ç‰Œï¼Œå¹¶é€šè¿‡è°ƒç”¨ <code>authenticator.authenticate</code>ï¼ˆtokenï¼‰æ¥ç®€å•åœ°å§”æ´¾ç»™å…¶å†…éƒ¨ <code>Authenticator</code> å®ä¾‹ã€‚è¿™å‡ ä¹æ€»æ˜¯ä¸€ä¸ª <code>ModularRealmAuthenticator</code> å®ä¾‹ï¼Œå®ƒæ”¯æŒåœ¨èº«ä»½éªŒè¯æœŸé—´åè°ƒä¸€ä¸ªæˆ–å¤šä¸ª <code>Realm</code> å®ä¾‹ã€‚</p></li><li><p>å¦‚æœä¸ºè¯¥åº”ç”¨ç¨‹åºé…ç½®äº†å¤šä¸ª <code>Realm</code>ï¼Œåˆ™ <code>ModularRealmAuthenticator</code> å®ä¾‹å°†åˆ©ç”¨å…¶é…ç½®çš„ <code>AuthenticationStrategy</code> å‘èµ·å¤šåŸŸéªŒè¯å°è¯•ã€‚åœ¨è°ƒç”¨é¢†åŸŸè¿›è¡Œèº«ä»½éªŒè¯ä¹‹å‰ï¼ŒæœŸé—´å’Œä¹‹åï¼Œå°†è°ƒç”¨ <code>AuthenticationStrategy</code> ä»¥ä½¿å…¶å¯¹æ¯ä¸ªé¢†åŸŸçš„ç»“æœåšå‡ºååº”ã€‚</p></li><li><p>è¯·å’¨è¯¢æ¯ä¸ªå·²é…ç½®çš„ <code>Realm</code>ï¼Œä»¥æŸ¥çœ‹å…¶æ˜¯å¦æ”¯æŒæäº¤çš„ <code>AuthenticationToken</code>ã€‚ å¦‚æœæ˜¯è¿™æ ·ï¼Œå°†ä½¿ç”¨æäº¤çš„ä»¤ç‰Œè°ƒç”¨æ”¯æŒ <code>Realm</code> çš„ <code>getAuthenticationInfo</code> æ–¹æ³•ã€‚ <code>getAuthenticationInfo</code> æ–¹æ³•æœ‰æ•ˆåœ°è¡¨ç¤ºå¯¹è¯¥ç‰¹å®š <code>Realm</code> çš„å•ä¸ªèº«ä»½éªŒè¯å°è¯•ã€‚</p></li></ol><h3 id="è®¤è¯ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#è®¤è¯ç­–ç•¥" aria-hidden="true">#</a> è®¤è¯ç­–ç•¥</h3><p>å½“ä¸ºä¸€ä¸ªåº”ç”¨ç¨‹åºé…ç½®ä¸¤ä¸ªæˆ–å¤šä¸ªé¢†åŸŸæ—¶ï¼Œ<code>ModularRealmAuthenticator</code> ä¾èµ–äºå†…éƒ¨ <code>AuthenticationStrategy</code> ç»„ä»¶æ¥ç¡®å®šè®¤è¯å°è¯•æˆåŠŸæˆ–å¤±è´¥çš„æ¡ä»¶ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ª Realm æˆåŠŸåœ°å¯¹ AuthenticationToken è¿›è¡Œèº«ä»½éªŒè¯ï¼Œè€Œæ‰€æœ‰å…¶ä»– Realm éƒ½å¤±è´¥äº†ï¼Œé‚£ä¹ˆè¯¥èº«ä»½éªŒè¯å°è¯•æ˜¯å¦è¢«è§†ä¸ºæˆåŠŸï¼Ÿè¿˜æ˜¯å¿…é¡»æ‰€æœ‰é¢†åŸŸéƒ½æˆåŠŸè¿›è¡Œèº«ä»½éªŒè¯æ‰èƒ½å°†æ•´ä½“å°è¯•è§†ä¸ºæˆåŠŸï¼Ÿæˆ–è€…ï¼Œå¦‚æœæŸä¸ªé¢†åŸŸæˆåŠŸé€šè¿‡èº«ä»½éªŒè¯ï¼Œæ˜¯å¦æœ‰å¿…è¦è¿›ä¸€æ­¥å’¨è¯¢å…¶ä»–é¢†åŸŸï¼Ÿ AuthenticationStrategy æ ¹æ®åº”ç”¨ç¨‹åºçš„éœ€æ±‚åšå‡ºé€‚å½“çš„å†³å®šã€‚</p><p><code>AuthenticationStrategy</code> æ˜¯æ— çŠ¶æ€ç»„ä»¶ï¼Œåœ¨å°è¯•è¿›è¡Œèº«ä»½éªŒè¯æ—¶ä¼šè¢«æŸ¥è¯¢ 4 æ¬¡ï¼ˆè¿™ 4 ç§äº¤äº’æ‰€éœ€çš„ä»»ä½•å¿…è¦çŠ¶æ€éƒ½å°†ä½œä¸ºæ–¹æ³•å‚æ•°ç»™å‡ºï¼‰ï¼š</p><ul><li>åœ¨ä»»ä½•é¢†åŸŸè¢«è°ƒç”¨ä¹‹å‰</li><li>åœ¨è°ƒç”¨å•ä¸ª <code>Realm</code> çš„ <code>getAuthenticationInfo</code> æ–¹æ³•ä¹‹å‰</li><li>åœ¨è°ƒç”¨å•ä¸ª <code>Realm</code> çš„ <code>getAuthenticationInfo</code> æ–¹æ³•ä¹‹å</li><li>åœ¨æ‰€æœ‰é¢†åŸŸéƒ½è¢«è°ƒç”¨ä¹‹å</li></ul><p><code>AuthenticationStrategy</code> è¿˜è´Ÿè´£æ±‡æ€»æ¯ä¸ªæˆåŠŸ <code>Realm</code> çš„ç»“æœï¼Œå¹¶å°†å®ƒä»¬â€œæ†ç»‘â€æˆå•ä¸ª <code>AuthenticationInfo</code> è¡¨ç¤ºå½¢å¼ã€‚æœ€ç»ˆçš„èšåˆ <code>AuthenticationInfo</code> å®ä¾‹æ˜¯ <code>Authenticator</code> å®ä¾‹è¿”å›çš„ç»“æœï¼Œä¹Ÿæ˜¯ Shiro ç”¨æ¥è¡¨ç¤ºä¸»ä½“çš„æœ€ç»ˆèº«ä»½ï¼ˆä¹Ÿç§°ä¸ºå§”æ‰˜äººï¼‰çš„ä¸œè¥¿ã€‚</p>`,41),u=n("thead",null,[n("tr",null,[n("th",{style:{"text-align":"left"}},[n("code",null,"AuthenticationStrategy")]),n("th",{style:{"text-align":"left"}},"æè¿°")])],-1),d={style:{"text-align":"left"}},h={href:"http://shiro.apache.org/static/current/apidocs/org/apache/shiro/authc/pam/AtLeastOneSuccessfulStrategy.html",target:"_blank",rel:"noopener noreferrer"},k=n("code",null,"AtLeastOneSuccessfulStrategy",-1),m=n("td",{style:{"text-align":"left"}},[a("åªè¦æœ‰ä¸€ä¸ª "),n("code",null,"Realm"),a(" æˆåŠŸè®¤è¯ï¼Œåˆ™æ•´ä¸ªå°è¯•éƒ½è¢«è§†ä¸ºæˆåŠŸã€‚")],-1),g={style:{"text-align":"left"}},b={href:"http://shiro.apache.org/static/current/apidocs/org/apache/shiro/authc/pam/FirstSuccessfulStrategy.html",target:"_blank",rel:"noopener noreferrer"},v=n("code",null,"FirstSuccessfulStrategy",-1),f=n("td",{style:{"text-align":"left"}},[a("ä»…ä½¿ç”¨ä»ç¬¬ä¸€ä¸ªæˆåŠŸé€šè¿‡èº«ä»½éªŒè¯çš„ "),n("code",null,"Realm"),a(" è¿”å›çš„ä¿¡æ¯ï¼Œæ‰€æœ‰å…¶ä»– Realm å°†è¢«å¿½ç•¥ã€‚")],-1),_={style:{"text-align":"left"}},S={href:"http://shiro.apache.org/static/current/apidocs/org/apache/shiro/authc/pam/AllSuccessfulStrategy.html",target:"_blank",rel:"noopener noreferrer"},y=n("code",null,"AllSuccessfulStrategy",-1),w=n("td",{style:{"text-align":"left"}},[a("åªæœ‰æ‰€æœ‰ "),n("code",null,"Realm"),a(" æˆåŠŸè®¤è¯ï¼Œåˆ™æ•´ä¸ªå°è¯•æ‰è¢«è§†ä¸ºæˆåŠŸã€‚")],-1),x={href:"http://shiro.apache.org/authentication.html#apache-shiro-authentication",target:"_blank",rel:"noopener noreferrer"},j=t(`<h2 id="ä¸‰ã€shiro-æˆæƒ" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€shiro-æˆæƒ" aria-hidden="true">#</a> ä¸‰ã€Shiro æˆæƒ</h2><p>æˆæƒï¼Œä¹Ÿç§°ä¸ºè®¿é—®æ§åˆ¶ï¼Œæ˜¯ç®¡ç†å¯¹èµ„æºçš„è®¿é—®çš„è¿‡ç¨‹ã€‚ æ¢å¥è¯è¯´ï¼Œæ§åˆ¶è°æœ‰æƒè®¿é—®åº”ç”¨ç¨‹åºä¸­çš„å†…å®¹ã€‚</p><h3 id="æˆæƒå…ƒç´ " tabindex="-1"><a class="header-anchor" href="#æˆæƒå…ƒç´ " aria-hidden="true">#</a> æˆæƒå…ƒç´ </h3><p>æˆæƒæœ‰ä¸‰ä¸ªæ ¸å¿ƒè¦ç´ ï¼šæƒé™ã€è§’è‰²å’Œç”¨æˆ·ã€‚</p><h4 id="æƒé™" tabindex="-1"><a class="header-anchor" href="#æƒé™" aria-hidden="true">#</a> æƒé™</h4><p>æƒé™ç¤ºä¾‹ï¼š</p><ul><li>æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶</li><li>æŸ¥çœ‹ <code>/user/list</code> web é¡µé¢</li><li>æŸ¥è¯¢è®°å½•</li><li>åˆ é™¤ä¸€æ¡è®°å½•</li><li>...</li></ul><p>å¤§å¤šæ•°èµ„æºéƒ½æ”¯æŒä¸€èˆ¬çš„ CRUD æ“ä½œã€‚é™¤æ­¤ä»¥å¤–ï¼Œå¯¹äºä¸€äº›ç‰¹å®šçš„èµ„æºï¼Œä»»ä½•æœ‰æ„ä¹‰çš„è¡Œä¸ºéƒ½æ˜¯å¯ä»¥çš„ã€‚åŸºæœ¬çš„è®¾è®¡æ€è·¯æ˜¯ï¼šæƒé™æ§åˆ¶ï¼Œè‡³å°‘æ˜¯åŸºäºèµ„æºå’Œè¡Œä¸ºã€‚</p><h4 id="è§’è‰²" tabindex="-1"><a class="header-anchor" href="#è§’è‰²" aria-hidden="true">#</a> è§’è‰²</h4><p>è§’è‰²æ˜¯ä¸€ä¸ªå‘½åå®ä½“ï¼Œé€šå¸¸ä»£è¡¨ä¸€ç»„è¡Œä¸ºæˆ–èŒè´£ã€‚è¿™äº›è¡Œä¸ºä¼šè½¬åŒ–ä¸ºï¼šè°å¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­æ‰§è¡Œå“ªäº›è¡Œä¸ºï¼Ÿè°ä¸å¯ä»¥åœ¨ç¨‹åºä¸­æ‰§è¡Œå“ªäº›è¡Œä¸ºï¼Ÿ</p><p>è§’è‰²é€šå¸¸æ˜¯åˆ†é…ç»™ç”¨æˆ·å¸æˆ·çš„ï¼Œå› æ­¤é€šè¿‡å…³è”ï¼Œç”¨æˆ·å¯ä»¥è·å¾—è‡ªèº«è§’è‰²æ‰€èµ‹äºˆçš„æƒé™ã€‚</p><h4 id="ç”¨æˆ·" tabindex="-1"><a class="header-anchor" href="#ç”¨æˆ·" aria-hidden="true">#</a> ç”¨æˆ·</h4><p>ç”¨æˆ·æœ¬è´¨ä¸Šæ˜¯åº”ç”¨ç¨‹åºçš„â€œç”¨æˆ·â€ã€‚</p><p>ç”¨æˆ·ï¼ˆå³ Shiro çš„ <code>Subject</code>ï¼‰é€šè¿‡ä¸è§’è‰²æˆ–ç›´æ¥æƒé™çš„å…³è”åœ¨åº”ç”¨ç¨‹åºä¸­æ‰§è¡ŒæŸäº›è¡Œä¸ºã€‚</p><h3 id="åŸºäºè§’è‰²çš„æˆæƒ" tabindex="-1"><a class="header-anchor" href="#åŸºäºè§’è‰²çš„æˆæƒ" aria-hidden="true">#</a> åŸºäºè§’è‰²çš„æˆæƒ</h3><p>å¦‚æœæˆæƒæ˜¯åŸºäºè§’è‰²èµ‹äºˆæƒé™çš„æ•°æ®æ¨¡å‹ï¼Œç¼–ç¨‹æ¨¡å¼å¦‚ä¸‹ï¼š</p><p>ã€ç¤ºä¾‹ä¸€ã€‘</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Subject currentUser = SecurityUtils.getSubject();

if (currentUser.hasRole(&quot;administrator&quot;)) {
    //show the admin button
} else {
    //don&#39;t show the button?  Grey it out?
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ã€ç¤ºä¾‹äºŒã€‘</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Subject currentUser = SecurityUtils.getSubject();

// æ£€æŸ¥å½“å‰ Subject æ˜¯å¦æœ‰æŸç§æƒé™
// å¦‚æœæœ‰ï¼Œç›´æ¥è·³è¿‡ï¼›å¦‚æœæ²¡æœ‰ï¼ŒShiro ä¼šæŠ›å‡º AuthorizationException
currentUser.checkRole(&quot;bankTeller&quot;);
openBankAccount();
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>æç¤ºï¼šæ–¹å¼äºŒç›¸æ¯”æ–¹å¼ä¸€ï¼Œä»£ç æ›´ç®€æ´</p></blockquote><h3 id="åŸºäºæƒé™çš„æˆæƒ" tabindex="-1"><a class="header-anchor" href="#åŸºäºæƒé™çš„æˆæƒ" aria-hidden="true">#</a> åŸºäºæƒé™çš„æˆæƒ</h3><p><strong>æ›´å¥½çš„æˆæƒç­–ç•¥é€šå¸¸æ˜¯åŸºäºæƒé™çš„æˆæƒ</strong>ã€‚åŸºäºæƒé™çš„æˆæƒï¼Œç”±äºå®ƒå’Œåº”ç”¨ç¨‹åºçš„åŸå§‹åŠŸèƒ½ï¼ˆé’ˆå¯¹å…·ä½“èµ„æºä¸Šçš„è¡Œä¸ºï¼‰ç´§å¯†ç›¸å…³ï¼Œæ‰€ä»¥åŸºäºæƒé™çš„æˆæƒæºä»£ç ä¼šåœ¨åŠŸèƒ½æ›´æ”¹æ—¶åŒæ­¥æ›´æ”¹ï¼ˆè€Œä¸æ˜¯åœ¨å®‰å…¨ç­–ç•¥å‘ç”Ÿæ›´æ”¹æ—¶ï¼‰ã€‚ è¿™æ„å‘³ç€ä¸ç±»ä¼¼çš„åŸºäºè§’è‰²çš„æˆæƒä»£ç ç›¸æ¯”ï¼Œä¿®æ”¹ä»£ç çš„å½±å“é¢è¦å°å¾—å¤šã€‚</p><p>ã€ç¤ºä¾‹ã€‘åŸºäºå¯¹è±¡çš„æƒé™æ£€æŸ¥</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Permission</span> printPermission <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrinterPermission</span><span class="token punctuation">(</span><span class="token string">&quot;laserjet4400n&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;print&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Subject</span> currentUser <span class="token operator">=</span> <span class="token class-name">SecurityUtils</span><span class="token punctuation">.</span><span class="token function">getSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>currentUser<span class="token punctuation">.</span><span class="token function">isPermitted</span><span class="token punctuation">(</span>printPermission<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//show the Print button</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">//don&#39;t show the button?  Grey it out?</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å¯¹è±¡ä¸­å­˜å‚¨æƒé™æ§åˆ¶ä¿¡æ¯ï¼Œä½†è¿™ç§æ–¹å¼è¾ƒä¸ºç¹é‡</p><p>ã€ç¤ºä¾‹ã€‘å­—ç¬¦ä¸²å®šä¹‰æƒé™æ§åˆ¶ä¿¡æ¯</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Subject</span> currentUser <span class="token operator">=</span> <span class="token class-name">SecurityUtils</span><span class="token punctuation">.</span><span class="token function">getSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>currentUser<span class="token punctuation">.</span><span class="token function">isPermitted</span><span class="token punctuation">(</span><span class="token string">&quot;printer:print:laserjet4400n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//show the Print button</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">//don&#39;t show the button?  Grey it out?</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨ : åˆ†éš”ï¼Œè¡¨ç¤ºèµ„æºç±»å‹ã€è¡Œä¸ºã€èµ„æº IDï¼ŒShiro æä¾›äº†é»˜è®¤å®ç°ï¼š <code>org.apache.shiro.authz.permission.WildcardPermission</code>ã€‚</p><p>è¿™ç§æƒé™æ§åˆ¶æ–¹å¼çš„å¥½å¤„åœ¨äºï¼šè½»é‡ã€çµæ´»ã€‚</p><h3 id="åŸºäºæ³¨è§£çš„æˆæƒ" tabindex="-1"><a class="header-anchor" href="#åŸºäºæ³¨è§£çš„æˆæƒ" aria-hidden="true">#</a> åŸºäºæ³¨è§£çš„æˆæƒ</h3><p>Shiro æä¾›äº†ä¸€äº›ç”¨äºæˆæƒçš„æ³¨è§£ï¼Œæ¥è¿›ä¸€æ­¥ç®€åŒ–æˆæƒä»£ç ã€‚</p><h4 id="requiresauthentication" tabindex="-1"><a class="header-anchor" href="#requiresauthentication" aria-hidden="true">#</a> <code>@RequiresAuthentication</code></h4><p><code>@RequiresAuthentication</code> æ³¨è§£è¦æ±‚å½“å‰ <code>Subject</code> å¿…é¡»æ˜¯å·²è®¤è¯ç”¨æˆ·æ‰å¯ä»¥è®¿é—®è¢«ä¿®é¥°çš„æ–¹æ³•ã€‚</p><p>ã€ç¤ºä¾‹ã€‘</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RequiresAuthentication</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateAccount</span><span class="token punctuation">(</span><span class="token class-name">Account</span> userAccount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//this method will only be invoked by a</span>
    <span class="token comment">//Subject that is guaranteed authenticated</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="requiresguest" tabindex="-1"><a class="header-anchor" href="#requiresguest" aria-hidden="true">#</a> <code>@RequiresGuest</code></h4><p><code>@RequiresGuest</code> æ³¨è§£è¦æ±‚å½“å‰ <code>Subject</code> çš„è§’è‰²æ˜¯ <code>guest</code> æ‰å¯ä»¥è®¿é—®è¢«ä¿®é¥°çš„æ–¹æ³•ã€‚</p><h3 id="æˆæƒæµç¨‹" tabindex="-1"><a class="header-anchor" href="#æˆæƒæµç¨‹" aria-hidden="true">#</a> æˆæƒæµç¨‹</h3><figure><img src="https://raw.githubusercontent.com/dunwu/images/master/snap/20200317092618.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>`,40),A=n("li",null,[n("p",null,[a("åº”ç”¨ç¨‹åºæˆ–æ¡†æ¶ä»£ç è°ƒç”¨ä»»ä½• "),n("code",null,"Subject"),a(" çš„ "),n("code",null,"hasRole*"),a("ï¼Œ"),n("code",null,"checkRole*"),a("ï¼Œ"),n("code",null,"isPermitted*"),a(" æˆ– "),n("code",null,"checkPermission*"),a(" æ–¹æ³•ï¼Œå¹¶ä¼ å…¥æ‰€éœ€çš„æƒé™æˆ–è§’è‰²ã€‚")])],-1),R=n("code",null,"Subject",-1),P=n("code",null,"DelegatingSubject",-1),q=n("code",null,"securityManager",-1),z=n("code",null,"hasRole*",-1),U=n("code",null,"checkRole*",-1),M=n("code",null,"isPermitted*",-1),F=n("code",null,"checkPermission*",-1),C=n("code",null,"SecurityManager",-1),B={href:"http://shiro.apache.org/static/current/apidocs/org/apache/shiro/authz/Authorizer.html",target:"_blank",rel:"noopener noreferrer"},N=n("code",null,"org.apache.shiro.authz.Authorizer",-1),T=t("<li><p><code>SecurityManager</code> é€šè¿‡è°ƒç”¨æˆæƒè€…å„è‡ªçš„ <code>hasRole*</code>ï¼Œ<code>checkRole*</code>ï¼Œ<code>isPermitted*</code> æˆ– <code>checkPermission*</code> æ–¹æ³•æ¥ä¸­ç»§/å§”æ‰˜å…¶å†…éƒ¨çš„ <code>org.apache.shiro.authz.Authorizer</code> å®ä¾‹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>authorizer</code> å®ä¾‹æ˜¯ <code>ModularRealmAuthorizer</code> å®ä¾‹ï¼Œè¯¥å®ä¾‹æ”¯æŒåœ¨ä»»ä½•æˆæƒæ“ä½œæœŸé—´åè°ƒä¸€ä¸ªæˆ–å¤šä¸ª <code>Realm</code> å®ä¾‹ã€‚</p></li><li><p>æ£€æŸ¥æ¯ä¸ªå·²é…ç½®çš„ <code>Realm</code>ï¼Œä»¥æŸ¥çœ‹å…¶æ˜¯å¦å®ç°ç›¸åŒçš„ <code>Authorizer</code> æ¥å£ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œåˆ™å°†è°ƒç”¨ <code>Realm</code> å„è‡ªçš„ <code>hasRole*</code>ï¼Œ<code>checkRole*</code>ï¼Œ<code>isPermitted*</code> æˆ– <code>checkPermission*</code> æ–¹æ³•ã€‚</p></li>",2),E={href:"http://shiro.apache.org/authorization.html#apache-shiro-authorization",target:"_blank",rel:"noopener noreferrer"},I=n("h2",{id:"å››ã€shiro-ä¼šè¯ç®¡ç†",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#å››ã€shiro-ä¼šè¯ç®¡ç†","aria-hidden":"true"},"#"),a(" å››ã€Shiro ä¼šè¯ç®¡ç†")],-1),G=n("p",null,"Shiro æä¾›äº†ä¸€å¥—ç‹¬ç‰¹çš„ä¼šè¯ç®¡ç†æ–¹æ¡ˆï¼šå…¶ Session å¯ä»¥ä½¿ç”¨ Java SE ç¨‹åºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨äº Java Web ç¨‹åºã€‚",-1),L={href:"http://shiro.apache.org/session-management.html#the-sessionmanager",target:"_blank",rel:"noopener noreferrer"},D=n("code",null,"Subject",-1),O=t(`<p>ã€ç¤ºä¾‹ã€‘ä¼šè¯ä½¿ç”¨ç¤ºä¾‹</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Subject</span> currentUser <span class="token operator">=</span> <span class="token class-name">SecurityUtils</span><span class="token punctuation">.</span><span class="token function">getSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Session</span> session <span class="token operator">=</span> currentUser<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span> <span class="token string">&quot;someKey&quot;</span><span class="token punctuation">,</span> someValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä¼šè¯è¶…æ—¶" tabindex="-1"><a class="header-anchor" href="#ä¼šè¯è¶…æ—¶" aria-hidden="true">#</a> ä¼šè¯è¶…æ—¶</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒShiro ä¸­çš„ä¼šè¯æœ‰æ•ˆæœŸä¸º 30 åˆ†é’Ÿï¼Œè¶…æ—¶åï¼Œè¯¥ä¼šè¯å°†è¢« Shiro è§†ä¸ºæ— æ•ˆã€‚</p><p>å¯ä»¥é€šè¿‡ <code>globalSessionTimeout</code> æ–¹æ³•è®¾ç½® Shiro ä¼šè¯è¶…æ—¶æ—¶é—´ã€‚</p><h3 id="ä¼šè¯ç›‘å¬" tabindex="-1"><a class="header-anchor" href="#ä¼šè¯ç›‘å¬" aria-hidden="true">#</a> ä¼šè¯ç›‘å¬</h3><p>Shiro æä¾›äº† <code>SessionListener</code> æ¥å£ï¼ˆæˆ– <code>SessionListenerAdapter</code> æ¥å£ï¼‰ï¼Œç”¨äºç›‘å¬é‡è¦çš„ä¼šè¯äº‹ä»¶ï¼Œå¹¶å…è®¸ä½¿ç”¨è€…åœ¨äº‹ä»¶è§¦å‘æ—¶åšå®šåˆ¶åŒ–å¤„ç†ã€‚</p><p>ã€ç¤ºä¾‹ã€‘</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShiroSessionListener</span> <span class="token keyword">implements</span> <span class="token class-name">SessionListener</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">AtomicInteger</span> sessionCount <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AtomicInteger</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onStart</span><span class="token punctuation">(</span><span class="token class-name">Session</span> session<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        sessionCount<span class="token punctuation">.</span><span class="token function">incrementAndGet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onStop</span><span class="token punctuation">(</span><span class="token class-name">Session</span> session<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        sessionCount<span class="token punctuation">.</span><span class="token function">decrementAndGet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onExpiration</span><span class="token punctuation">(</span><span class="token class-name">Session</span> session<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        sessionCount<span class="token punctuation">.</span><span class="token function">decrementAndGet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä¼šè¯å­˜å‚¨" tabindex="-1"><a class="header-anchor" href="#ä¼šè¯å­˜å‚¨" aria-hidden="true">#</a> ä¼šè¯å­˜å‚¨</h3><p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”ç”¨éœ€è¦ä¿å­˜ä¼šè¯ä¿¡æ¯ï¼Œä»¥ä¾¿åœ¨ç¨åå¯ä»¥ä½¿ç”¨å®ƒã€‚</p><p>Shiro æä¾›äº† <code>SessionManager</code> æ¥å£ï¼Œè´Ÿè´£å°†é’ˆå¯¹ä¼šè¯çš„ CRUD æ“ä½œå§”æ´¾ç»™å†…éƒ¨ç»„ä»¶ <code>SessionDAO</code>ï¼Œè¯¥ç»„ä»¶åæ˜ äº†æ•°æ®è®¿é—®å¯¹è±¡ï¼ˆDAOï¼‰è®¾è®¡æ¨¡å¼ã€‚</p><blockquote><p>ğŸ”” æ³¨æ„ï¼šç”±äºä¼šè¯é€šå¸¸å…·æœ‰æ—¶æ•ˆæ€§ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¼šè¯å¤©ç„¶é€‚åˆå­˜å‚¨äºç¼“å­˜ä¸­ã€‚å­˜å‚¨äº Redis ä¸­æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p></blockquote><h2 id="äº”ã€realm" tabindex="-1"><a class="header-anchor" href="#äº”ã€realm" aria-hidden="true">#</a> äº”ã€Realm</h2><p><code>Realm</code> æ˜¯ Shiro è®¿é—®ç¨‹åºå®‰å…¨ç›¸å…³æ•°æ®ï¼ˆå¦‚ï¼šç”¨æˆ·ã€è§’è‰²ã€æƒé™ï¼‰çš„æ¥å£ã€‚</p><p><code>Realm</code> æ˜¯æœ‰å¼€å‘è€…è‡ªå·±å®ç°çš„ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡å®ç° Realm æ¥å£ï¼Œæ¥å…¥åº”ç”¨çš„æ•°æ®æºï¼Œå¦‚ï¼šJDBCã€æ–‡ä»¶ã€Nosql ç­‰ç­‰ã€‚</p><h3 id="è®¤è¯ä»¤ç‰Œ" tabindex="-1"><a class="header-anchor" href="#è®¤è¯ä»¤ç‰Œ" aria-hidden="true">#</a> è®¤è¯ä»¤ç‰Œ</h3>`,17),H={href:"http://shiro.apache.org/static/current/apidocs/org/apache/shiro/realm/Realm.html#getAuthenticationInfo-org.apache.shiro.authc.AuthenticationToken-",target:"_blank",rel:"noopener noreferrer"},W=t(`<p>ä»¤ç‰Œè®¤è¯å¤„ç†æµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>æ£€æŸ¥ç”¨äºæ ‡è¯† principal çš„ä»¤ç‰Œï¼ˆå¸æˆ·æ ‡è¯†ä¿¡æ¯ï¼‰ã€‚</li><li>æ ¹æ® principalï¼Œåœ¨æ•°æ®æºä¸­æŸ¥æ‰¾ç›¸åº”çš„å¸æˆ·æ•°æ®ã€‚</li><li>ç¡®ä¿ä»¤ç‰Œæä¾›çš„å‡­è¯ä¸æ•°æ®å­˜å‚¨ä¸­å­˜å‚¨çš„å‡­è¯åŒ¹é…ã€‚</li><li>å¦‚æœ credentials åŒ¹é…ï¼Œåˆ™è¿”å› <code>AuthenticationInfo</code> å®ä¾‹ã€‚</li><li>å¦‚æœ credentials ä¸åŒ¹é…ï¼Œåˆ™æŠ›å‡º <code>AuthenticationException</code> å¼‚å¸¸ã€‚</li></ol><h3 id="åŠ å¯†" tabindex="-1"><a class="header-anchor" href="#åŠ å¯†" aria-hidden="true">#</a> åŠ å¯†</h3><p>é€šè¿‡å‰æ–‡ï¼Œå¯ä»¥äº†è§£ï¼šShiro éœ€è¦é€šè¿‡ä¸€å¯¹ principal å’Œ credentials æ¥ç¡®è®¤èº«ä»½æ˜¯å¦åŒ¹é…ï¼ˆå³è®¤è¯ï¼‰ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œæˆç†Ÿè½¯ä»¶æ˜¯ä¸å…è®¸å­˜å‚¨è´¦æˆ·ã€å¯†ç è¿™äº›æ•æ„Ÿæ•°æ®æ—¶ï¼Œä½¿ç”¨æ˜æ–‡å­˜å‚¨ã€‚æ‰€ä»¥ï¼Œé€šå¸¸è¦å°†å¯†ç åŠ å¯†åå­˜å‚¨ã€‚</p><p>Shiro æä¾›äº†ä¸€äº›åŠ å¯†å™¨ï¼Œå…¶æ€æƒ³å°±æ˜¯ç”¨ MD5ã€SHA è¿™ç§æ•°å­—ç­¾åç®—æ³•ï¼ŒåŠ  Saltï¼Œç„¶åè½¬ä¸º Base64 å­—ç¬¦ä¸²ã€‚ä¸ºäº†é¿å…è¢«æš´åŠ›ç ´è§£ï¼ŒShiro ä½¿ç”¨å¤šæ¬¡åŠ å¯†çš„æ–¹å¼è·å¾—æœ€ç»ˆçš„ credentials å­—ç¬¦ä¸²ã€‚</p><p>ã€ç¤ºä¾‹ã€‘Shiro åŠ å¯†å¯†ç ç¤ºä¾‹</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>hash<span class="token punctuation">.</span></span><span class="token class-name">Sha256Hash</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span></span><span class="token class-name">RandomNumberGenerator</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span></span><span class="token class-name">SecureRandomNumberGenerator</span></span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token comment">//We&#39;ll use a Random Number Generator to generate salts.  This</span>
<span class="token comment">//is much more secure than using a username as a salt or not</span>
<span class="token comment">//having a salt at all.  Shiro makes this easy.</span>
<span class="token comment">//</span>
<span class="token comment">//Note that a normal app would reference an attribute rather</span>
<span class="token comment">//than create a new RNG every time:</span>
<span class="token class-name">RandomNumberGenerator</span> rng <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SecureRandomNumberGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Object</span> salt <span class="token operator">=</span> rng<span class="token punctuation">.</span><span class="token function">nextBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Now hash the plain-text password with the random salt and multiple</span>
<span class="token comment">//iterations and then Base64-encode the value (requires less space than Hex):</span>
<span class="token class-name">String</span> hashedPasswordBase64 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sha256Hash</span><span class="token punctuation">(</span>plainTextPassword<span class="token punctuation">,</span> salt<span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBase64</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> hashedPasswordBase64<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//save the salt with the new account.  The HashedCredentialsMatcher</span>
<span class="token comment">//will need it later when handling login attempts:</span>
user<span class="token punctuation">.</span><span class="token function">setPasswordSalt</span><span class="token punctuation">(</span>salt<span class="token punctuation">)</span><span class="token punctuation">;</span>
userDAO<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å…­ã€é…ç½®" tabindex="-1"><a class="header-anchor" href="#å…­ã€é…ç½®" aria-hidden="true">#</a> å…­ã€é…ç½®</h2><h3 id="è¿‡æ»¤é“¾" tabindex="-1"><a class="header-anchor" href="#è¿‡æ»¤é“¾" aria-hidden="true">#</a> è¿‡æ»¤é“¾</h3><p>è¿è¡Œ Web åº”ç”¨ç¨‹åºæ—¶ï¼ŒShiro å°†åˆ›å»ºä¸€äº›æœ‰ç”¨çš„é»˜è®¤ Filter å®ä¾‹ã€‚</p>`,11),V=n("thead",null,[n("tr",null,[n("th",{style:{"text-align":"left"}},"Filter Name"),n("th",{style:{"text-align":"left"}},"Class")])],-1),J=n("td",{style:{"text-align":"left"}},"anon",-1),K={style:{"text-align":"left"}},X={href:"http://shiro.apache.org/static/current/apidocs/org/apache/shiro/web/filter/authc/AnonymousFilter.html",target:"_blank",rel:"noopener noreferrer"},Q=n("td",{style:{"text-align":"left"}},"authc",-1),Y={style:{"text-align":"left"}},Z={href:"http://shiro.apache.org/static/current/apidocs/org/apache/shiro/web/filter/authc/FormAuthenticationFilter.html",target:"_blank",rel:"noopener noreferrer"},$=n("td",{style:{"text-align":"left"}},"authcBasic",-1),nn={style:{"text-align":"left"}},an={href:"http://shiro.apache.org/static/current/apidocs/org/apache/shiro/web/filter/authc/BasicHttpAuthenticationFilter.html",target:"_blank",rel:"noopener noreferrer"},sn=n("td",{style:{"text-align":"left"}},"logout",-1),en={style:{"text-align":"left"}},tn={href:"http://shiro.apache.org/static/current/apidocs/org/apache/shiro/web/filter/authc/LogoutFilter.html",target:"_blank",rel:"noopener noreferrer"},on=n("td",{style:{"text-align":"left"}},"noSessionCreation",-1),cn={style:{"text-align":"left"}},ln={href:"http://shiro.apache.org/static/current/apidocs/org/apache/shiro/web/filter/session/NoSessionCreationFilter.html",target:"_blank",rel:"noopener noreferrer"},pn=n("td",{style:{"text-align":"left"}},"perms",-1),rn={style:{"text-align":"left"}},un={href:"http://shiro.apache.org/static/current/apidocs/org/apache/shiro/web/filter/authz/PermissionsAuthorizationFilter.html",target:"_blank",rel:"noopener noreferrer"},dn=n("td",{style:{"text-align":"left"}},"port",-1),hn={style:{"text-align":"left"}},kn={href:"http://shiro.apache.org/static/current/apidocs/org/apache/shiro/web/filter/authz/PortFilter.html",target:"_blank",rel:"noopener noreferrer"},mn=n("td",{style:{"text-align":"left"}},"rest",-1),gn={style:{"text-align":"left"}},bn={href:"http://shiro.apache.org/static/current/apidocs/org/apache/shiro/web/filter/authz/HttpMethodPermissionFilter.html",target:"_blank",rel:"noopener noreferrer"},vn=n("td",{style:{"text-align":"left"}},"roles",-1),fn={style:{"text-align":"left"}},_n={href:"http://shiro.apache.org/static/current/apidocs/org/apache/shiro/web/filter/authz/RolesAuthorizationFilter.html",target:"_blank",rel:"noopener noreferrer"},Sn=n("td",{style:{"text-align":"left"}},"ssl",-1),yn={style:{"text-align":"left"}},wn={href:"http://shiro.apache.org/static/current/apidocs/org/apache/shiro/web/filter/authz/SslFilter.html",target:"_blank",rel:"noopener noreferrer"},xn=n("td",{style:{"text-align":"left"}},"user",-1),jn={style:{"text-align":"left"}},An={href:"http://shiro.apache.org/static/current/apidocs/org/apache/shiro/web/filter/authc/UserFilter.html",target:"_blank",rel:"noopener noreferrer"},Rn=t(`<h3 id="rememberme" tabindex="-1"><a class="header-anchor" href="#rememberme" aria-hidden="true">#</a> RememberMe</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">UsernamePasswordToken</span> token <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UsernamePasswordToken</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
token<span class="token punctuation">.</span><span class="token function">setRememberMe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">SecurityUtils</span><span class="token punctuation">.</span><span class="token function">getSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å‚è€ƒèµ„æ–™" tabindex="-1"><a class="header-anchor" href="#å‚è€ƒèµ„æ–™" aria-hidden="true">#</a> å‚è€ƒèµ„æ–™</h2>`,3),Pn={href:"http://shiro.apache.org/reference.html",target:"_blank",rel:"noopener noreferrer"},qn={href:"http://jinnianshilongnian.iteye.com/category/305053",target:"_blank",rel:"noopener noreferrer"},zn={href:"https://stormpath.com/blog/new-rbac-resource-based-access-control",target:"_blank",rel:"noopener noreferrer"};function Un(Mn,Fn){const s=c("ExternalLinkIcon");return i(),l("div",null,[r,n("table",null,[u,n("tbody",null,[n("tr",null,[n("td",d,[n("a",h,[k,e(s)])]),m]),n("tr",null,[n("td",g,[n("a",b,[v,e(s)])]),f]),n("tr",null,[n("td",_,[n("a",S,[y,e(s)])]),w])])]),n("blockquote",null,[n("p",null,[a("ğŸ”— æ›´å¤šè®¤è¯ç»†èŠ‚å¯ä»¥å‚è€ƒï¼š"),n("a",x,[a("Apache Shiro Authentication"),e(s)])])]),j,n("ol",null,[A,n("li",null,[n("p",null,[R,a(" å®ä¾‹ï¼Œé€šå¸¸æ˜¯ "),P,a("ï¼ˆæˆ–å­ç±»ï¼‰ï¼Œé€šè¿‡è°ƒç”¨ "),q,a(" å‡ ä¹ç›¸åŒçš„å„è‡ª "),z,a("ï¼Œ"),U,a("ï¼Œ"),M,a(" æˆ– "),F,a(" æ–¹æ³•æ¥å§”æ‰˜ "),C,a(" ï¼ˆå®ç°äº† "),n("a",B,[N,e(s)]),a(" æ¥å£ï¼‰å¤„ç†æˆæƒã€‚")])]),T]),n("blockquote",null,[n("p",null,[a("ğŸ”— æ›´å¤šæˆæƒç»†èŠ‚å¯ä»¥å‚è€ƒï¼š"),n("a",E,[a("Apache Shiro Authorization"),e(s)])])]),I,G,n("p",null,[a("åœ¨ Shiro ä¸­ï¼Œ"),n("a",L,[a("SessionManager"),e(s)]),a(" è´Ÿè´£ç®¡ç†åº”ç”¨æ‰€æœ‰ "),D,a(" çš„ä¼šè¯ï¼Œå¦‚ï¼šåˆ›å»ºã€åˆ é™¤ã€å¤±æ•ˆã€éªŒè¯ç­‰ã€‚")]),O,n("p",null,[a("Shiro æ”¯æŒèº«ä»½éªŒè¯ä»¤ç‰Œã€‚åœ¨å’¨è¯¢ Realm è¿›è¡Œè®¤è¯å°è¯•ä¹‹å‰ï¼Œå°†è°ƒç”¨å…¶æ”¯æŒæ–¹æ³•ã€‚ å¦‚æœè¿”å›å€¼ä¸º trueï¼Œåˆ™ä»…ä¼šè°ƒç”¨å…¶ "),n("a",H,[a("getAuthenticationInfo(token)"),e(s)]),a(" æ–¹æ³•ã€‚é€šå¸¸ï¼ŒRealm ä¼šæ£€æŸ¥æ‰€æäº¤ä»¤ç‰Œçš„ç±»å‹ï¼ˆæ¥å£æˆ–ç±»ï¼‰ï¼Œä»¥æŸ¥çœ‹å…¶æ˜¯å¦å¯ä»¥å¤„ç†å®ƒã€‚")]),W,n("table",null,[V,n("tbody",null,[n("tr",null,[J,n("td",K,[n("a",X,[a("org.apache.shiro.web.filter.authc.AnonymousFilter"),e(s)])])]),n("tr",null,[Q,n("td",Y,[n("a",Z,[a("org.apache.shiro.web.filter.authc.FormAuthenticationFilter"),e(s)])])]),n("tr",null,[$,n("td",nn,[n("a",an,[a("org.apache.shiro.web.filter.authc.BasicHttpAuthenticationFilter"),e(s)])])]),n("tr",null,[sn,n("td",en,[n("a",tn,[a("org.apache.shiro.web.filter.authc.LogoutFilter"),e(s)])])]),n("tr",null,[on,n("td",cn,[n("a",ln,[a("org.apache.shiro.web.filter.session.NoSessionCreationFilter"),e(s)])])]),n("tr",null,[pn,n("td",rn,[n("a",un,[a("org.apache.shiro.web.filter.authz.PermissionsAuthorizationFilter"),e(s)])])]),n("tr",null,[dn,n("td",hn,[n("a",kn,[a("org.apache.shiro.web.filter.authz.PortFilter"),e(s)])])]),n("tr",null,[mn,n("td",gn,[n("a",bn,[a("org.apache.shiro.web.filter.authz.HttpMethodPermissionFilter"),e(s)])])]),n("tr",null,[vn,n("td",fn,[n("a",_n,[a("org.apache.shiro.web.filter.authz.RolesAuthorizationFilter"),e(s)])])]),n("tr",null,[Sn,n("td",yn,[n("a",wn,[a("org.apache.shiro.web.filter.authz.SslFilter"),e(s)])])]),n("tr",null,[xn,n("td",jn,[n("a",An,[a("org.apache.shiro.web.filter.authc.UserFilter"),e(s)])])])])]),Rn,n("ul",null,[n("li",null,[n("a",Pn,[a("Shiro å®˜æ–¹æ–‡æ¡£"),e(s)])]),n("li",null,[n("a",qn,[a("è·Ÿæˆ‘å­¦ Shiro"),e(s)])]),n("li",null,[n("a",zn,[a("The New RBAC: Resource-Based Access Control"),e(s)])])])])}const Nn=o(p,[["render",Un],["__file","index.html.vue"]]);export{Nn as default};
