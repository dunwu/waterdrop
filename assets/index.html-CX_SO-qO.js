import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as r,a,o as n}from"./app-CZqTuGk7.js";const o={};function p(i,e){return n(),r("div",null,[...e[0]||(e[0]=[a('<h1 id="系统架构面试" tabindex="-1"><a class="header-anchor" href="#系统架构面试"><span>系统架构面试</span></a></h1><h2 id="如何设计一个秒杀系统" tabindex="-1"><a class="header-anchor" href="#如何设计一个秒杀系统"><span>如何设计一个秒杀系统？</span></a></h2><h3 id="秒杀系统的挑战" tabindex="-1"><a class="header-anchor" href="#秒杀系统的挑战"><span>秒杀系统的挑战</span></a></h3><p>秒杀的核心问题就是<strong>极高并发处理</strong>，由于系统要在瞬时承受平时数十倍甚至上百倍的流量，这往往超出系统上限，因此处理秒杀的<strong>核心思路是限流和缓存</strong>。</p><h3 id="秒杀系统的解决思路" tabindex="-1"><a class="header-anchor" href="#秒杀系统的解决思路"><span>秒杀系统的解决思路</span></a></h3><ul><li>系统上有拦截流量：尽可能在上游拦截和限制请求，限制流入后端的量，保证后端系统正常。 因为无论多少人参与秒杀，实际成交往往是有限的，而且远小于参加秒杀的人数，因此可以通过前端系统进行拦截，限制最终流入系统的请求数量，来保证系统正常进行。</li><li>充分利用缓存：这是一个典型的读多写少的应用场景（一趟火车其实只有 2000 张票，200w 个人来买，最多 2000 个人下单成功，其他人都是查询库存，写比例只有 0.1%，读比例占 99.9%），非常适合使用缓存。</li></ul><h3 id="秒杀系统的解决方案" tabindex="-1"><a class="header-anchor" href="#秒杀系统的解决方案"><span>秒杀系统的解决方案</span></a></h3><p>秒杀系统具体方案如下：</p><p><strong>（1）浏览器、客户端拦截重复请求</strong></p><ul><li>用户点击查询或购买按钮后，禁用按钮，避免用户重复提交请求。</li><li>JS 代码中限制用户在限定时间内只允许提交一次请求</li></ul><p>基于此，大部分流量已被拦截。</p><p><strong>（2）应用层拦截请求</strong></p><p>浏览器、客户端拦截重复请求只能应付通过浏览器访问的用户。如果有人通过程序发送 http 请求，则无法拦截。针对这种情况的方案是：</p><p>以页面缓存的方式，针对短时间内的同一个访问源（如同一个 IP、同一个 Session、同一个用户 ID 多次发送 HTTP 请求）或同样的查询请求（如大量请求都是查询某类商品的库存），都返回相同的展示页面。</p><p>如此限流，又有大部分的流量被拦截</p><p>（3）服务层请求拦截与数据缓存</p><p>加入有黑客，控制了 10w 台肉鸡（并且假设买票不需要实名认证），前面的的限制都不起作用了。这时应该怎么办？</p><ul><li><p>读请求（查库存） - 对于读请求，直接使用缓存即可，一般缓存服务器单机处理每秒 10w 个请求应该没什么问题。</p></li><li><p>写请求（下单） - 由于服务层清楚的知道库存数量，所以完全可以根据库存数量进行限流。具体来说，就是把所有下单请求都丢该消息队列中，每次只取有限的写请求去数据层处理。当这些写请求处理完，更新一下缓存中的库存数，再去取下一批写请求，如果库存数不够，则消息队列的写请求全部返回&quot;已售罄&quot;的结果。</p></li></ul><blockquote><p>参考：</p><ul><li><a href="https://www.zhihu.com/question/54895548/answer/146924420" target="_blank" rel="noopener noreferrer">如何设计秒杀系统？ - 阿里云云栖社区的回答 - 知乎</a></li><li><a href="https://www.zhihu.com/question/54895548/answer/259218876" target="_blank" rel="noopener noreferrer">如何设计秒杀系统？ - 网易云的回答 - 知乎</a></li></ul></blockquote><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h2><ul><li><a href="https://www.zhihu.com/question/54895548/answer/146924420" target="_blank" rel="noopener noreferrer">如何设计秒杀系统？ - 阿里云云栖社区的回答 - 知乎</a></li><li><a href="https://www.zhihu.com/question/54895548/answer/259218876" target="_blank" rel="noopener noreferrer">如何设计秒杀系统？ - 网易云的回答 - 知乎</a></li></ul>',21)])])}const h=t(o,[["render",p]]),c=JSON.parse('{"path":"/pages/02d5c17d/","title":"系统架构面试","lang":"zh-CN","frontmatter":{"title":"系统架构面试","date":"2020-08-10T10:59:18.000Z","order":1,"categories":["设计","架构","综合"],"tags":["架构","面试"],"permalink":"/pages/02d5c17d/","description":"系统架构面试 如何设计一个秒杀系统？ 秒杀系统的挑战 秒杀的核心问题就是极高并发处理，由于系统要在瞬时承受平时数十倍甚至上百倍的流量，这往往超出系统上限，因此处理秒杀的核心思路是限流和缓存。 秒杀系统的解决思路 系统上有拦截流量：尽可能在上游拦截和限制请求，限制流入后端的量，保证后端系统正常。 因为无论多少人参与秒杀，实际成交往往是有限的，而且远小于参...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"系统架构面试\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2020-08-10T10:59:18.000Z\\",\\"dateModified\\":\\"2025-09-15T00:29:21.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"钝悟\\",\\"url\\":\\"https://dunwu.github.io/waterdrop\\"}]}"],["meta",{"property":"og:url","content":"https://dunwu.github.io/waterdrop/waterdrop/pages/02d5c17d/"}],["meta",{"property":"og:site_name","content":"钝悟"}],["meta",{"property":"og:title","content":"系统架构面试"}],["meta",{"property":"og:description","content":"系统架构面试 如何设计一个秒杀系统？ 秒杀系统的挑战 秒杀的核心问题就是极高并发处理，由于系统要在瞬时承受平时数十倍甚至上百倍的流量，这往往超出系统上限，因此处理秒杀的核心思路是限流和缓存。 秒杀系统的解决思路 系统上有拦截流量：尽可能在上游拦截和限制请求，限制流入后端的量，保证后端系统正常。 因为无论多少人参与秒杀，实际成交往往是有限的，而且远小于参..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-09-15T00:29:21.000Z"}],["meta",{"property":"article:tag","content":"面试"}],["meta",{"property":"article:tag","content":"架构"}],["meta",{"property":"article:published_time","content":"2020-08-10T10:59:18.000Z"}],["meta",{"property":"article:modified_time","content":"2025-09-15T00:29:21.000Z"}]]},"git":{"createdTime":1651071272000,"updatedTime":1757896161000,"contributors":[{"name":"dunwu","username":"dunwu","email":"forbreak@163.com","commits":7,"url":"https://github.com/dunwu"}]},"readingTime":{"minutes":2.89,"words":867},"filePathRelative":"03.设计/架构/综合/系统架构面试.md","excerpt":"\\n<h2>如何设计一个秒杀系统？</h2>\\n<h3>秒杀系统的挑战</h3>\\n<p>秒杀的核心问题就是<strong>极高并发处理</strong>，由于系统要在瞬时承受平时数十倍甚至上百倍的流量，这往往超出系统上限，因此处理秒杀的<strong>核心思路是限流和缓存</strong>。</p>\\n<h3>秒杀系统的解决思路</h3>\\n<ul>\\n<li>系统上有拦截流量：尽可能在上游拦截和限制请求，限制流入后端的量，保证后端系统正常。 因为无论多少人参与秒杀，实际成交往往是有限的，而且远小于参加秒杀的人数，因此可以通过前端系统进行拦截，限制最终流入系统的请求数量，来保证系统正常进行。</li>\\n<li>充分利用缓存：这是一个典型的读多写少的应用场景（一趟火车其实只有 2000 张票，200w 个人来买，最多 2000 个人下单成功，其他人都是查询库存，写比例只有 0.1%，读比例占 99.9%），非常适合使用缓存。</li>\\n</ul>","autoDesc":true}');export{h as comp,c as data};
