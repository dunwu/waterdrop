import{_ as p}from"./plugin-vue_export-helper-c27b6911.js";import{r as o,o as c,c as l,a as n,b as s,d as t,e}from"./app-25b76759.js";const i={},u=n("h1",{id:"spring-mvc-之视图技术",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#spring-mvc-之视图技术","aria-hidden":"true"},"#"),s(" Spring MVC 之视图技术")],-1),r=n("p",null,"Spring MVC 中视图技术的使用是可插拔的。无论决定使用 Thymeleaf、Groovy 等模板引擎、JSP 还是其他技术，都可以通过配置来更改。",-1),d=n("p",null,"Spring MVC 的视图位于该应用程序的内部信任边界内。 视图可以访问应用程序上下文的所有 bean。 因此，不建议在模板可由外部源编辑的应用程序中使用 Spring MVC 的模板支持，因为这可能会产生安全隐患。",-1),k=n("h2",{id:"thymeleaf",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#thymeleaf","aria-hidden":"true"},"#"),s(" Thymeleaf")],-1),m={href:"https://www.thymeleaf.org/",target:"_blank",rel:"noopener noreferrer"},v=n("code",null,"ServletContextTemplateResolver",-1),g=n("code",null,"SpringTemplateEngine",-1),b=n("code",null,"ThymeleafViewResolver",-1),h={href:"https://www.thymeleaf.org/documentation.html",target:"_blank",rel:"noopener noreferrer"},f=n("h2",{id:"freemarker",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#freemarker","aria-hidden":"true"},"#"),s(" FreeMarker")],-1),q={href:"https://freemarker.apache.org/",target:"_blank",rel:"noopener noreferrer"},w=e(`<h3 id="视图配置" tabindex="-1"><a class="header-anchor" href="#视图配置" aria-hidden="true">#</a> 视图配置</h3><p>以下示例显示了如何将 FreeMarker 配置为视图技术：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableWebMvc</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configureViewResolvers</span><span class="token punctuation">(</span><span class="token class-name">ViewResolverRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        registry<span class="token punctuation">.</span><span class="token function">freeMarker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Configure FreeMarker...</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">FreeMarkerConfigurer</span> <span class="token function">freeMarkerConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">FreeMarkerConfigurer</span> configurer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FreeMarkerConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        configurer<span class="token punctuation">.</span><span class="token function">setTemplateLoaderPath</span><span class="token punctuation">(</span><span class="token string">&quot;/WEB-INF/freemarker&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> configurer<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以下示例显示了如何在 XML 中配置相同的内容：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>view-resolvers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>freemarker</span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>view-resolvers</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- Configure FreeMarker... --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>freemarker-configurer</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>template-loader-path</span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/WEB-INF/freemarker<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>freemarker-configurer</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者，您也可以声明 <code>FreeMarkerConfigurer</code> 以完全控制所有属性，如以下示例所示：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>freemarkerConfig<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>templateLoaderPath<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/WEB-INF/freemarker/<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>您的模板需要存储在前面示例中所示的 <code>FreeMarkerConfigurer</code> 指定的目录中。鉴于前面的配置，如果您的控制器返回视图名称 <code>welcome</code>，解析器将查找 <code>/WEB-INF/freemarker/welcome.ftl</code> 模板。</p><h3 id="freemarker-配置" tabindex="-1"><a class="header-anchor" href="#freemarker-配置" aria-hidden="true">#</a> FreeMarker 配置</h3><p>可以通过在 <code>FreeMarkerConfigurer</code> 上设置适当的 bean 属性，将 FreeMarker &#39;Settings&#39; 和 &#39;SharedVariables&#39; 直接传递给 FreeMarker <code>Configuration</code> 对象（由 Spring 管理）。 <code>freemarkerSettings</code> 属性需要一个 <code>java.util.Properties</code> 对象，<code>freemarkerVariables</code> 属性需要一个 <code>java.util.Map</code>。 以下示例显示了如何使用 <code>FreeMarkerConfigurer</code>：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>freemarkerConfig<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>templateLoaderPath<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/WEB-INF/freemarker/<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>freemarkerVariables<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>map</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xml_escape<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fmXmlEscape<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>map</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fmXmlEscape<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>freemarker.template.utility.XmlEscape<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>有关应用于 <code>Configuration</code> 对象的设置和变量的详细信息，请参阅 FreeMarker 文档。</p><h3 id="表单处理" tabindex="-1"><a class="header-anchor" href="#表单处理" aria-hidden="true">#</a> 表单处理</h3><p>Spring 提供了一个用于 JSP 的标记库，其中包含一个 <code>&lt;spring:bind/&gt;</code> 元素。 此元素主要让表单显示来自表单支持对象的值，并显示来自 Web 或业务层中的“验证器”的验证失败的结果。 Spring 还支持 FreeMarker 中的相同功能，以及用于生成表单输入元素的额外便利宏。</p><h4 id="绑定宏" tabindex="-1"><a class="header-anchor" href="#绑定宏" aria-hidden="true">#</a> 绑定宏</h4><p>在 FreeMarker 的 <code>spring-webmvc.jar</code> 文件中维护了一组标准宏，因此它们始终可用于适当配置的应用程序。</p><p>Spring 模板库中定义的一些宏被认为是内部的（私有的），但宏定义中不存在这样的范围，这使得所有宏对调用代码和用户模板都是可见的。以下部分仅关注您需要从模板中直接调用的宏。如果您想直接查看宏代码，该文件名为 <code>spring.ftl</code> ，位于 <code>org.springframework.web.servlet.view.freemarker</code> 包中。</p><h4 id="简单绑定" tabindex="-1"><a class="header-anchor" href="#简单绑定" aria-hidden="true">#</a> 简单绑定</h4><p>在基于充当 Spring MVC 控制器表单视图的 FreeMarker 模板的 HTML 表单中，您可以使用类似于下一个示例的代码来绑定到字段值，并以类似于 JSP 等价物的方式为每个输入字段显示错误消息。以下示例显示了一个 personForm 视图：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- FreeMarker macros have to be imported into a namespace.
    We strongly recommend sticking to &#39;spring&#39;. --&gt;</span>
&lt;#import &quot;/spring.ftl&quot; as spring/&gt;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
    ...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POST<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        Name:
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>@spring.bind</span> <span class="token attr-name">&quot;personForm.name&quot;</span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${spring.status.expression}<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${spring.status.value?html}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>#list</span> <span class="token attr-name">spring.status.errorMessages</span> <span class="token attr-name">as</span> <span class="token attr-name">error</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span>\${error}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>#list</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
        ...
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
    ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>&lt;@spring.bind&gt;</code> 需要一个 &#39;path&#39; 参数，它由命令对象的名称（它是 &#39;command&#39;，除非您在控制器配置中更改它）组成，在您希望绑定的命令对象后跟一个句点和字段名称。 您还可以使用嵌套字段，例如 <code>command.address.street</code>。 <code>bind</code> 宏采用 <code>web.xml</code> 中的 <code>ServletContext</code> 参数 <code>defaultHtmlEscape</code> 指定的默认 HTML 转义行为。</p><p>称为 <code>&lt;@spring.bindEscaped&gt;</code> 的宏的另一种形式采用第二个参数，该参数明确指定是否应在状态错误消息或值中使用 HTML 转义。 您可以根据需要将其设置为 <code>true</code> 或 <code>false</code> 。 附加的表单处理宏简化了 HTML 转义的使用，您应该尽可能使用这些宏。</p><h4 id="输入宏" tabindex="-1"><a class="header-anchor" href="#输入宏" aria-hidden="true">#</a> 输入宏</h4><p>FreeMarker 的附加便利宏简化了绑定和表单生成（包括验证错误显示）。 永远不需要使用这些宏来生成表单输入字段，您可以将它们与简单的 HTML 混合搭配，或者直接调用我们之前强调的 Spring 绑定宏。</p><p>下表中的可用宏显示了 FreeMarker 模板 (FTL) 定义和每个采用的参数列表：</p><table><thead><tr><th style="text-align:left;">macro</th><th style="text-align:left;">FTL definition</th></tr></thead><tbody><tr><td style="text-align:left;"><code>message</code> (output a string from a resource bundle based on the code parameter)</td><td style="text-align:left;">&lt;@spring.message code/&gt;</td></tr><tr><td style="text-align:left;"><code>messageText</code> (output a string from a resource bundle based on the code parameter, falling back to the value of the default parameter)</td><td style="text-align:left;">&lt;@spring.messageText code, text/&gt;</td></tr><tr><td style="text-align:left;"><code>url</code> (prefix a relative URL with the application’s context root)</td><td style="text-align:left;">&lt;@spring.url relativeUrl/&gt;</td></tr><tr><td style="text-align:left;"><code>formInput</code> (standard input field for gathering user input)</td><td style="text-align:left;">&lt;@spring.formInput path, attributes, fieldType/&gt;</td></tr><tr><td style="text-align:left;"><code>formHiddenInput</code> (hidden input field for submitting non-user input)</td><td style="text-align:left;">&lt;@spring.formHiddenInput path, attributes/&gt;</td></tr><tr><td style="text-align:left;"><code>formPasswordInput</code> (standard input field for gathering passwords. Note that no value is ever populated in fields of this type.)</td><td style="text-align:left;">&lt;@spring.formPasswordInput path, attributes/&gt;</td></tr><tr><td style="text-align:left;"><code>formTextarea</code> (large text field for gathering long, freeform text input)</td><td style="text-align:left;">&lt;@spring.formTextarea path, attributes/&gt;</td></tr><tr><td style="text-align:left;"><code>formSingleSelect</code> (drop down box of options that let a single required value be selected)</td><td style="text-align:left;">&lt;@spring.formSingleSelect path, options, attributes/&gt;</td></tr><tr><td style="text-align:left;"><code>formMultiSelect</code> (a list box of options that let the user select 0 or more values)</td><td style="text-align:left;">&lt;@spring.formMultiSelect path, options, attributes/&gt;</td></tr><tr><td style="text-align:left;"><code>formRadioButtons</code> (a set of radio buttons that let a single selection be made from the available choices)</td><td style="text-align:left;">&lt;@spring.formRadioButtons path, options separator, attributes/&gt;</td></tr><tr><td style="text-align:left;"><code>formCheckboxes</code> (a set of checkboxes that let 0 or more values be selected)</td><td style="text-align:left;">&lt;@spring.formCheckboxes path, options, separator, attributes/&gt;</td></tr><tr><td style="text-align:left;"><code>formCheckbox</code> (a single checkbox)</td><td style="text-align:left;">&lt;@spring.formCheckbox path, attributes/&gt;</td></tr><tr><td style="text-align:left;"><code>showErrors</code> (simplify display of validation errors for the bound field)</td><td style="text-align:left;">&lt;@spring.showErrors separator, classOrStyle/&gt;</td></tr></tbody></table><p>上述任何宏的参数具有一致的含义：</p>`,27),_=n("code",null,"path",-1),y={href:"http://command.name",target:"_blank",rel:"noopener noreferrer"},x=e("<li><code>options</code>: 可在输入字段中选择的所有可用值的 <code>Map</code>。映射的键表示从表单回传并绑定到命令对象的值。针对键存储的 map 对象是在表单上显示给用户的标签，可能与表单回传的相应值不同。通常，这样的地图由控制器提供作为参考数据。您可以使用任何 <code>Map</code> 实现，具体取决于所需的行为。对于严格排序的映射，您可以使用带有合适的“比较器”的 <code>SortedMap</code>（例如 <code>TreeMap</code>），对于应按插入顺序返回值的任意映射，使用“LinkedHashMap”或“LinkedMap” <code>公共收藏</code>。</li><li><code>separator</code>: 在多个选项可用作离散元素（单选按钮或复选框）的情况下，用于分隔列表中每个选项的字符序列（例如 <code>&lt;br&gt;</code>）。</li><li><code>attributes</code>: 要包含在 HTML 标记本身中的任意标记或文本的附加字符串。该字符串按字面意思由宏回显。例如，在 <code>textarea</code> 字段中，您可以提供属性（例如“rows=&quot;5&quot; cols=&quot;60&quot;&#39;），或者您可以传递样式信息，例如 &#39;style=&quot;border:1px solid silver&quot;&#39;。</li><li><code>classOrStyle</code>: 对于 <code>showErrors</code> 宏，包装每个错误的 <code>span</code> 元素使用的 CSS 类的名称。如果未提供任何信息（或值为空），错误将包含在 <code>&lt;b&gt;&lt;/b&gt;</code> 标签中。</li>",4),M=e(`<p>以下部分概述了宏的示例。</p><p>输入字段</p><p><code>formInput</code> 宏采用 <code>path</code> 参数 (<code>command.name</code>) 和一个额外的 <code>attributes</code> 参数（在接下来的示例中为空）。该宏与所有其他表单生成宏一起对路径参数执行隐式 Spring 绑定。绑定在新绑定发生之前一直有效，因此 <code>showErrors</code> 宏不需要再次传递路径参数——它对上次创建绑定的字段进行操作。</p><p><code>showErrors</code> 宏接受一个分隔符参数（用于分隔给定字段上的多个错误的字符），还接受第二个参数——这次是类名或样式属性。请注意，FreeMarker 可以为 attributes 参数指定默认值。以下示例显示了如何使用 <code>formInput</code> 和 <code>showErrors</code> 宏：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>@spring.formInput</span> <span class="token attr-name">&quot;command.name&quot;</span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>@spring.showErrors</span> <span class="token attr-name">&quot;&lt;br</span><span class="token punctuation">&gt;</span></span>&quot;/&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>下一个示例显示表单片段的输出，生成名称字段并在表单提交后显示验证错误，该字段中没有任何值。验证通过 Spring 的验证框架进行。</p><p>生成的 HTML 类似于以下示例：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code>Name:
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span>required<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>formTextarea</code> 宏的工作方式与 <code>formInput</code> 宏相同，并且接受相同的参数列表。通常，第二个参数 (<code>attributes</code>) 用于传递样式信息或 <code>textarea</code> 的 <code>rows</code> 和 <code>cols</code> 属性。</p><p>选中字段</p><p>您可以使用四个选择字段宏在 HTML 表单中生成常见的 UI 值选择输入：</p><ul><li><code>formSingleSelect</code></li><li><code>formMultiSelect</code></li><li><code>formRadioButtons</code></li><li><code>formCheckboxes</code></li></ul><p>四个宏中的每一个都接受一个“Map”选项，其中包含表单字段的值和与该值对应的标签。值和标签可以相同。</p><p>下一个例子是 FTL 中的单选按钮。表单支持对象为此字段指定默认值“伦敦”，因此无需验证。渲染表单时，整个可供选择的城市列表作为参考数据提供在模型中，名称为 <code>cityMap</code>。以下清单显示了示例：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code>...
Town:
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>@spring.formRadioButtons</span> <span class="token attr-name">&quot;command.address.town&quot;,</span> <span class="token attr-name">cityMap,</span> <span class="token attr-name">&quot;&quot;</span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>前面的清单呈现一行单选按钮，一个用于 <code>cityMap</code> 中的每个值，并使用分隔符 <code>&quot;&quot;</code>。没有提供额外的属性（缺少宏的最后一个参数）。 <code>cityMap</code> 对地图中的每个键值对使用相同的 <code>String</code>。地图的键是表单实际作为 POST 请求参数提交的内容。地图值是用户看到的标签。在前面的示例中，给定三个知名城市的列表和表单支持对象中的默认值，HTML 类似于以下内容：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code>Town:
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radio<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address.town<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>London<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>London<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radio<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address.town<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Paris<span class="token punctuation">&quot;</span></span> <span class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checked<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Paris<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radio<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address.town<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>New York<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>New York<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果您的应用程序希望通过内部代码处理城市（例如），您可以使用合适的键创建代码映射，如以下示例所示：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">referenceData</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> cityMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cityMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;LDN&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;London&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cityMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;PRS&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Paris&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cityMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;NYC&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;New York&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> model <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    model<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;cityMap&quot;</span><span class="token punctuation">,</span> cityMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> model<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>代码现在生成输出，其中无线电值是相关代码，但用户仍然看到更用户友好的城市名称，如下所示：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code>Town:
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radio<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address.town<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>LDN<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>London<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radio<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address.town<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>PRS<span class="token punctuation">&quot;</span></span> <span class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checked<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Paris<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radio<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address.town<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>NYC<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>New York<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="html-转义" tabindex="-1"><a class="header-anchor" href="#html-转义" aria-hidden="true">#</a> HTML 转义</h4><p>前面描述的表单宏的默认使用导致 HTML 元素符合 HTML 4.01，并且使用 <code>web.xml</code> 文件中定义的 HTML 转义的默认值，如 Spring 的绑定支持所使用的那样。 要使元素符合 XHTML 或覆盖默认的 HTML 转义值，您可以在模板中指定两个变量（或在模型中，它们对模板可见）。 在模板中指定它们的好处是它们可以在稍后的模板处理中更改为不同的值，以便为表单中的不同字段提供不同的行为。</p><p>要为您的标签切换到 XHTML 合规性，请为名为 <code>xhtmlCompliant</code> 的模型或上下文变量指定 <code>true</code> 值，如以下示例所示：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>#--</span> <span class="token attr-name">for</span> <span class="token attr-name">FreeMarker</span> <span class="token attr-name">--</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>#assign</span> <span class="token attr-name">xhtmlCompliant</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> true</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>处理此指令后，Spring 宏生成的任何元素现在都符合 XHTML。</p><p>以类似的方式，您可以为每个字段指定 HTML 转义，如以下示例所示：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>#--</span> <span class="token attr-name">until</span> <span class="token attr-name">this</span> <span class="token attr-name">point,</span> <span class="token attr-name">default</span> <span class="token attr-name">HTML</span> <span class="token attr-name">escaping</span> <span class="token attr-name">is</span> <span class="token attr-name">used</span> <span class="token attr-name">--</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>#assign</span> <span class="token attr-name">htmlEscape</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> true</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>#--</span> <span class="token attr-name">next</span> <span class="token attr-name">field</span> <span class="token attr-name">will</span> <span class="token attr-name">use</span> <span class="token attr-name">HTML</span> <span class="token attr-name">escaping</span> <span class="token attr-name">--</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>@spring.formInput</span> <span class="token attr-name">&quot;command.name&quot;</span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>#assign</span> <span class="token attr-name">htmlEscape</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> false</span> <span class="token attr-name">in</span> <span class="token attr-name">spring</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>#--</span> <span class="token attr-name">all</span> <span class="token attr-name">future</span> <span class="token attr-name">fields</span> <span class="token attr-name">will</span> <span class="token attr-name">be</span> <span class="token attr-name">bound</span> <span class="token attr-name">with</span> <span class="token attr-name">HTML</span> <span class="token attr-name">escaping</span> <span class="token attr-name">off</span> <span class="token attr-name">--</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="groovy" tabindex="-1"><a class="header-anchor" href="#groovy" aria-hidden="true">#</a> Groovy</h2>`,29),S={href:"https://groovy-lang.org/templating.html#_the_markuptemplateengine",target:"_blank",rel:"noopener noreferrer"},j=e(`<h3 id="配置" tabindex="-1"><a class="header-anchor" href="#配置" aria-hidden="true">#</a> 配置</h3><p>以下示例显示如何配置 Groovy 标记模板引擎：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableWebMvc</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configureViewResolvers</span><span class="token punctuation">(</span><span class="token class-name">ViewResolverRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        registry<span class="token punctuation">.</span><span class="token function">groovy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Configure the Groovy Markup Template Engine...</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">GroovyMarkupConfigurer</span> <span class="token function">groovyMarkupConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">GroovyMarkupConfigurer</span> configurer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GroovyMarkupConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        configurer<span class="token punctuation">.</span><span class="token function">setResourceLoaderPath</span><span class="token punctuation">(</span><span class="token string">&quot;/WEB-INF/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> configurer<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以下示例显示了如何在 XML 中配置相同的内容：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>view-resolvers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>groovy</span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>view-resolvers</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- Configure the Groovy Markup Template Engine... --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>groovy-configurer</span> <span class="token attr-name">resource-loader-path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/WEB-INF/<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="示例" tabindex="-1"><a class="header-anchor" href="#示例" aria-hidden="true">#</a> 示例</h3><p>与传统的模板引擎不同，Groovy 标记依赖于使用构建器语法的 DSL。以下示例显示了 HTML 页面的示例模板：</p><div class="language-groovy line-numbers-mode" data-ext="groovy"><pre class="language-groovy"><code>yieldUnescaped <span class="token string">&#39;&lt;!DOCTYPE html&gt;&#39;</span>
<span class="token function">html</span><span class="token punctuation">(</span>lang<span class="token punctuation">:</span><span class="token string">&#39;en&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    head <span class="token punctuation">{</span>
        <span class="token function">meta</span><span class="token punctuation">(</span><span class="token string">&#39;http-equiv&#39;</span><span class="token punctuation">:</span><span class="token string">&#39;&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&#39;</span><span class="token punctuation">)</span>
        <span class="token function">title</span><span class="token punctuation">(</span><span class="token string">&#39;My page&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    body <span class="token punctuation">{</span>
        <span class="token function">p</span><span class="token punctuation">(</span><span class="token string">&#39;This is an example of HTML contents&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="脚本视图" tabindex="-1"><a class="header-anchor" href="#脚本视图" aria-hidden="true">#</a> 脚本视图</h2>`,9),L={href:"https://www.jcp.org/en/jsr/detail?id=223",target:"_blank",rel:"noopener noreferrer"},T=n("thead",null,[n("tr",null,[n("th",{style:{"text-align":"left"}},"脚本库"),n("th",{style:{"text-align":"left"}},"脚本引擎")])],-1),C={style:{"text-align":"left"}},F={href:"https://handlebarsjs.com/",target:"_blank",rel:"noopener noreferrer"},E={style:{"text-align":"left"}},R={href:"https://openjdk.java.net/projects/nashorn/",target:"_blank",rel:"noopener noreferrer"},V={style:{"text-align":"left"}},H={href:"https://mustache.github.io/",target:"_blank",rel:"noopener noreferrer"},X={style:{"text-align":"left"}},P={href:"https://openjdk.java.net/projects/nashorn/",target:"_blank",rel:"noopener noreferrer"},N={style:{"text-align":"left"}},J={href:"https://facebook.github.io/react/",target:"_blank",rel:"noopener noreferrer"},O={style:{"text-align":"left"}},W={href:"https://openjdk.java.net/projects/nashorn/",target:"_blank",rel:"noopener noreferrer"},A={style:{"text-align":"left"}},I={href:"https://www.embeddedjs.com/",target:"_blank",rel:"noopener noreferrer"},B={style:{"text-align":"left"}},D={href:"https://openjdk.java.net/projects/nashorn/",target:"_blank",rel:"noopener noreferrer"},G={style:{"text-align":"left"}},K={href:"https://www.stuartellis.name/articles/erb/",target:"_blank",rel:"noopener noreferrer"},U={style:{"text-align":"left"}},Y={href:"https://www.jruby.org/",target:"_blank",rel:"noopener noreferrer"},$={style:{"text-align":"left"}},z={href:"https://docs.python.org/2/library/string.html#template-strings",target:"_blank",rel:"noopener noreferrer"},Q={style:{"text-align":"left"}},Z={href:"https://www.jython.org/",target:"_blank",rel:"noopener noreferrer"},nn={style:{"text-align":"left"}},sn={href:"https://github.com/sdeleuze/kotlin-script-templating",target:"_blank",rel:"noopener noreferrer"},an={style:{"text-align":"left"}},tn={href:"https://kotlinlang.org/",target:"_blank",rel:"noopener noreferrer"},en=n("h3",{id:"要求",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#要求","aria-hidden":"true"},"#"),s(" 要求")],-1),pn=n("p",null,"需要在类路径中包含脚本引擎，具体细节因脚本引擎而异：",-1),on={href:"https://openjdk.java.net/projects/nashorn/",target:"_blank",rel:"noopener noreferrer"},cn={href:"https://www.jruby.org/",target:"_blank",rel:"noopener noreferrer"},ln={href:"https://www.jython.org/",target:"_blank",rel:"noopener noreferrer"},un=n("code",null,"org.jetbrains.kotlin:kotlin-script-util",-1),rn=n("code",null,"org.jetbrains.kotlin.script.jsr223.KotlinJsr223JvmLocalScriptEngineFactory",-1),dn=n("code",null,"META-INF/services/javax.script.ScriptEngineFactory",-1),kn={href:"https://github.com/sdeleuze/kotlin-script-templating",target:"_blank",rel:"noopener noreferrer"},mn={href:"https://www.webjars.org/",target:"_blank",rel:"noopener noreferrer"},vn=e(`<h3 id="脚本模板" tabindex="-1"><a class="header-anchor" href="#脚本模板" aria-hidden="true">#</a> 脚本模板</h3><p>可以声明一个 <code>ScriptTemplateConfigurer</code> 来指定要使用的脚本引擎、要加载的脚本文件、调用什么函数来渲染模板等等。 以下示例使用 Mustache 模板和 Nashorn JavaScript 引擎：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableWebMvc</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configureViewResolvers</span><span class="token punctuation">(</span><span class="token class-name">ViewResolverRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        registry<span class="token punctuation">.</span><span class="token function">scriptTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">ScriptTemplateConfigurer</span> <span class="token function">configurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ScriptTemplateConfigurer</span> configurer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ScriptTemplateConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        configurer<span class="token punctuation">.</span><span class="token function">setEngineName</span><span class="token punctuation">(</span><span class="token string">&quot;nashorn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        configurer<span class="token punctuation">.</span><span class="token function">setScripts</span><span class="token punctuation">(</span><span class="token string">&quot;mustache.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        configurer<span class="token punctuation">.</span><span class="token function">setRenderObject</span><span class="token punctuation">(</span><span class="token string">&quot;Mustache&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        configurer<span class="token punctuation">.</span><span class="token function">setRenderFunction</span><span class="token punctuation">(</span><span class="token string">&quot;render&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> configurer<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以下示例显示了 XML 中的相同配置：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>view-resolvers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>script-template</span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>view-resolvers</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>script-template-configurer</span> <span class="token attr-name">engine-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nashorn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">render-object</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Mustache<span class="token punctuation">&quot;</span></span> <span class="token attr-name">render-function</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>render<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>script</span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mustache.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>script-template-configurer</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对于 Java 和 XML 配置，controller 看起来没有什么不同，如以下示例所示：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SampleController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/sample&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Sample title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Sample body&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;template&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以下示例显示了 Mustache 模板：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>{{title}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{body}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用以下参数调用渲染函数：</p>`,10),gn=n("li",null,[n("code",null,"String template"),s(": 模板内容")],-1),bn=n("li",null,[n("code",null,"地图模型"),s("：视图模型")],-1),hn=n("code",null,"RenderingContext renderingContext",-1),fn={href:"https://docs.spring.io/spring-framework/docs/6.0.5/javadoc-api/org/springframework/web/servlet/view/script/RenderingContext.html",target:"_blank",rel:"noopener noreferrer"},qn=n("code",null,"RenderingContext",-1),wn={href:"https://handlebarsjs.com/",target:"_blank",rel:"noopener noreferrer"},_n={href:"https://en.wikipedia.org/wiki/Polyfill",target:"_blank",rel:"noopener noreferrer"},yn=e(`<p>以下示例显示了如何执行此操作：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableWebMvc</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configureViewResolvers</span><span class="token punctuation">(</span><span class="token class-name">ViewResolverRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        registry<span class="token punctuation">.</span><span class="token function">scriptTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">ScriptTemplateConfigurer</span> <span class="token function">configurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ScriptTemplateConfigurer</span> configurer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ScriptTemplateConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        configurer<span class="token punctuation">.</span><span class="token function">setEngineName</span><span class="token punctuation">(</span><span class="token string">&quot;nashorn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        configurer<span class="token punctuation">.</span><span class="token function">setScripts</span><span class="token punctuation">(</span><span class="token string">&quot;polyfill.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;handlebars.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;render.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        configurer<span class="token punctuation">.</span><span class="token function">setRenderFunction</span><span class="token punctuation">(</span><span class="token string">&quot;render&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        configurer<span class="token punctuation">.</span><span class="token function">setSharedEngine</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> configurer<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>polyfill.js</code> 只定义了 Handlebars 正常运行所需的 <code>window</code> 对象，如下：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> window <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这个基本的 <code>render.js</code> 实现在使用之前编译模板。 生产就绪的实现还应该存储任何重复使用的缓存模板或预编译模板。 您可以在脚本端这样做（并处理您需要的任何定制——管理模板引擎配置，例如）。 以下示例显示了如何执行此操作：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">template<span class="token punctuation">,</span> model</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> compiledTemplate <span class="token operator">=</span> Handlebars<span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span>template<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token function">compiledTemplate</span><span class="token punctuation">(</span>model<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6),xn={href:"https://github.com/spring-projects/spring-framework/tree/main/spring-webmvc/src/test/java/org/springframework/web/servlet/view/script",target:"_blank",rel:"noopener noreferrer"},Mn={href:"https://github.com/spring-projects/spring-framework/tree/main/spring-webmvc/src/test/resources/org/springframework/web/servlet/view/script",target:"_blank",rel:"noopener noreferrer"},Sn=n("h2",{id:"jsp-和-jstl",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#jsp-和-jstl","aria-hidden":"true"},"#"),s(" JSP 和 JSTL")],-1),jn=n("p",null,"Spring Framework 具有将 Spring MVC 与 JSP 和 JSTL 结合使用的内置集成。",-1),Ln={href:"https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-view-jsp",target:"_blank",rel:"noopener noreferrer"},Tn=n("h2",{id:"rss-and-atom",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#rss-and-atom","aria-hidden":"true"},"#"),s(" RSS and Atom")],-1),Cn=n("code",null,"AbstractAtomFeedView",-1),Fn=n("code",null,"AbstractRssFeedView",-1),En=n("code",null,"AbstractFeedView",-1),Rn={href:"https://rometools.github.io/rome/",target:"_blank",rel:"noopener noreferrer"},Vn=e(`<p><code>AbstractAtomFeedView</code> 要求您实现 <code>buildFeedEntries()</code> 方法并可选择覆盖 <code>buildFeedMetadata()</code> 方法（默认实现为空）。 以下示例显示了如何执行此操作：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SampleContentAtomView</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractAtomFeedView</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">buildFeedMetadata</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> model<span class="token punctuation">,</span>
            <span class="token class-name">Feed</span> feed<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// implementation omitted</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Entry</span><span class="token punctuation">&gt;</span></span> <span class="token function">buildFeedEntries</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> model<span class="token punctuation">,</span>
            <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">// implementation omitted</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>类似的要求适用于实现 <code>AbstractRssFeedView</code>，如以下示例所示：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SampleContentRssView</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractRssFeedView</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">buildFeedMetadata</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> model<span class="token punctuation">,</span>
            <span class="token class-name">Channel</span> feed<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// implementation omitted</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">&gt;</span></span> <span class="token function">buildFeedItems</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> model<span class="token punctuation">,</span>
            <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">// implementation omitted</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>buildFeedItems()</code> 和 <code>buildFeedEntries()</code> 方法传入 HTTP 请求，以防您需要访问 Locale。 传入 HTTP 响应仅用于设置 cookie 或其他 HTTP 标头。 方法返回后，提要会自动写入响应对象。</p>`,5),Hn={href:"https://spring.io/blog/2009/03/16/adding-an-atom-view-to-an-application-using-spring-s-rest-support",target:"_blank",rel:"noopener noreferrer"},Xn=e(`<h2 id="pdf-and-excel" tabindex="-1"><a class="header-anchor" href="#pdf-and-excel" aria-hidden="true">#</a> PDF and Excel</h2><p>Spring 提供了返回 HTML 以外的输出的方法，包括 PDF 和 Excel 电子表格。</p><h3 id="文档视图简介" tabindex="-1"><a class="header-anchor" href="#文档视图简介" aria-hidden="true">#</a> 文档视图简介</h3><p>HTML 页面并不总是用户查看模型输出的最佳方式，Spring 使从模型数据动态生成 PDF 文档或 Excel 电子表格变得简单。 该文档是视图，从服务器流出正确的内容类型，（希望）使客户端 PC 能够运行他们的电子表格或 PDF 查看器应用程序作为响应。</p><p>为了使用 Excel 视图，您需要将 Apache POI 库添加到类路径中。 对于 PDF 生成，您需要添加（最好）OpenPDF 库。</p><h3 id="pdf-视图" tabindex="-1"><a class="header-anchor" href="#pdf-视图" aria-hidden="true">#</a> PDF 视图</h3><p>单词列表的简单 PDF 视图可以扩展 <code>org.springframework.web.servlet.view.document.AbstractPdfView</code> 并实现 <code>buildPdfDocument()</code> 方法，如以下示例所示：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PdfWordList</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractPdfView</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">buildPdfDocument</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> model<span class="token punctuation">,</span> <span class="token class-name">Document</span> doc<span class="token punctuation">,</span> <span class="token class-name">PdfWriter</span> writer<span class="token punctuation">,</span>
            <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> words <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> model<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;wordList&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> word <span class="token operator">:</span> words<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            doc<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Paragraph</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>控制器可以从外部视图定义（按名称引用它）或作为处理程序方法的 <code>View</code> 实例返回此类视图。</p><h3 id="excel-视图" tabindex="-1"><a class="header-anchor" href="#excel-视图" aria-hidden="true">#</a> Excel 视图</h3><p>从 Spring Framework 4.2 开始，<code>org.springframework.web.servlet.view.document.AbstractXlsView</code> 作为 Excel 视图的基类提供。 它基于 Apache POI，具有专门的子类（<code>AbstractXlsxView</code> 和 <code>AbstractXlsxStreamingView</code>），取代了过时的 <code>AbstractExcelView</code> 类。</p><p>编程模型类似于 <code>AbstractPdfView</code>，以 <code>buildExcelDocument()</code> 作为核心模板方法，控制器能够从外部定义（按名称）或作为处理程序方法的 <code>View</code> 实例返回此类视图。</p><h2 id="jackson" tabindex="-1"><a class="header-anchor" href="#jackson" aria-hidden="true">#</a> Jackson</h2><p>Spring 提供对 Jackson JSON 库的支持。</p><h3 id="基于-jackson-的-json-mvc-视图" tabindex="-1"><a class="header-anchor" href="#基于-jackson-的-json-mvc-视图" aria-hidden="true">#</a> 基于 Jackson 的 JSON MVC 视图</h3><p><code>MappingJackson2JsonView</code> 使用 Jackson 库的 <code>ObjectMapper</code> 将响应内容渲染为 JSON。 默认情况下，模型映射的全部内容（特定于框架的类除外）都编码为 JSON。 对于需要过滤 map 内容的情况，您可以使用 <code>modelKeys</code> 属性指定一组特定的模型属性进行编码。 您还可以使用 <code>extractValueFromSingleKeyModel</code> 属性直接提取和序列化单键模型中的值，而不是作为模型属性的映射。</p><p>您可以根据需要使用 Jackson 提供的注释自定义 JSON 映射。 当您需要进一步控制时，您可以通过 <code>ObjectMapper</code> 属性注入自定义 <code>ObjectMapper</code>，适用于需要为特定类型提供自定义 JSON 序列化器和反序列化器的情况。</p><h3 id="基于-jackson-的-xml-视图" tabindex="-1"><a class="header-anchor" href="#基于-jackson-的-xml-视图" aria-hidden="true">#</a> 基于 Jackson 的 XML 视图</h3>`,18),Pn=n("code",null,"MappingJackson2XmlView",-1),Nn={href:"https://github.com/FasterXML/jackson-dataformat-xml",target:"_blank",rel:"noopener noreferrer"},Jn=n("code",null,"XmlMapper",-1),On=n("code",null,"modelKey",-1),Wn=n("p",null,[s("您可以根据需要使用 JAXB 或 Jackson 提供的注释自定义 XML 映射。当您需要进一步控制时，您可以通过 "),n("code",null,"ObjectMapper"),s(" 属性注入自定义 "),n("code",null,"XmlMapper"),s("，对于需要为特定类型提供序列化器和反序列化器的自定义 XML 的情况")],-1),An=n("h2",{id:"xml",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#xml","aria-hidden":"true"},"#"),s(" XML")],-1),In=n("code",null,"MarshallingView",-1),Bn=n("code",null,"Marshaller",-1),Dn=n("code",null,"org.springframework.oxm",-1),Gn=n("code",null,"MarshallingView",-1),Kn=n("code",null,"modelKey",-1),Un=n("code",null,"Marshaller",-1),Yn=n("code",null,"org.springframework.oxm",-1),$n={href:"https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#oxm",target:"_blank",rel:"noopener noreferrer"},zn=n("h2",{id:"xslt",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#xslt","aria-hidden":"true"},"#"),s(" XSLT")],-1),Qn=n("p",null,"XSLT 是 XML 的一种转换语言，作为 Web 应用程序中的一种视图技术很受欢迎。 如果您的应用程序自然地处理 XML，或者如果您的模型可以很容易地转换为 XML，那么 XSLT 作为一种视图技术是一个不错的选择。 以下部分展示了如何生成 XML 文档作为模型数据，并在 Spring Web MVC 应用程序中使用 XSLT 对其进行转换。",-1),Zn=n("code",null,"Controller",-1),ns=n("code",null,"Controller",-1),ss={href:"https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-controller",target:"_blank",rel:"noopener noreferrer"},as=e(`<h3 id="beans" tabindex="-1"><a class="header-anchor" href="#beans" aria-hidden="true">#</a> Beans</h3><p>配置是一个简单的 Spring Web 应用程序的标准配置：MVC 配置必须定义一个 <code>XsltViewResolver</code> 和常规 MVC 注释配置。以下示例显示了如何执行此操作：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@EnableWebMvc</span>
<span class="token annotation punctuation">@ComponentScan</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">XsltViewResolver</span> <span class="token function">xsltViewResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">XsltViewResolver</span> viewResolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XsltViewResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        viewResolver<span class="token punctuation">.</span><span class="token function">setPrefix</span><span class="token punctuation">(</span><span class="token string">&quot;/WEB-INF/xsl/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        viewResolver<span class="token punctuation">.</span><span class="token function">setSuffix</span><span class="token punctuation">(</span><span class="token string">&quot;.xslt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> viewResolver<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="controller" tabindex="-1"><a class="header-anchor" href="#controller" aria-hidden="true">#</a> Controller</h3><p>我们还需要一个控制器来封装我们的单词生成逻辑。</p><p>控制器逻辑封装在一个 <code>@Controller</code> 类中，处理方法定义如下：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XsltController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">home</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Document</span> document <span class="token operator">=</span> <span class="token class-name">DocumentBuilderFactory</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newDocumentBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Element</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;wordList&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> words <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Spring&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Framework&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> word <span class="token operator">:</span> words<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Element</span> wordNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;word&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Text</span> textNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span><span class="token punctuation">;</span>
            wordNode<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>textNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
            root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>wordNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;wordList&quot;</span><span class="token punctuation">,</span> root<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;home&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>到目前为止，我们只创建了一个 DOM 文档并将其添加到模型映射中。请注意，您还可以将 XML 文件作为 <code>Resource</code> 加载并使用它来代替自定义 DOM 文档。</p><p>有可用的软件包可以自动 &#39;domify&#39; 一个对象图，但是在 Spring 中，您可以完全灵活地以您选择的任何方式从您的模型创建 DOM。这可以防止 XML 的转换在模型数据的结构中发挥太大作用，这在使用工具管理 DOMification 过程时是一种危险。</p><h3 id="transformation" tabindex="-1"><a class="header-anchor" href="#transformation" aria-hidden="true">#</a> Transformation</h3><p>最后，<code>XsltViewResolver</code> 解析 “home” XSLT 模板文件并将 DOM 文档合并到其中以生成我们的视图。如 <code>XsltViewResolver</code> 配置所示，XSLT 模板位于 <code>WEB-INF/xsl</code> 目录下的 <code>war</code> 文件中，并以 <code>xslt</code> 文件扩展名结尾。</p><p>以下示例显示了 XSLT 转换：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">xsl:</span>stylesheet</span> <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1.0<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsl</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/1999/XSL/Transform<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">xsl:</span>output</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>html<span class="token punctuation">&quot;</span></span> <span class="token attr-name">omit-xml-declaration</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>yes<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">xsl:</span>template</span> <span class="token attr-name">match</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Hello!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>My First Words<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">xsl:</span>apply-templates</span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">xsl:</span>template</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">xsl:</span>template</span> <span class="token attr-name">match</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>word<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">xsl:</span>value-of</span> <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">xsl:</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">xsl:</span>stylesheet</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>前面的转换渲染为以下 HTML：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Content-Type<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/html; charset=UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Hello!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>My First Words<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Spring<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Framework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料" aria-hidden="true">#</a> 参考资料</h2>`,16),ts={href:"https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/index.html",target:"_blank",rel:"noopener noreferrer"},es={href:"https://docs.spring.io/spring-framework/docs/current/reference/html/web.html",target:"_blank",rel:"noopener noreferrer"};function ps(os,cs){const a=o("ExternalLinkIcon");return c(),l("div",null,[u,r,d,k,n("p",null,[n("a",m,[s("Thymeleaf"),t(a)]),s(" 是一个现代服务器端 Java 模板引擎，它强调自然的 HTML 模板，可以通过双击在浏览器中预览，而无需运行服务器，这对于 UI 模板的独立工作（例如，由设计师）非常有帮助。")]),n("p",null,[s("Thymeleaf 与 Spring MVC 的集成由 Thymeleaf 项目管理。 配置涉及一些 bean 声明，例如 "),v,s("、"),g,s(" 和 "),b,s("。 有关详细信息，请参阅 "),n("a",h,[s("Thymeleaf+Spring"),t(a)]),s("。")]),f,n("p",null,[n("a",q,[s("Apache FreeMarker"),t(a)]),s(" 是一个模板引擎，用于生成从 HTML 到电子邮件等任何类型的文本内容。 Spring 框架内置了 Spring MVC 与 FreeMarker 模板结合使用的集成。")]),w,n("ul",null,[n("li",null,[_,s(": 要绑定到的字段的名称（例如，“"),n("a",y,[s("command.name"),t(a)]),s("”）")]),x]),M,n("p",null,[n("a",S,[s("Groovy 标记模板引擎"),t(a)]),s(" 主要用于生成类似 XML 的标记（XML、XHTML、HTML5 等），但可以使用它来生成任何基于文本的内容。 Spring Framework 具有将 Spring MVC 与 Groovy 标记结合使用的内置集成。")]),j,n("p",null,[s("Spring 有一个内置的集成，可以将 Spring MVC 与任何可以在 "),n("a",L,[s("JSR-223"),t(a)]),s(" 之上运行的模板库一起使用 Java 脚本引擎。 我们在不同的脚本引擎上测试了以下模板库：")]),n("table",null,[T,n("tbody",null,[n("tr",null,[n("td",C,[n("a",F,[s("Handlebars"),t(a)])]),n("td",E,[n("a",R,[s("Nashorn"),t(a)])])]),n("tr",null,[n("td",V,[n("a",H,[s("Mustache"),t(a)])]),n("td",X,[n("a",P,[s("Nashorn"),t(a)])])]),n("tr",null,[n("td",N,[n("a",J,[s("React"),t(a)])]),n("td",O,[n("a",W,[s("Nashorn"),t(a)])])]),n("tr",null,[n("td",A,[n("a",I,[s("EJS"),t(a)])]),n("td",B,[n("a",D,[s("Nashorn"),t(a)])])]),n("tr",null,[n("td",G,[n("a",K,[s("ERB"),t(a)])]),n("td",U,[n("a",Y,[s("JRuby"),t(a)])])]),n("tr",null,[n("td",$,[n("a",z,[s("String templates"),t(a)])]),n("td",Q,[n("a",Z,[s("Jython"),t(a)])])]),n("tr",null,[n("td",nn,[n("a",sn,[s("Kotlin Script templating"),t(a)])]),n("td",an,[n("a",tn,[s("Kotlin"),t(a)])])])])]),en,pn,n("ul",null,[n("li",null,[s("The "),n("a",on,[s("Nashorn"),t(a)]),s(" Java 8+ 提供了 JavaScript 引擎。强烈建议使用可用的最新更新版本。")]),n("li",null,[n("a",cn,[s("JRuby"),t(a)]),s(" 应该作为 Ruby 支持的依赖项添加。")]),n("li",null,[n("a",ln,[s("Jython"),t(a)]),s(" 应该作为 Python 支持的依赖项添加。")]),n("li",null,[un,s(" 依赖项和包含 "),rn,s(" 行的 "),dn,s(" 文件应该被添加 Kotlin 脚本支持。 有关详细信息，请参阅"),n("a",kn,[s("此示例"),t(a)]),s("。")])]),n("p",null,[s("您需要有脚本模板库。 为 JavaScript 做到这一点的一种方法是通过 "),n("a",mn,[s("WebJars"),t(a)]),s("。")]),vn,n("ul",null,[gn,bn,n("li",null,[hn,s("： "),n("a",fn,[qn,t(a)]),s(" 允许访问应用上下文、语言环境、模板加载器和 URL（自 5.0 起）")])]),n("p",null,[s("如果您的模板技术需要一些自定义，您可以提供一个实现自定义渲染功能的脚本。 例如，"),n("a",wn,[s("Handlerbars"),t(a)]),s(" 需要在使用之前编译模板，并且需要一个 "),n("a",_n,[s("polyfill"),t(a)]),s(" 来模拟一些浏览器工具，但在服务器端脚本引擎中不可用。")]),yn,n("p",null,[s("查看 Spring Framework 单元测试，"),n("a",xn,[s("Java"),t(a)]),s(" 和"),n("a",Mn,[s("资源"),t(a)]),s("，以获取更多配置示例。")]),Sn,jn,n("blockquote",null,[n("p",null,[s("更多内容详见："),n("a",Ln,[s("Spring 官方文档之 JSP and JSTL"),t(a)])])]),Tn,n("p",null,[Cn,s(" 和 "),Fn,s(" 都继承自 "),En,s(" 基类，分别用于提供 Atom 和 RSS Feed 视图。 它们基于 "),n("a",Rn,[s("ROME"),t(a)]),s(" 项目，位于 org.springframework.web.servlet.view.feed 包中。")]),Vn,n("p",null,[s("有关创建 Atom 视图的示例，请参阅 Alef Arendsen 的 Spring Team 博客 "),n("a",Hn,[s("entry"),t(a)]),s("。")]),Xn,n("p",null,[Pn,s(" 使用 "),n("a",Nn,[s("Jackson XML 扩展"),t(a)]),s(),Jn,s(" 将响应内容渲染为 XML。 如果模型包含多个条目，您应该使用 "),On,s(" bean 属性显式设置要序列化的对象。 如果模型包含单个条目，它会自动序列化。")]),Wn,An,n("p",null,[In,s(" 使用 XML "),Bn,s("（在 "),Dn,s(" 包中定义）将响应内容渲染为 XML。 您可以使用 "),Gn,s(" 实例的 "),Kn,s(" 属性显式设置要编组的对象。 或者，视图遍历所有模型属性并编组 "),Un,s(" 支持的第一个类型。 有关 "),Yn,s(" 包中功能的更多信息，请参阅 "),n("a",$n,[s("Marshalling XML using O/X Mappers"),t(a)]),s("。")]),zn,Qn,n("p",null,[s("此示例是一个简单的 Spring 应用程序，它在 "),Zn,s(" 中创建关键字列表并将它们添加到模型映射中。 返回映射以及我们的 XSLT 视图的视图名称。 有关 Spring Web MVC 的 "),ns,s(" 接口的详细信息，请参阅 "),n("a",ss,[s("Annotated Controllers"),t(a)]),s("。 XSLT 控制器将单词列表转换为准备转换的简单 XML 文档。")]),as,n("ul",null,[n("li",null,[n("a",ts,[s("Spring Framework 官方文档"),t(a)])]),n("li",null,[n("a",es,[s("Spring Framework 官方文档之 Web"),t(a)])])])])}const us=p(i,[["render",ps],["__file","index.html.vue"]]);export{us as default};
