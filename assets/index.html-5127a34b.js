import{_ as p}from"./plugin-vue_export-helper-c27b6911.js";import{r as l,o as i,c as r,d,w as t,e,a as n,b as s}from"./app-3113b888.js";const u={},g=e(`<h1 id="java-å®¹å™¨é¢è¯•ä¸€" tabindex="-1"><a class="header-anchor" href="#java-å®¹å™¨é¢è¯•ä¸€" aria-hidden="true">#</a> Java å®¹å™¨é¢è¯•ä¸€</h1><h2 id="java-å®¹å™¨ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#java-å®¹å™¨ç®€ä»‹" aria-hidden="true">#</a> Java å®¹å™¨ç®€ä»‹</h2><h3 id="ã€ç®€å•ã€‘java-ä¸­æœ‰å“ªäº›é›†åˆç±»" tabindex="-1"><a class="header-anchor" href="#ã€ç®€å•ã€‘java-ä¸­æœ‰å“ªäº›é›†åˆç±»" aria-hidden="true">#</a> ã€ç®€å•ã€‘Java ä¸­æœ‰å“ªäº›é›†åˆç±»ï¼Ÿ</h3><figure><img src="https://raw.githubusercontent.com/dunwu/images/master/cs/java/javacore/container/java-container-structure.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Java å®¹å™¨ç±»ä¸»è¦ä½äº <code>java.util</code> åŒ…ï¼Œåˆ†ä¸º <strong>Collection</strong> å’Œ <strong>Map</strong> ä¸¤å¤§ç±»ï¼š</p><ul><li><strong>Collectionï¼ˆå­˜å‚¨ç‹¬ç«‹å…ƒç´ ï¼‰</strong><ul><li><strong>Listï¼ˆæœ‰åºã€å¯é‡å¤ï¼‰</strong><ul><li><strong>ArrayList</strong>ï¼šåŸºäº <code>Object[]</code> åŠ¨æ€æ•°ç»„ï¼ŒæŸ¥è¯¢å¿«ï¼Œå¢åˆ æ…¢</li><li><strong>LinkedList</strong>ï¼šåŸºäº<strong>åŒé“¾è¡¨</strong>ï¼ˆJDK1.6 å‰æ˜¯å¾ªç¯é“¾è¡¨ï¼Œ1.7 å–æ¶ˆå¾ªç¯ï¼‰ï¼Œå¢åˆ å¿«ï¼ŒæŸ¥è¯¢æ…¢</li><li><strong>Vector</strong>ï¼šçº¿ç¨‹å®‰å…¨çš„ <code>Object[]</code> åŠ¨æ€æ•°ç»„ï¼ˆå·²è¿‡æ—¶ï¼Œæ¨è <code>ArrayList</code> + <code>Collections.synchronizedList</code>ï¼‰</li></ul></li><li><strong>Setï¼ˆæ— åºã€ä¸å¯é‡å¤ï¼‰</strong><ul><li><strong>HashSet</strong>ï¼šåŸºäº <code>HashMap</code> å®ç°ï¼Œä¸ä¿è¯é¡ºåº</li><li><strong>LinkedHashSet</strong>ï¼šåŸºäº <code>LinkedHashMap</code>ï¼Œç»´æŠ¤<strong>æ’å…¥é¡ºåº</strong></li><li><strong>TreeSet</strong>ï¼šåŸºäº <code>TreeMap</code>ï¼Œæ”¯æŒ<strong>è‡ªç„¶æ’åº</strong>æˆ–<strong>è‡ªå®šä¹‰ <code>Comparator</code></strong></li></ul></li><li><strong>Queueï¼ˆé˜Ÿåˆ—ï¼ŒFIFO æˆ–ä¼˜å…ˆçº§ï¼‰</strong><ul><li><strong>ArrayDeque</strong>ï¼šåŸºäºåŠ¨æ€æ•°ç»„ï¼Œå®ç°<strong>æ ˆå’Œé˜Ÿåˆ—</strong></li><li><strong>PriorityQueue</strong>ï¼šåŸºäºå †ï¼Œ<strong>ä¼˜å…ˆçº§é˜Ÿåˆ—</strong>ï¼ˆæŒ‰ <code>Comparator</code> æ’åºï¼‰</li><li><strong>LinkedList</strong>ï¼šä¹Ÿå¯ä½œä¸ºé˜Ÿåˆ—/åŒç«¯é˜Ÿåˆ—</li></ul></li></ul></li><li><strong>Mapï¼ˆé”®å€¼å¯¹å­˜å‚¨ï¼‰</strong><ul><li><strong>HashMap</strong>ï¼šåŸºäºå“ˆå¸Œè¡¨ï¼Œ<strong>æ— åº</strong>ï¼ŒæŸ¥æ‰¾é«˜æ•ˆï¼ˆæœ€å¸¸ç”¨ï¼‰</li><li><strong>LinkedHashMap</strong>ï¼šç»§æ‰¿ <code>HashMap</code>ï¼Œé¢å¤–ç»´æŠ¤<strong>åŒå‘é“¾è¡¨</strong>ï¼Œä¿æŒ<strong>æ’å…¥é¡ºåº</strong>æˆ–<strong>è®¿é—®é¡ºåº</strong></li><li><strong>TreeMap</strong>ï¼šåŸºäºçº¢é»‘æ ‘ï¼Œ<strong>é”®æœ‰åº</strong>ï¼ˆè‡ªç„¶æ’åºæˆ– <code>Comparator</code>ï¼‰</li><li><strong>Hashtable</strong>ï¼šçº¿ç¨‹å®‰å…¨ï¼ˆ<code>synchronized</code> ä¿®é¥°æ–¹æ³•ï¼‰ï¼Œä½†æ€§èƒ½å·®ï¼Œå·²è¢« <code>ConcurrentHashMap</code> å–ä»£</li><li><strong>ConcurrentHashMap</strong>ï¼šåˆ†æ®µé”ï¼ˆJDK7ï¼‰æˆ– CAS + <code>synchronized</code>ï¼ˆJDK8+ï¼‰ï¼Œé«˜å¹¶å‘ä¼˜åŒ–</li></ul></li><li><strong>å·¥å…·ç±»</strong><ul><li><strong>Collections</strong>ï¼šæä¾›é›†åˆæ“ä½œï¼ˆæ’åºã€æŸ¥æ‰¾ã€åŒæ­¥åŒ–ç­‰ï¼‰</li><li><strong>Arrays</strong>ï¼šæä¾›æ•°ç»„æ“ä½œï¼ˆæ’åºã€äºŒåˆ†æŸ¥æ‰¾ç­‰ï¼‰</li><li><strong>Streamï¼ˆJava 8+ï¼‰</strong>ï¼šæ”¯æŒå‡½æ•°å¼ç¼–ç¨‹çš„æµå¼å¤„ç†</li></ul></li></ul><p><strong>å…³é”®åŒºåˆ«</strong>ï¼š</p><table><thead><tr><th>ç±»å‹</th><th>ç‰¹ç‚¹</th><th>ä¸»è¦å®ç°ç±»</th></tr></thead><tbody><tr><td><strong>List</strong></td><td>æœ‰åºã€å¯é‡å¤</td><td><code>ArrayList</code>ã€<code>LinkedList</code></td></tr><tr><td><strong>Set</strong></td><td>æ— åºã€ä¸å¯é‡å¤</td><td><code>HashSet</code>ã€<code>LinkedHashSet</code>ã€<code>TreeSet</code></td></tr><tr><td><strong>Queue</strong></td><td>é˜Ÿåˆ—/æ ˆ</td><td><code>ArrayDeque</code>ã€<code>PriorityQueue</code></td></tr><tr><td><strong>Map</strong></td><td>é”®å€¼å¯¹</td><td><code>HashMap</code>ã€<code>LinkedHashMap</code>ã€<code>TreeMap</code></td></tr></tbody></table><p><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼š</p><ul><li>å•çº¿ç¨‹ï¼š<code>ArrayList</code>ã€<code>HashMap</code></li><li>å¤šçº¿ç¨‹ï¼š<code>ConcurrentHashMap</code>ã€<code>CopyOnWriteArrayList</code></li></ul><h3 id="ã€ç®€å•ã€‘comparable-å’Œ-comparator-æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#ã€ç®€å•ã€‘comparable-å’Œ-comparator-æœ‰ä»€ä¹ˆåŒºåˆ«" aria-hidden="true">#</a> ã€ç®€å•ã€‘Comparable å’Œ Comparator æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p><code>Comparable</code> æ¥å£å’Œ <code>Comparator</code> æ¥å£éƒ½æ˜¯ Java ä¸­ç”¨äºæ’åºçš„æ¥å£ï¼Œå®ƒä»¬åœ¨å®ç°ç±»å¯¹è±¡ä¹‹é—´æ¯”è¾ƒå¤§å°ã€æ’åºç­‰æ–¹é¢å‘æŒ¥äº†é‡è¦ä½œç”¨ã€‚</p><ul><li><strong>Comparable</strong> â†’ &quot;æˆ‘èƒ½æ¯”è¾ƒ&quot;ï¼ˆç±»è‡ªå·±å®ç°çš„æ¯”è¾ƒèƒ½åŠ›ï¼‰</li><li><strong>Comparator</strong> â†’ &quot;æ¯”è¾ƒå™¨&quot;ï¼ˆå¤–éƒ¨æä¾›çš„æ¯”è¾ƒå·¥å…·ï¼‰</li></ul><p>ä¸¤è€…é€šå¸¸ä¸€èµ·ä½¿ç”¨ï¼Œä¸º Java å¯¹è±¡æä¾›çµæ´»å¤šæ ·çš„æ’åºèƒ½åŠ›ã€‚</p><p><strong>Comparable vs. Comparator</strong>ï¼š</p><table><thead><tr><th>ç‰¹æ€§</th><th>Comparable</th><th>Comparator</th></tr></thead><tbody><tr><td><strong>åŒ…ä½ç½®</strong></td><td>java.lang</td><td>java.util</td></tr><tr><td><strong>æ¥å£æ–¹æ³•</strong></td><td>compareTo(T o)</td><td>compare(T o1, T o2)</td></tr><tr><td><strong>æ’åºé€»è¾‘ä½ç½®</strong></td><td>å®šä¹‰åœ¨è¦æ’åºçš„ç±»å†…éƒ¨</td><td>å®šä¹‰åœ¨å•ç‹¬çš„ç±»æˆ–åŒ¿åç±»ä¸­</td></tr><tr><td><strong>ä½¿ç”¨åœºæ™¯</strong></td><td>ç±»çš„&quot;è‡ªç„¶æ’åº&quot;</td><td>å¤šç§æ’åºæ–¹å¼æˆ–æ— æ³•ä¿®æ”¹ç±»æ—¶çš„æ’åº</td></tr><tr><td><strong>è°ƒç”¨æ–¹å¼</strong></td><td><code>Collections.sort(list)</code></td><td><code>Collections.sort(list, comparator)</code></td></tr><tr><td><strong>å½±å“èŒƒå›´</strong></td><td>ä¿®æ”¹ç±»çš„åŸå§‹å®šä¹‰</td><td>ä¸ä¿®æ”¹åŸæœ‰ç±»</td></tr></tbody></table><p><strong>è®¾è®¡ç›®çš„ä¸åŒ</strong></p><ul><li><code>Comparable</code>ï¼šå®šä¹‰å¯¹è±¡çš„<strong>è‡ªç„¶æ’åº</strong>ï¼ˆå¦‚ String æŒ‰å­—æ¯é¡ºåºï¼ŒInteger æŒ‰æ•°å€¼å¤§å°ï¼‰</li><li><code>Comparator</code>ï¼šå®šä¹‰<strong>å¤šç§æ’åºç­–ç•¥</strong>æˆ–ä¸ºæ— æ³•ä¿®æ”¹æºä»£ç çš„ç±»æä¾›æ’åº</li></ul><p><strong>å®ç°æ–¹å¼ä¸åŒ</strong></p><ul><li><code>Comparable</code>ï¼šéœ€è¦ä¿®æ”¹ç±»æœ¬èº«ï¼Œå®ç°<code>compareTo()</code>æ–¹æ³•</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token class-name">Person</span> other<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">-</span> other<span class="token punctuation">.</span>age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>Comparator</code>ï¼šç‹¬ç«‹å®ç°ï¼Œé€šå¸¸ä½¿ç”¨åŒ¿åç±»æˆ– lambda è¡¨è¾¾å¼</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> byName <span class="token operator">=</span> <span class="token punctuation">(</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> p1<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>p2<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>ä½¿ç”¨åœºæ™¯é€‰æ‹©</strong></p><ul><li>ç”¨<code>Comparable</code>å½“ï¼š <ul><li>ç±»æœ‰æ˜ç¡®çš„è‡ªç„¶æ’åºæ ‡å‡†</li><li>ä½ èƒ½ä¿®æ”¹ç±»çš„æºä»£ç </li><li>åªéœ€è¦ä¸€ç§ä¸»è¦æ’åºæ–¹å¼</li></ul></li><li>ç”¨<code>Comparator</code>å½“ï¼š <ul><li>éœ€è¦å¤šç§æ’åºæ–¹å¼ï¼ˆå¦‚æŒ‰å§“åã€å¹´é¾„ã€å·¥èµ„ç­‰ï¼‰</li><li>ä¸èƒ½ä¿®æ”¹ç±»çš„æºä»£ç ï¼ˆå¦‚ç¬¬ä¸‰æ–¹åº“çš„ç±»ï¼‰</li><li>éœ€è¦ä¸´æ—¶æˆ–ç‰¹æ®Šçš„æ’åºè§„åˆ™</li></ul></li></ul><p><strong>Java 8+çš„ä¾¿åˆ©æ”¯æŒ</strong></p><ul><li>Comparator æä¾›äº†è®¸å¤šæ–¹ä¾¿çš„é™æ€æ–¹æ³•ï¼š</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// å¤šçº§æ’åº</span>
<span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> comparator <span class="token operator">=</span>
    <span class="token class-name">Comparator</span><span class="token punctuation">.</span><span class="token function">comparing</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token operator">::</span><span class="token function">getLastName</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">thenComparing</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token operator">::</span><span class="token function">getFirstName</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// é€†åºæ’åº</span>
<span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> reverseAge <span class="token operator">=</span>
    <span class="token class-name">Comparator</span><span class="token punctuation">.</span><span class="token function">comparingInt</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token operator">::</span><span class="token function">getAge</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reversed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ã€ä¸­ç­‰ã€‘ä»€ä¹ˆæ˜¯-concurrentmodificationexception-â­â­" tabindex="-1"><a class="header-anchor" href="#ã€ä¸­ç­‰ã€‘ä»€ä¹ˆæ˜¯-concurrentmodificationexception-â­â­" aria-hidden="true">#</a> ã€ä¸­ç­‰ã€‘ä»€ä¹ˆæ˜¯ ConcurrentModificationExceptionï¼Ÿâ­â­</h3><div class="hint-container info"><p class="hint-container-title">ä»€ä¹ˆæ˜¯ ConcurrentModificationExceptionï¼Ÿ</p></div><p><code>ConcurrentModificationException</code> æ˜¯åœ¨ Java ä¸­ä½¿ç”¨<strong>è¿­ä»£å™¨</strong>éå†é›†åˆæ—¶ï¼Œå¦‚æœæ£€æµ‹åˆ°é›†åˆè¢«<strong>æ„å¤–ä¿®æ”¹</strong>è€ŒæŠ›å‡ºçš„è¿è¡Œæ—¶å¼‚å¸¸ã€‚</p><p><code>ConcurrentModificationException</code> åº•å±‚æœºåˆ¶ï¼š</p><p>è¿­ä»£å™¨å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªè®¡æ•°å™¨ <strong><code>expectedModCount</code></strong>ï¼ˆæœŸæœ›ä¿®æ”¹æ¬¡æ•°ï¼‰ï¼Œä¸é›†åˆçš„ <strong><code>modCount</code></strong>ï¼ˆå®é™…ä¿®æ”¹æ¬¡æ•°ï¼‰æ¯”è¾ƒã€‚æ¯æ¬¡ä¿®æ”¹é›†åˆæ—¶ <code>modCount++</code>ï¼Œè¿­ä»£å™¨æ¯æ¬¡æ“ä½œæ£€æŸ¥ä¸¤è€…æ˜¯å¦ä¸€è‡´ï¼Œä¸ä¸€è‡´ç«‹å³æŠ›å‡ºå¼‚å¸¸ã€‚</p><div class="hint-container info"><p class="hint-container-title">ä»€ä¹ˆæ—¶å€™å‘ç”Ÿ ConcurrentModificationExceptionï¼Ÿ</p></div><p>è¿­ä»£å™¨åˆ›å»ºåï¼Œé›†åˆè¢«<strong>éè¿­ä»£å™¨æ–¹å¼</strong>ä¿®æ”¹ç»“æ„ï¼ˆå¢åˆ ï¼‰ï¼Œå°±ä¼šæŠ›å‡º <code>ConcurrentModificationException</code>ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;C&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// é”™è¯¯ç¤ºä¾‹ 1ï¼šéå†æ—¶ç›´æ¥ä¿®æ”¹é›†åˆ</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> item <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// åº•å±‚ä½¿ç”¨è¿­ä»£å™¨</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        list<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æŠ›å‡º ConcurrentModificationException</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// é”™è¯¯ç¤ºä¾‹ 2ï¼šè¿­ä»£å™¨åˆ›å»ºåé€šè¿‡å…¶ä»–æ–¹å¼ä¿®æ”¹</span>
<span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> it <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;D&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ç»“æ„è¢«ä¿®æ”¹</span>
it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// æ­¤å¤„æŠ›å‡ºå¼‚å¸¸</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container info"><p class="hint-container-title">å¦‚ä½•é¿å… ConcurrentModificationExceptionï¼Ÿ</p></div><ul><li>å•çº¿ç¨‹ä¼˜å…ˆä½¿ç”¨ <code>removeIf()</code> æˆ– <code>Iterator.remove()</code></li><li>å¤šçº¿ç¨‹å¿…é¡»ä½¿ç”¨å¹¶å‘é›†åˆæˆ–æ˜¾å¼åŒæ­¥</li></ul><p>ã€ç¤ºä¾‹ã€‘ä½¿ç”¨è¿­ä»£å™¨åˆ é™¤å…ƒç´ ï¼ˆæ ‡å‡†æ–¹å¼ï¼‰</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;C&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;D&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> iterator <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> item <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&quot;C&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        iterator<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âœ… é€šè¿‡è¿­ä»£å™¨å®‰å…¨åˆ é™¤</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// list = [&quot;A&quot;, &quot;D&quot;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ã€ç¤ºä¾‹ã€‘Java 8+ çš„ removeIfï¼ˆæœ€ç®€æ´ï¼‰</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;C&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;D&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å•è¡Œå®Œæˆè¿‡æ»¤</span>
list<span class="token punctuation">.</span><span class="token function">removeIf</span><span class="token punctuation">(</span>item <span class="token operator">-&gt;</span> item<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> item<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âœ…</span>
<span class="token comment">// list = [&quot;A&quot;, &quot;D&quot;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="list" tabindex="-1"><a class="header-anchor" href="#list" aria-hidden="true">#</a> List</h2><h3 id="ã€ç®€å•ã€‘arraylist-å¯ä»¥æ·»åŠ -null-å€¼å—" tabindex="-1"><a class="header-anchor" href="#ã€ç®€å•ã€‘arraylist-å¯ä»¥æ·»åŠ -null-å€¼å—" aria-hidden="true">#</a> ã€ç®€å•ã€‘ArrayList å¯ä»¥æ·»åŠ  null å€¼å—ï¼Ÿ</h3><p><code>ArrayList</code> <strong>å¯ä»¥æ·»åŠ ä»»æ„æ•°é‡çš„ <code>null</code> å€¼</strong>ï¼ŒåŒ…æ‹¬é‡å¤ <code>null</code>ï¼Œä½†éœ€è°¨æ…å¤„ç†æ½œåœ¨çš„ç©ºæŒ‡é’ˆé—®é¢˜ã€‚</p><p><code>ArrayList</code>åº•å±‚åŸºäº <code>Object[]</code> æ•°ç»„å®ç°ï¼Œå¤©ç„¶æ”¯æŒ <code>null</code>ã€‚</p><p><strong>æ³¨æ„</strong>ï¼š</p><ul><li><strong>å¯èƒ½å¼•å‘ <code>NullPointerException</code></strong>ï¼š <ul><li>ç›´æ¥è°ƒç”¨ <code>null</code> çš„æ–¹æ³•ï¼ˆå¦‚ <code>list.get(0).length()</code>ï¼‰ä¼šæŠ¥é”™ã€‚</li><li>ä½¿ç”¨ <code>contains(null)</code> æˆ–éå†æ—¶éœ€åˆ¤ç©ºã€‚</li></ul></li><li><strong>æ…ç”¨äºç‰¹å®šåœºæ™¯</strong>ï¼šå¦‚æ•°æ®åº“æ˜ å°„ã€JSON åºåˆ—åŒ–å·¥å…·å¯èƒ½å¯¹ <code>null</code> æœ‰ç‰¹æ®Šé™åˆ¶ã€‚</li></ul><p><strong>ä¸å…¶ä»–å®¹å™¨å¯¹æ¯”</strong>ï¼š</p><ul><li><strong>HashSet</strong>ï¼šå…è®¸ä¸€ä¸ª <code>null</code>ã€‚</li><li><strong>TreeSet</strong>ï¼šè‹¥ç”¨è‡ªç„¶æ’åºï¼Œæ·»åŠ  <code>null</code> ä¼šæŠ› <code>NullPointerException</code>ã€‚</li><li><strong>HashMap</strong>ï¼šå…è®¸ <code>null</code> é”®å’Œå€¼ã€‚</li><li><strong>Hashtable</strong>ï¼šç¦æ­¢ <code>null</code> é”®å’Œå€¼ã€‚</li></ul><p><strong>å»ºè®®</strong>ï¼š</p><ul><li>æ˜ç¡®æ˜¯å¦éœ€è¦ <code>null</code>ï¼Œé¿å…æ»¥ç”¨å¯¼è‡´ä»£ç å¥å£®æ€§é—®é¢˜ã€‚</li><li>å¿…è¦æ—¶ç”¨ <code>Optional</code> æˆ–é»˜è®¤å€¼æ›¿ä»£ <code>null</code>ã€‚</li></ul><h3 id="ã€ç®€å•ã€‘arraylist-å¦‚ä½•æ‰©å®¹-â­â­â­" tabindex="-1"><a class="header-anchor" href="#ã€ç®€å•ã€‘arraylist-å¦‚ä½•æ‰©å®¹-â­â­â­" aria-hidden="true">#</a> ã€ç®€å•ã€‘ArrayList å¦‚ä½•æ‰©å®¹ï¼Ÿâ­â­â­</h3><p>ArrayList é»˜è®¤åˆå§‹å¤§å°ä¸º 10ï¼Œå½“å…ƒç´ æ•°è¾¾åˆ°å®¹é‡æ—¶ï¼Œè§¦å‘æ‰©å®¹ï¼Œæ¯æ¬¡æ‰©å®¹ 1.5 å€ã€‚</p><p>æ‰©å®¹å…³é”®ä»£ç ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">grow</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// minCapacity = å½“å‰size + 1</span>
    <span class="token keyword">int</span> oldCapacity <span class="token operator">=</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

    <span class="token comment">// å…³é”®ï¼šæ–°å®¹é‡ = æ—§å®¹é‡ + æ—§å®¹é‡çš„ä¸€åŠï¼ˆ1.5å€æ‰©å®¹ï¼‰</span>
    <span class="token keyword">int</span> newCapacity <span class="token operator">=</span> oldCapacity <span class="token operator">+</span> <span class="token punctuation">(</span>oldCapacity <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ç‰¹æ®Šæƒ…å†µå¤„ç†</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>newCapacity <span class="token operator">-</span> minCapacity <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment">// æ–°å®¹é‡ä»ä¸å¤Ÿ</span>
        newCapacity <span class="token operator">=</span> minCapacity<span class="token punctuation">;</span>       <span class="token comment">// ç›´æ¥ä½¿ç”¨æ‰€éœ€å®¹é‡</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>newCapacity <span class="token operator">-</span> <span class="token constant">MAX_ARRAY_SIZE</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment">// è¶…è¿‡æœ€å¤§é™åˆ¶</span>
        newCapacity <span class="token operator">=</span> <span class="token function">hugeCapacity</span><span class="token punctuation">(</span>minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// æ ¸å¿ƒï¼šåˆ›å»ºæ–°æ•°ç»„å¹¶æ‹·è´æ•°æ®</span>
    elementData <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> newCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å› æ­¤ï¼Œä¸ºäº†é¿å…é¢‘ç¹æ‰©å®¹ï¼Œæ¨èæ ¹æ®å®é™…æƒ…å†µé¢„åˆ†é…å®¹é‡ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="ã€ç®€å•ã€‘arraylist-å’Œæ•°ç»„æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#ã€ç®€å•ã€‘arraylist-å’Œæ•°ç»„æœ‰ä»€ä¹ˆåŒºåˆ«" aria-hidden="true">#</a> ã€ç®€å•ã€‘ArrayList å’Œæ•°ç»„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p><strong>ArrayList vs. æ•°ç»„</strong></p><table><thead><tr><th><strong>å¯¹æ¯”ç‚¹</strong></th><th><strong>æ•°ç»„ (Array)</strong></th><th><strong>ArrayList</strong></th></tr></thead><tbody><tr><td><strong>é•¿åº¦å¯å˜æ€§</strong></td><td>å›ºå®šé•¿åº¦ï¼Œåˆ›å»ºåæ— æ³•è°ƒæ•´å¤§å°</td><td>åŠ¨æ€æ‰©å®¹ï¼ˆé»˜è®¤æ‰©å®¹ 1.5 å€ï¼‰</td></tr><tr><td><strong>å­˜å‚¨ç±»å‹</strong></td><td>æ”¯æŒåŸºæœ¬ç±»å‹ï¼ˆ<code>int[]</code>ï¼‰å’Œå¯¹è±¡ç±»å‹</td><td>ä»…æ”¯æŒå¼•ç”¨ç±»å‹ï¼ˆåŸºæœ¬ç±»å‹éœ€è£…ç®±ï¼Œå¦‚ <code>Integer</code>ï¼‰</td></tr><tr><td><strong>å†…å­˜å ç”¨</strong></td><td>æ›´ç´§å‡‘ï¼ˆæ— é¢å¤–å¯¹è±¡å¼€é”€ï¼‰</td><td>æœ‰é¢å¤–å†…å­˜å¼€é”€ï¼ˆè®°å½•å¤§å°ã€æ‰©å®¹é¢„ç•™ç©ºé—´ç­‰ï¼‰</td></tr><tr><td><strong>è®¿é—®æ–¹å¼</strong></td><td>é€šè¿‡ç´¢å¼•ç›´æ¥è®¿é—®ï¼ˆ<code>arr[0]</code>ï¼‰</td><td>é€šè¿‡ <code>get(index)</code>/<code>set(index)</code> æ–¹æ³•è®¿é—®</td></tr><tr><td><strong>æ“ä½œæ•ˆç‡</strong></td><td>- æŸ¥è¯¢ï¼šO(1)ï¼ˆæå¿«ï¼‰<br>- å¢åˆ ï¼šO(n)ï¼ˆéœ€ç§»åŠ¨å…ƒç´ ï¼‰</td><td>- æŸ¥è¯¢ï¼šO(1)ï¼ˆåº•å±‚æ˜¯æ•°ç»„ï¼‰<br>- å¢åˆ ï¼š<br> - å°¾éƒ¨æ“ä½œï¼šO(1)<br> - ä¸­é—´æ“ä½œï¼šO(n)ï¼ˆéœ€ç§»åŠ¨å…ƒç´ ï¼‰</td></tr><tr><td><strong>åŠŸèƒ½æ–¹æ³•</strong></td><td>åŠŸèƒ½ç®€å•ï¼ˆä¾èµ– <code>Arrays</code> å·¥å…·ç±»ï¼‰</td><td>æä¾›ä¸°å¯Œæ–¹æ³•ï¼ˆ<code>add()</code>ã€<code>remove()</code>ã€<code>contains()</code> ç­‰ï¼‰</td></tr><tr><td><strong>çº¿ç¨‹å®‰å…¨</strong></td><td>éçº¿ç¨‹å®‰å…¨</td><td>éçº¿ç¨‹å®‰å…¨ï¼ˆéœ€ç”¨ <code>Collections.synchronizedList</code> åŒ…è£…ï¼‰</td></tr><tr><td><strong>æ³›å‹æ”¯æŒ</strong></td><td>ä¸æ”¯æŒæ³›å‹ï¼ˆç±»å‹æ£€æŸ¥åœ¨è¿è¡Œæ—¶ï¼‰</td><td>æ”¯æŒæ³›å‹ï¼ˆç¼–è¯‘æ—¶ç±»å‹å®‰å…¨ï¼‰</td></tr></tbody></table><p><strong>å°ç»“</strong>ï¼š</p><ul><li><strong>åŠ¨æ€æ€§</strong>ï¼š<code>ArrayList</code> è‡ªåŠ¨æ‰©å®¹ï¼Œæ•°ç»„é•¿åº¦å›ºå®šã€‚</li><li><strong>ç±»å‹æ”¯æŒ</strong>ï¼šæ•°ç»„å¯ç›´æ¥å­˜åŸºæœ¬ç±»å‹ï¼Œ<code>ArrayList</code> éœ€åŒ…è£…ç±»ã€‚</li><li><strong>æ€§èƒ½</strong>ï¼š <ul><li>æ•°ç»„çš„éšæœºè®¿é—®ç¨å¿«ï¼ˆå°‘ä¸€æ¬¡æ–¹æ³•è°ƒç”¨ï¼‰ã€‚</li><li><code>ArrayList</code> çš„å°¾éƒ¨æ’å…¥é«˜æ•ˆï¼Œä½†ä¸­é—´æ’å…¥/åˆ é™¤éœ€ç§»åŠ¨å…ƒç´ ã€‚</li></ul></li><li><strong>åŠŸèƒ½</strong>ï¼š<code>ArrayList</code> æä¾›æ›´å¤šä¾¿æ·æ–¹æ³•ï¼ˆå¦‚è¿­ä»£ã€æœç´¢ï¼‰ã€‚</li><li><strong>å†…å­˜</strong>ï¼šæ•°ç»„æ›´èŠ‚çœå†…å­˜ï¼Œ<code>ArrayList</code> æœ‰é¢å¤–ç»“æ„å¼€é”€ã€‚</li></ul><p><strong>åº”ç”¨</strong>ï¼š</p><ul><li><strong>é€‰æ•°ç»„</strong>ï¼šéœ€æè‡´æ€§èƒ½ã€å›ºå®šé•¿åº¦æˆ–å­˜å‚¨åŸºæœ¬ç±»å‹æ—¶ï¼ˆå¦‚æ•°å­¦è®¡ç®—ï¼‰ã€‚</li><li><strong>é€‰ ArrayList</strong>ï¼šéœ€è¦åŠ¨æ€å¤§å°ã€ä¾¿æ·æ“ä½œæˆ–æ³›å‹å®‰å…¨æ—¶ï¼ˆå¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯ï¼‰ã€‚</li></ul><h3 id="ã€ç®€å•ã€‘arraylist-å’Œ-linkedlist-æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#ã€ç®€å•ã€‘arraylist-å’Œ-linkedlist-æœ‰ä»€ä¹ˆåŒºåˆ«" aria-hidden="true">#</a> ã€ç®€å•ã€‘ArrayList å’Œ LinkedList æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p><strong><code>ArrayList</code> vs. <code>LinkedList</code></strong></p><table><thead><tr><th><strong>å¯¹æ¯”ç»´åº¦</strong></th><th><strong>ArrayList</strong></th><th><strong>LinkedList</strong></th></tr></thead><tbody><tr><td><strong>åº•å±‚æ•°æ®ç»“æ„</strong></td><td>åŠ¨æ€æ•°ç»„ï¼ˆ<code>Object[]</code>ï¼‰</td><td>åŒå‘é“¾è¡¨ï¼ˆ<code>Node</code> èŠ‚ç‚¹ï¼‰</td></tr><tr><td><strong>å†…å­˜å ç”¨</strong></td><td>æ›´ç´§å‡‘ï¼ˆè¿ç»­å†…å­˜ï¼‰</td><td>æ›´é«˜ï¼ˆæ¯ä¸ªå…ƒç´ éœ€é¢å¤–å­˜å‚¨å‰åèŠ‚ç‚¹æŒ‡é’ˆï¼‰</td></tr><tr><td><strong>éšæœºè®¿é—®æ€§èƒ½</strong></td><td>âš¡ <strong>O(1)</strong>ï¼ˆé€šè¿‡ç´¢å¼•ç›´æ¥è®¿é—®ï¼‰</td><td>ğŸ¢ <strong>O(n)</strong>ï¼ˆéœ€éå†é“¾è¡¨ï¼‰</td></tr><tr><td><strong>æ’å…¥/åˆ é™¤æ€§èƒ½</strong></td><td>- å°¾éƒ¨æ“ä½œï¼šâš¡ <strong>O(1)</strong><br>- ä¸­é—´/å¤´éƒ¨æ“ä½œï¼šğŸ¢ <strong>O(n)</strong>ï¼ˆéœ€ç§»åŠ¨å…ƒç´ ï¼‰</td><td>- å¤´å°¾æ“ä½œï¼šâš¡ <strong>O(1)</strong><br>- ä¸­é—´æ“ä½œï¼šğŸ¢ <strong>O(n)</strong>ï¼ˆéœ€éå†å®šä½ï¼‰</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>- é¢‘ç¹éšæœºè®¿é—®<br>- æ•°æ®é‡ç¨³å®šæˆ–å°¾éƒ¨æ“ä½œå¤š</td><td>- é¢‘ç¹å¤´å°¾æ’å…¥/åˆ é™¤<br>- æ•°æ®åŠ¨æ€æ€§å¼º</td></tr><tr><td><strong>é¢å¤–åŠŸèƒ½</strong></td><td>ä»…åŸºç¡€åˆ—è¡¨æ“ä½œ</td><td>å®ç°äº† <code>Deque</code> æ¥å£ï¼ˆå¯ä½œé˜Ÿåˆ—/æ ˆä½¿ç”¨ï¼‰</td></tr><tr><td><strong>ç©ºé—´å±€éƒ¨æ€§</strong></td><td>âœ… æ›´å¥½ï¼ˆCPU ç¼“å­˜å‹å¥½ï¼‰</td><td>âŒ è¾ƒå·®ï¼ˆèŠ‚ç‚¹åˆ†æ•£å­˜å‚¨ï¼‰</td></tr></tbody></table><p><strong>å¯¹æ¯”å°ç»“</strong>ï¼š<br> List<code> éœ€éå†é“¾è¡¨ã€‚ 2. **å¢åˆ æ•ˆç‡**ï¼š</code>ArrayList<code> å°¾éƒ¨æ’å…¥å¿«ï¼Œä¸­é—´/å¤´éƒ¨æ’å…¥æ…¢ï¼›</code>Lin</p><ol><li><strong>è®¿é—®é€Ÿåº¦</strong>ï¼š<code>ArrayList</code> éšæœºè®¿é—®æå¿«ï¼ˆæ•°ç»„ç´¢å¼•ï¼‰ï¼Œ<code>LinkedkedList</code> å¤´å°¾æ’å…¥å¿«ï¼Œä¸­é—´æ’å…¥ä»éœ€éå†ã€‚</li><li><strong>å†…å­˜å¼€é”€</strong>ï¼š<code>LinkedList</code> æ¯ä¸ªå…ƒç´ å¤šæ¶ˆè€— 2 ä¸ªæŒ‡é’ˆç©ºé—´ï¼ˆå‰é©±+åç»§ï¼‰ã€‚</li><li><strong>åŠŸèƒ½æ‰©å±•</strong>ï¼š<code>LinkedList</code> æ”¯æŒé˜Ÿåˆ—/æ ˆæ“ä½œï¼ˆå¦‚ <code>addFirst()</code>, <code>pollLast()</code>ï¼‰ã€‚</li></ol><p><strong>é€‰å‹å»ºè®®</strong>ï¼š</p><ul><li>ä¼˜å…ˆç”¨ <strong><code>ArrayList</code></strong>ï¼ˆå¤§å¤šæ•°åœºæ™¯æ€§èƒ½æ›´ä¼˜ï¼‰ã€‚</li><li>ä»…å½“éœ€è¦é¢‘ç¹åœ¨ <strong>å¤´éƒ¨/ä¸­é—´æ’å…¥åˆ é™¤</strong>ï¼Œæˆ–éœ€è¦ <strong>é˜Ÿåˆ—/æ ˆåŠŸèƒ½</strong> æ—¶é€‰ <code>LinkedList</code>ã€‚</li></ul><blockquote><p>ğŸ’¡ <strong>Java å®è·µæç¤º</strong>ï¼š</p><ul><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>Collections.synchronizedList</code> åŒ…è£…çš„ <code>ArrayList</code> æ¯” <code>LinkedList</code> çº¿ç¨‹å®‰å…¨å¼€é”€æ›´ä½ã€‚</li><li>Java 8+ çš„ <code>Stream</code> æ“ä½œåœ¨ <code>ArrayList</code> ä¸Šæ•ˆç‡æ›´é«˜ã€‚</li></ul></blockquote><h3 id="ã€ä¸­ç­‰ã€‘copyonwritearraylist-çš„åŸç†æ˜¯ä»€ä¹ˆ-â­â­" tabindex="-1"><a class="header-anchor" href="#ã€ä¸­ç­‰ã€‘copyonwritearraylist-çš„åŸç†æ˜¯ä»€ä¹ˆ-â­â­" aria-hidden="true">#</a> ã€ä¸­ç­‰ã€‘CopyOnWriteArrayList çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿâ­â­</h3><p><code>CopyOnWriteArrayList</code> æ ¸å¿ƒæ€æƒ³æ˜¯ &quot;å†™æ—¶å¤åˆ¶&quot;ï¼ˆCopy-On-Writeï¼ŒCoWï¼‰ï¼Œ<strong>é€‚ç”¨äºã€è¯»å¤šå†™å°‘ã€‘çš„é«˜å¹¶å‘åœºæ™¯</strong>ã€‚</p><p><code>CopyOnWriteArrayList</code> å†…éƒ¨ç»´æŠ¤ä¸€ä¸ª <code>volatile</code> Object æ•°ç»„ï¼ˆ<code>Object[] array</code>ï¼‰ï¼Œå­˜å‚¨æ‰€æœ‰å…ƒç´ ï¼Œ<code>volatile</code> ä¿è¯äº†å¹¶å‘å¯è§æ€§</p><ul><li>è¯»æ“ä½œï¼šç”±äºè¯»å–æ•°æ®æ˜¯ volatileï¼Œä¿è¯äº†å¹¶å‘å¯è§æ€§ï¼Œæ‰€ä»¥æ— éœ€åŠ é”</li><li>å†™æ“ä½œï¼ˆadd/set/removeï¼‰ï¼šæ ¸å¿ƒæ­¥éª¤å¦‚ä¸‹ <ol><li>åŠ é”ï¼ˆ<code>ReentrantLock</code>ï¼‰</li><li><code>Arrays.copyOf</code> å¤åˆ¶æ–°æ•°ç»„ï¼ˆé•¿åº¦ Â±1ï¼‰</li><li>åœ¨æ–°æ•°ç»„ä¸Šä¿®æ”¹</li><li>æ›¿æ¢åŸæ•°ç»„å¼•ç”¨</li></ol></li></ul><h2 id="set" tabindex="-1"><a class="header-anchor" href="#set" aria-hidden="true">#</a> Set</h2><h3 id="ã€ç®€å•ã€‘hashsetã€linkedhashset-å’Œ-treeset-æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#ã€ç®€å•ã€‘hashsetã€linkedhashset-å’Œ-treeset-æœ‰ä»€ä¹ˆåŒºåˆ«" aria-hidden="true">#</a> ã€ç®€å•ã€‘HashSetã€LinkedHashSet å’Œ TreeSet æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><table><thead><tr><th>ç‰¹æ€§</th><th>HashSet</th><th>LinkedHashSet</th><th>TreeSet</th></tr></thead><tbody><tr><td><strong>åº•å±‚å®ç°</strong></td><td>å“ˆå¸Œè¡¨ (HashMap)</td><td>å“ˆå¸Œè¡¨ + é“¾è¡¨</td><td>çº¢é»‘æ ‘</td></tr><tr><td><strong>æ’åºä¿è¯</strong></td><td>æ— é¡ºåº</td><td>æ’å…¥é¡ºåº</td><td>è‡ªç„¶é¡ºåº/è‡ªå®šä¹‰æ’åº</td></tr><tr><td><strong>æ—¶é—´å¤æ‚åº¦</strong></td><td>æ·»åŠ /åˆ é™¤/æŸ¥æ‰¾ï¼šO(1)</td><td>æ·»åŠ /åˆ é™¤/æŸ¥æ‰¾ï¼šO(1)</td><td>æ·»åŠ /åˆ é™¤/æŸ¥æ‰¾ï¼šO(log n)</td></tr><tr><td><strong>å…è®¸ null å…ƒç´ </strong></td><td>å…è®¸ 1 ä¸ª null</td><td>å…è®¸ 1 ä¸ª null</td><td>ä¸å…è®¸ï¼ˆé™¤éè‡ªå®šä¹‰ Comparator å…è®¸ï¼‰</td></tr><tr><td><strong>çº¿ç¨‹å®‰å…¨</strong></td><td>éçº¿ç¨‹å®‰å…¨</td><td>éçº¿ç¨‹å®‰å…¨</td><td>éçº¿ç¨‹å®‰å…¨</td></tr><tr><td><strong>æ€§èƒ½ç‰¹ç‚¹</strong></td><td>æœ€å¿«çš„åŸºç¡€æ“ä½œ</td><td>æ¯” HashSet ç¨æ…¢ä½†ä¿æŒé¡ºåº</td><td>æœ€æ…¢ä½†è‡ªåŠ¨æ’åº</td></tr><tr><td><strong>ä½¿ç”¨åœºæ™¯</strong></td><td>åªéœ€å”¯ä¸€æ€§ä¸å…³å¿ƒé¡ºåº</td><td>éœ€è¦ä¿æŒæ’å…¥é¡ºåº</td><td>éœ€è¦æ’åºçš„é›†åˆ</td></tr></tbody></table><p><strong>é¡ºåºç‰¹æ€§</strong></p><ul><li><code>HashSet</code>ï¼šå®Œå…¨ä¸ä¿è¯ä»»ä½•é¡ºåºï¼ˆåŸºäºå“ˆå¸Œå€¼å­˜å‚¨ï¼‰</li><li><code>LinkedHashSet</code>ï¼šç»´æŠ¤å…ƒç´ <strong>æ’å…¥é¡ºåº</strong>ï¼ˆè¿­ä»£æ—¶æŒ‰æ’å…¥é¡ºåºè¿”å›ï¼‰</li><li><code>TreeSet</code>ï¼šæ ¹æ®å…ƒç´ çš„<strong>è‡ªç„¶é¡ºåº</strong>æˆ–** Comparator **è¿›è¡Œæ’åº</li></ul><p><strong>æ€§èƒ½æ¯”è¾ƒ</strong></p><ul><li><strong>æ“ä½œé€Ÿåº¦</strong>ï¼šHashSet â‰ˆ LinkedHashSet &gt; TreeSet</li><li><strong>å†…å­˜å ç”¨</strong>ï¼šLinkedHashSet &gt; HashSet &gt; TreeSet</li><li><strong>è¿­ä»£æ€§èƒ½</strong>ï¼šLinkedHashSet æœ€ä¼˜ï¼ˆé¡ºåºè®¿é—®å¿«ï¼‰</li></ul><p><strong>å®ç°åŸç†</strong></p><ul><li><code>HashSet</code>ï¼šåŸºäº HashMap å®ç°ï¼Œåªä½¿ç”¨é”®</li><li><code>LinkedHashSet</code>ï¼šç»§æ‰¿ HashSetï¼Œé€šè¿‡é“¾è¡¨ç»´æŠ¤æ’å…¥é¡ºåº</li><li><code>TreeSet</code>ï¼šåŸºäº TreeMap å®ç°ï¼ˆçº¢é»‘æ ‘ç»“æ„ï¼‰</li></ul><p><strong>æ„é€ æ–¹å¼</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// HashSet</span>
<span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> hashSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// LinkedHashSet</span>
<span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> linkedHashSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// TreeSet - è‡ªç„¶æ’åº</span>
<span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> treeSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// TreeSet - è‡ªå®šä¹‰æ’åº</span>
<span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> customTreeSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token punctuation">.</span><span class="token function">reverseOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä½¿ç”¨åœºæ™¯å»ºè®®</strong></p><ul><li>éœ€è¦<strong>æœ€å¿«æŸ¥è¯¢</strong>ä¸”ä¸å…³å¿ƒé¡ºåº â†’ HashSet</li><li>éœ€è¦<strong>ä¿æŒæ’å…¥é¡ºåº</strong> â†’ LinkedHashSet</li><li>éœ€è¦<strong>è‡ªåŠ¨æ’åº</strong>æˆ–<strong>èŒƒå›´æŸ¥è¯¢</strong> â†’ TreeSet</li><li>éœ€è¦<strong>é¢‘ç¹è¿­ä»£</strong> â†’ LinkedHashSet</li></ul><p><strong>ç‰¹æ®Šæ³¨æ„äº‹é¡¹</strong></p><ul><li><p><strong>ç›¸ç­‰æ€§åˆ¤æ–­</strong>ï¼š</p><ul><li>ä¸‰è€…éƒ½ä½¿ç”¨<code>equals()</code>æ–¹æ³•åˆ¤æ–­å…ƒç´ æ˜¯å¦ç›¸åŒ</li><li>TreeSet åŒæ—¶ä¼šä½¿ç”¨<code>compareTo()</code>æˆ–<code>compare()</code>æ–¹æ³•ï¼ˆå¿…é¡»ä¸ equals é€»è¾‘ä¸€è‡´ï¼‰</li></ul></li><li><p><strong>TreeSet æ’åºè§„åˆ™</strong>ï¼š</p><ul><li>å…ƒç´ å¿…é¡»å®ç°<code>Comparable</code>æ¥å£ï¼Œæˆ–åœ¨æ„é€ æ—¶æä¾›<code>Comparator</code></li><li>å¦åˆ™ä¼šæŠ›å‡º<code>ClassCastException</code></li></ul></li><li><p><strong>çº¿ç¨‹å®‰å…¨æ›¿ä»£æ–¹æ¡ˆ</strong>ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> syncSet <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">synchronizedSet</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> syncTreeSet <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">synchronizedSet</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>é€‰æ‹©å“ªç§ Set å®ç°å–å†³äºä½ çš„å…·ä½“éœ€æ±‚ï¼šè¦é€Ÿåº¦ï¼ˆHashSetï¼‰ã€è¦æ’å…¥é¡ºåºï¼ˆLinkedHashSetï¼‰è¿˜æ˜¯è¦è‡ªåŠ¨æ’åºï¼ˆTreeSetï¼‰ã€‚</p><h2 id="queue" tabindex="-1"><a class="header-anchor" href="#queue" aria-hidden="true">#</a> Queue</h2><h3 id="ã€ç®€å•ã€‘queue-ä¸-deque-æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#ã€ç®€å•ã€‘queue-ä¸-deque-æœ‰ä»€ä¹ˆåŒºåˆ«" aria-hidden="true">#</a> ã€ç®€å•ã€‘Queue ä¸ Deque æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><div class="hint-container info"><p class="hint-container-title">Queue vs. Deque</p></div><table><thead><tr><th>ç‰¹æ€§</th><th>Queue ï¼ˆé˜Ÿåˆ—ï¼‰</th><th>Deque ï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰</th></tr></thead><tbody><tr><td><strong>è¿›å‡ºåŸåˆ™</strong></td><td>å…ˆè¿›å…ˆå‡º (FIFO)</td><td>ä¸¤ç«¯éƒ½å¯è¿›å‡º (FIFO + LIFO)</td></tr><tr><td><strong>ä¸»è¦æ“ä½œ</strong></td><td>é˜Ÿå°¾å…¥é˜Ÿ (add/offer)ï¼Œé˜Ÿé¦–å‡ºé˜Ÿ (remove/poll)</td><td>æ”¯æŒé˜Ÿé¦–/é˜Ÿå°¾çš„å…¥é˜Ÿå’Œå‡ºé˜Ÿæ“ä½œ</td></tr><tr><td><strong>ç»§æ‰¿å…³ç³»</strong></td><td>åŸºç¡€æ¥å£</td><td>ç»§æ‰¿è‡ª Queue æ¥å£</td></tr><tr><td><strong>ä»£è¡¨å­ç±»</strong></td><td>LinkedList, PriorityQueue</td><td>ArrayDeque, LinkedList</td></tr><tr><td><strong>ç‰¹æ®ŠåŠŸèƒ½</strong></td><td>-</td><td>æ”¯æŒæ ˆæ“ä½œ (push/pop/peek)</td></tr></tbody></table><p><strong>åŸºæœ¬æ“ä½œå¯¹æ¯”</strong></p>`,98),k=n("strong",null,"Queue æ“ä½œ",-1),m=n("strong",null,"Deque æ‰©å±•æ“ä½œ",-1),v=n("div",{class:"language-java line-numbers-mode","data-ext":"java"},[n("pre",{class:"language-java"},[n("code",null,[s("queue"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"offer"),n("span",{class:"token punctuation"},"("),s("e"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s("  "),n("span",{class:"token comment"},"// é˜Ÿå°¾æ·»åŠ ï¼ˆæ¨èï¼‰"),s(`
queue`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),s("e"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s("    "),n("span",{class:"token comment"},"// é˜Ÿå°¾æ·»åŠ ï¼ˆå¯èƒ½æŠ›å¼‚å¸¸ï¼‰"),s(`
queue`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"poll"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s("    "),n("span",{class:"token comment"},"// é˜Ÿé¦–ç§»é™¤å¹¶è¿”å›ï¼ˆæ¨èï¼‰"),s(`
queue`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"remove"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s("  "),n("span",{class:"token comment"},"// é˜Ÿé¦–ç§»é™¤å¹¶è¿”å›ï¼ˆå¯èƒ½æŠ›å¼‚å¸¸ï¼‰"),s(`
queue`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"peek"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s("    "),n("span",{class:"token comment"},"// æŸ¥çœ‹é˜Ÿé¦–ï¼ˆä¸ç§»é™¤ï¼‰"),s(`
queue`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"element"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// æŸ¥çœ‹é˜Ÿé¦–ï¼ˆå¯èƒ½æŠ›å¼‚å¸¸ï¼‰"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),h=n("div",{class:"language-java line-numbers-mode","data-ext":"java"},[n("pre",{class:"language-java"},[n("code",null,[n("span",{class:"token comment"},"// é˜Ÿé¦–æ“ä½œ"),s(`
deque`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"offerFirst"),n("span",{class:"token punctuation"},"("),s("e"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s("  deque"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"addFirst"),n("span",{class:"token punctuation"},"("),s("e"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
deque`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"pollFirst"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s("    deque"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"removeFirst"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
deque`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"peekFirst"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s("    deque"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getFirst"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// é˜Ÿå°¾æ“ä½œ"),s(`
deque`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"offerLast"),n("span",{class:"token punctuation"},"("),s("e"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s("   deque"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"addLast"),n("span",{class:"token punctuation"},"("),s("e"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
deque`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"pollLast"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s("     deque"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"removeLast"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
deque`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"peekLast"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s("     deque"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getLast"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// æ ˆæ“ä½œ"),s(`
deque`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),s("e"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s("        "),n("span",{class:"token comment"},"// = addFirst(e)"),s(`
deque`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"pop"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s("          "),n("span",{class:"token comment"},"// = removeFirst()"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),b=e(`<p><strong>ä½¿ç”¨åœºæ™¯å·®å¼‚</strong></p><ul><li><strong>Queue é€‚ç”¨åœºæ™¯ï¼ˆæ ‡å‡†çš„å…ˆè¿›å…ˆå‡ºåœºæ™¯ï¼‰</strong>ï¼š <ul><li>ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿï¼ˆå…ˆæ¥å…ˆæœåŠ¡ï¼‰</li><li>æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ï¼‰</li><li>å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰</li></ul></li><li><strong>Deque é€‚ç”¨åœºæ™¯ï¼ˆéœ€è¦ä¸¤ç«¯æ“ä½œçš„åœºæ™¯ï¼‰</strong>ï¼š <ul><li>æ’¤é”€æ“ä½œå†å²ï¼ˆä¸¤ç«¯æ·»åŠ ï¼Œä¸€ç«¯ç§»é™¤ï¼‰</li><li>æ»‘åŠ¨çª—å£ç®—æ³•</li><li>å¯åŒæ—¶ä½œä¸ºé˜Ÿåˆ—å’Œæ ˆä½¿ç”¨</li><li>å·¥ä½œçªƒå–ç®—æ³•ï¼ˆå¦‚ ForkJoinPool ä½¿ç”¨ Dequeï¼‰</li><li>å®ç°é«˜æ•ˆçš„å¤´å°¾æ“ä½œï¼ˆArrayDeque æ¯” LinkedList æ›´é«˜æ•ˆï¼‰</li></ul></li></ul><blockquote><p>å°ç»“ï¼š</p><ul><li>éœ€è¦<strong>æ ‡å‡†é˜Ÿåˆ—è¡Œä¸º</strong> â†’ é€‰æ‹© Queue</li><li>éœ€è¦<strong>ä¸¤ç«¯æ“ä½œ</strong>æˆ–<strong>æ ˆåŠŸèƒ½</strong> â†’ é€‰æ‹© Deque</li><li>éœ€è¦<strong>ä¼˜å…ˆçº§æ’åº</strong> â†’ ä½¿ç”¨ PriorityQueueï¼ˆQueue å®ç°ï¼‰</li><li>è¿½æ±‚<strong>é«˜æ€§èƒ½</strong> â†’ ä¼˜å…ˆè€ƒè™‘ ArrayDequeï¼ˆä¼˜äº LinkedListï¼‰</li></ul></blockquote><p><strong>æ€§èƒ½ç‰¹ç‚¹</strong></p><ul><li><code>ArrayDeque</code>ï¼ˆDeque å®ç°ï¼‰æ¯”<code>LinkedList</code>ï¼š <ul><li>å†…å­˜æ›´ç´§å‡‘ï¼ˆæ•°ç»„å®ç°ï¼‰</li><li>å¤§å¤šæ•°æ“ä½œæ›´é«˜æ•ˆï¼ˆO(1) æ—¶é—´ï¼‰</li><li>ä½†ä¸é€‚åˆé¢‘ç¹çš„ä¸­é—´æ’å…¥/åˆ é™¤</li></ul></li><li><code>PriorityQueue</code>ï¼ˆQueue å®ç°ï¼‰ï¼š <ul><li>åŸºäºå †ç»“æ„</li><li>ä¿è¯æ¯æ¬¡å–å‡ºçš„éƒ½æ˜¯ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ï¼ˆO(log n) æ—¶é—´ï¼‰</li></ul></li></ul><p><strong>çº¿ç¨‹å®‰å…¨æ³¨æ„</strong></p><ul><li>ä¸¤è€…ä¸»è¦å®ç°ç±»ï¼ˆLinkedList/ArrayDequeï¼‰éƒ½<strong>éçº¿ç¨‹å®‰å…¨</strong></li><li>çº¿ç¨‹å®‰å…¨æ›¿ä»£æ–¹æ¡ˆï¼š<div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> safeQueue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentLinkedQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Deque</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> safeDeque <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentLinkedDeque</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="ã€ç®€å•ã€‘arraydeque-ä¸-linkedlist-æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#ã€ç®€å•ã€‘arraydeque-ä¸-linkedlist-æœ‰ä»€ä¹ˆåŒºåˆ«" aria-hidden="true">#</a> ã€ç®€å•ã€‘ArrayDeque ä¸ LinkedList æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><ul><li><strong>æ€§èƒ½ä¼˜å…ˆé€‰ <code>ArrayDeque</code></strong>ï¼šé˜Ÿåˆ—/æ ˆåœºæ™¯ï¼Œè¿½æ±‚æ›´é«˜ååå’Œæ›´ä½å†…å­˜ã€‚</li><li><strong>åŠŸèƒ½çµæ´»é€‰ <code>LinkedList</code></strong>ï¼šéœ€è¦ä¸­é—´æ“ä½œã€éšæœºè®¿é—®æˆ–æ··åˆæ•°æ®ç»“æ„æ—¶ã€‚</li></ul><p>ä»¥ä¸‹æ˜¯ <strong>ArrayDeque</strong> å’Œ <strong>LinkedList</strong> çš„å¯¹æ¯”è¡¨æ ¼ï¼Œæ¸…æ™°æ¦‚æ‹¬ä¸¤è€…çš„æ ¸å¿ƒå·®å¼‚ï¼š</p><table><thead><tr><th><strong>å¯¹æ¯”é¡¹</strong></th><th><strong>ArrayDeque</strong></th><th><strong>LinkedList</strong></th></tr></thead><tbody><tr><td><strong>åº•å±‚æ•°æ®ç»“æ„</strong></td><td>åŠ¨æ€æ•°ç»„ï¼ˆå¾ªç¯æ•°ç»„ï¼‰</td><td>åŒå‘é“¾è¡¨</td></tr><tr><td><strong>å†…å­˜å ç”¨</strong></td><td>æ›´ä½ï¼ˆè¿ç»­å­˜å‚¨ï¼Œæ— èŠ‚ç‚¹å¼€é”€ï¼‰</td><td>æ›´é«˜ï¼ˆæ¯ä¸ªå…ƒç´ éœ€å­˜å‚¨å‰åèŠ‚ç‚¹å¼•ç”¨ï¼‰</td></tr><tr><td><strong>å¤´éƒ¨/å°¾éƒ¨æ“ä½œ</strong></td><td><code>O(1)</code>ï¼Œå¸¸æ•°æ—¶é—´æ›´ä¼˜</td><td><code>O(1)</code>ï¼Œä½†å®é™…æ›´æ…¢ï¼ˆéœ€æ“ä½œèŠ‚ç‚¹ï¼‰</td></tr><tr><td><strong>ä¸­é—´æ’å…¥/åˆ é™¤</strong></td><td><code>O(n)</code>ï¼ˆéœ€ç§»åŠ¨å…ƒç´ ï¼‰</td><td><code>O(1)</code>ï¼ˆå·²çŸ¥ä½ç½®æ—¶ï¼‰</td></tr><tr><td><strong>éšæœºè®¿é—®</strong></td><td>ç†è®ºä¸Š <code>O(1)</code>ï¼Œä½†é€šå¸¸ä¸æ”¯æŒç›´æ¥ç´¢å¼•æ“ä½œ</td><td><code>O(n)</code>ï¼ˆéœ€éå†é“¾è¡¨ï¼‰</td></tr><tr><td><strong>æ‰©å®¹æœºåˆ¶</strong></td><td>åŠ¨æ€æ‰©å®¹ï¼ˆé»˜è®¤ç¿»å€ï¼‰ï¼Œæ‰©å®¹æ—¶æœ‰å¼€é”€</td><td>æ— æ‰©å®¹æ¦‚å¿µï¼ŒæŒ‰éœ€åˆ†é…èŠ‚ç‚¹</td></tr><tr><td><strong>åŠŸèƒ½æ”¯æŒ</strong></td><td>ä»…åŒç«¯é˜Ÿåˆ—æ“ä½œï¼ˆ<code>Deque</code>ï¼‰</td><td>åŒæ—¶å®ç° <code>List</code> å’Œ <code>Deque</code>ï¼Œæ”¯æŒç´¢å¼•å’Œä¸­é—´æ“ä½œ</td></tr><tr><td><strong>çº¿ç¨‹å®‰å…¨</strong></td><td>éçº¿ç¨‹å®‰å…¨</td><td>éçº¿ç¨‹å®‰å…¨</td></tr><tr><td><strong>è¿­ä»£æ•ˆç‡</strong></td><td>æ›´é«˜ï¼ˆè¿ç»­å†…å­˜è®¿é—®ï¼‰</td><td>è¾ƒä½ï¼ˆéè¿ç»­å†…å­˜è®¿é—®ï¼‰</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>é«˜é¢‘åŒç«¯æ“ä½œï¼ˆå¦‚æ ˆã€é˜Ÿåˆ—ï¼‰</td><td>éœ€è¦ä¸­é—´æ“ä½œæˆ–æ··åˆ <code>List/Deque</code> éœ€æ±‚çš„åœºæ™¯</td></tr></tbody></table><h3 id="ã€ç®€å•ã€‘priorityqueue-æœ‰ä»€ä¹ˆç”¨" tabindex="-1"><a class="header-anchor" href="#ã€ç®€å•ã€‘priorityqueue-æœ‰ä»€ä¹ˆç”¨" aria-hidden="true">#</a> ã€ç®€å•ã€‘PriorityQueue æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p>PriorityQueue æ˜¯è‡ªåŠ¨æ’åºçš„å †ç»“æ„é˜Ÿåˆ—ï¼Œé»˜è®¤å°é¡¶å †ï¼Œé€‚ç”¨ä¼˜å…ˆçº§è°ƒåº¦ï¼Œä½†çº¿ç¨‹ä¸å®‰å…¨ã€‚</p><p><strong>åŸºæœ¬ç‰¹æ€§</strong></p><ul><li><strong>åŸºäºå †ï¼ˆé»˜è®¤å°é¡¶å †ï¼‰</strong>ï¼Œå…ƒç´ æŒ‰ä¼˜å…ˆçº§å‡ºé˜Ÿï¼ˆæœ€å°/æœ€å¤§å€¼å…ˆå‡ºï¼‰ã€‚</li><li><strong>æ— ç•Œé˜Ÿåˆ—</strong>ï¼ˆè‡ªåŠ¨æ‰©å®¹ï¼‰ï¼Œä½†åˆå§‹å®¹é‡ä¸º <code>11</code>ã€‚</li><li><strong>ä¸å…è®¸ <code>null</code></strong>ï¼Œä¸”å…ƒç´ éœ€å®ç° <code>Comparable</code> æˆ–æä¾› <code>Comparator</code>ã€‚</li></ul><p><strong>å…³é”®æ“ä½œ</strong></p><table><thead><tr><th>æ–¹æ³•</th><th>æ—¶é—´å¤æ‚åº¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>add(E e)</code> / <code>offer(E e)</code></td><td>O(log n)</td><td>æ’å…¥å…ƒç´ ï¼Œè§¦å‘å †è°ƒæ•´ã€‚</td></tr><tr><td><code>poll()</code></td><td>O(log n)</td><td>ç§»é™¤å¹¶è¿”å›é˜Ÿé¦–ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰ã€‚</td></tr><tr><td><code>peek()</code></td><td>O(1)</td><td>æŸ¥çœ‹é˜Ÿé¦–ä½†ä¸ç§»é™¤ã€‚</td></tr><tr><td><code>remove(Object o)</code></td><td>O(n)</td><td>åˆ é™¤æŒ‡å®šå…ƒç´ ï¼ˆéœ€éå†å †ï¼‰ã€‚</td></tr></tbody></table><p><strong>æ’åºè§„åˆ™</strong></p><ul><li><strong>é»˜è®¤è‡ªç„¶æ’åº</strong>ï¼ˆå…ƒç´ éœ€å®ç° <code>Comparable</code>ï¼‰ã€‚</li><li><strong>è‡ªå®šä¹‰æ’åº</strong>ï¼šé€šè¿‡ <code>Comparator</code> æŒ‡å®šï¼ˆå¦‚å¤§é¡¶å †ï¼‰ã€‚<div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> maxHeap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> b <span class="token operator">-</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><p><strong>ä½¿ç”¨åœºæ™¯</strong></p><ul><li><strong>ä»»åŠ¡è°ƒåº¦</strong>ï¼ˆæŒ‰ä¼˜å…ˆçº§æ‰§è¡Œï¼‰ã€‚</li><li><strong>Top K é—®é¢˜</strong>ï¼ˆç»´æŠ¤å‰ K ä¸ªæœ€å¤§/æœ€å°å€¼ï¼‰ã€‚</li><li><strong>Dijkstra ç®—æ³•</strong>ï¼ˆä¼˜å…ˆå¤„ç†æœ€çŸ­è·¯å¾„ï¼‰ã€‚</li></ul><p><strong>æ³¨æ„äº‹é¡¹</strong></p><ul><li><strong>éçº¿ç¨‹å®‰å…¨</strong>ï¼šå¤šçº¿ç¨‹éœ€ç”¨ <code>PriorityBlockingQueue</code>ã€‚</li><li><strong>è¿­ä»£æ— åº</strong>ï¼šéå†é¡ºåºä¸ç­‰äºä¼˜å…ˆçº§é¡ºåºã€‚</li><li><strong>æ€§èƒ½æƒè¡¡</strong>ï¼šæ’å…¥/åˆ é™¤ O(log n)ï¼Œä½†æŸ¥æ‰¾ O(n)ã€‚</li></ul><h3 id="ã€ç®€å•ã€‘blockingqueue-æœ‰ä»€ä¹ˆç”¨" tabindex="-1"><a class="header-anchor" href="#ã€ç®€å•ã€‘blockingqueue-æœ‰ä»€ä¹ˆç”¨" aria-hidden="true">#</a> ã€ç®€å•ã€‘BlockingQueue æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p><strong>BlockingQueue æ˜¯çº¿ç¨‹å®‰å…¨çš„é˜Ÿåˆ—</strong>ï¼Œæ”¯æŒé˜»å¡æ“ä½œï¼ˆé˜Ÿåˆ—æ»¡æ—¶é˜»å¡æ’å…¥ï¼Œç©ºæ—¶é˜»å¡å–å‡ºï¼‰ã€‚ä¸»è¦ç”¨äº<strong>ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹</strong>ï¼Œåè°ƒå¤šçº¿ç¨‹æ•°æ®äº¤æ¢ã€‚</p><p><strong>å…³é”®æ–¹æ³•</strong>ï¼š</p><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>put(E e)</code></td><td>é˜Ÿåˆ—æ»¡æ—¶<strong>é˜»å¡</strong>ï¼Œç›´åˆ°æœ‰ç©ºé—´æ’å…¥ã€‚</td></tr><tr><td><code>take()</code></td><td>é˜Ÿåˆ—ç©ºæ—¶<strong>é˜»å¡</strong>ï¼Œç›´åˆ°æœ‰å…ƒç´ å¯å–ã€‚</td></tr><tr><td><code>offer(E e)</code></td><td>éé˜»å¡æ’å…¥ï¼ŒæˆåŠŸè¿”å› <code>true</code>ï¼Œå¤±è´¥è¿”å› <code>false</code>ã€‚</td></tr><tr><td><code>poll()</code></td><td>éé˜»å¡å–å‡ºï¼Œæœ‰å…ƒç´ è¿”å›å…ƒç´ ï¼Œæ— å…ƒç´ è¿”å› <code>null</code>ã€‚</td></tr><tr><td><code>peek()</code></td><td>æŸ¥çœ‹é˜Ÿé¦–å…ƒç´ ä½†ä¸ç§»é™¤ï¼ˆæ— å…ƒç´ è¿”å› <code>null</code>ï¼‰ã€‚</td></tr></tbody></table><p><strong>å¸¸è§å®ç°ç±»</strong></p><ul><li><strong><code>ArrayBlockingQueue</code></strong>ï¼šå›ºå®šå¤§å°æ•°ç»„ï¼Œå•é”ï¼Œé€‚åˆä½å¹¶å‘ã€‚</li><li><strong><code>LinkedBlockingQueue</code></strong>ï¼šé“¾è¡¨ï¼ŒåŒé”ï¼ˆé«˜å¹¶å‘ï¼‰ï¼Œé»˜è®¤å‡ ä¹æ— ç•Œã€‚</li><li><strong><code>PriorityBlockingQueue</code></strong>ï¼šä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ˆå †å®ç°ï¼‰ï¼Œæ— ç•Œã€‚</li><li><strong><code>SynchronousQueue</code></strong>ï¼šä¸å­˜å‚¨å…ƒç´ ï¼Œç›´æ¥ä¼ é€’ä»»åŠ¡ï¼ˆä¸€å¯¹ä¸€é€šä¿¡ï¼‰ã€‚</li></ul><p><strong>é€‚ç”¨åœºæ™¯</strong></p><ul><li><strong>ä»»åŠ¡è°ƒåº¦</strong>ï¼ˆçº¿ç¨‹æ± ä»»åŠ¡é˜Ÿåˆ—ï¼‰ã€‚</li><li><strong>æ•°æ®ç¼“å†²</strong>ï¼ˆç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ï¼‰ã€‚</li><li><strong>æµé‡æ§åˆ¶</strong>ï¼ˆé€šè¿‡å›ºå®šå®¹é‡é™åˆ¶å¹¶å‘ï¼‰ã€‚</li></ul><p><strong>æ³¨æ„äº‹é¡¹</strong></p><ul><li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šæ‰€æœ‰å®ç°å‡çº¿ç¨‹å®‰å…¨ï¼Œä½†éœ€æ³¨æ„ <code>peek()</code> å’Œ <code>poll()</code> çš„ç«æ€æ¡ä»¶ã€‚</li><li><strong>é˜»å¡ç­–ç•¥</strong>ï¼š<code>put()</code>/<code>take()</code> ä¼šé˜»å¡ï¼Œ<code>offer()</code>/<code>poll()</code> å¯è®¾ç½®è¶…æ—¶ã€‚</li><li><strong>æ— ç•Œé˜Ÿåˆ—é£é™©</strong>ï¼š<code>LinkedBlockingQueue</code> é»˜è®¤æ— ç•Œï¼Œå¯èƒ½å¯¼è‡´ <code>OOM</code>ï¼Œå»ºè®®è®¾ç½®å®¹é‡ã€‚</li></ul><p><strong>ä¸€å¥è¯æ€»ç»“</strong>ï¼š å¤šçº¿ç¨‹é—´å®‰å…¨ä¼ é€’æ•°æ®çš„é˜»å¡é˜Ÿåˆ—ï¼Œæ ¸å¿ƒæ–¹æ³•æ˜¯ <code>put()</code>ï¼ˆé˜»å¡æ’å…¥ï¼‰å’Œ <code>take()</code>ï¼ˆé˜»å¡å–å‡ºï¼‰ï¼ŒæŒ‰åœºæ™¯é€‰å®ç°ç±»ã€‚</p><h3 id="ã€ä¸­ç­‰ã€‘arrayblockingqueue-å’Œ-linkedblockingqueue-æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#ã€ä¸­ç­‰ã€‘arrayblockingqueue-å’Œ-linkedblockingqueue-æœ‰ä»€ä¹ˆåŒºåˆ«" aria-hidden="true">#</a> ã€ä¸­ç­‰ã€‘ArrayBlockingQueue å’Œ LinkedBlockingQueue æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p><code>ArrayBlockingQueue</code> å’Œ <code>LinkedBlockingQueue</code> éƒ½æ˜¯ Java å¹¶å‘åŒ…ï¼ˆ<code>java.util.concurrent</code>ï¼‰ä¸­çš„<strong>çº¿ç¨‹å®‰å…¨é˜»å¡é˜Ÿåˆ—</strong>ï¼Œä½†å®ƒä»¬åœ¨åº•å±‚å®ç°ã€æ€§èƒ½å’Œé€‚ç”¨åœºæ™¯ä¸Šæœ‰æ˜¾è‘—åŒºåˆ«ã€‚</p><ul><li><strong><code>ArrayBlockingQueue</code></strong>ï¼šå›ºå®šå®¹é‡ï¼Œå•é”ï¼Œé€‚åˆä½å¹¶å‘æˆ–å†…å­˜æ•æ„Ÿåœºæ™¯ã€‚</li><li><strong><code>LinkedBlockingQueue</code></strong>ï¼šåŠ¨æ€æ‰©å®¹ï¼ŒåŒé”ï¼Œé€‚åˆé«˜å¹¶å‘å’Œé«˜åååœºæ™¯ã€‚</li><li><strong>é¿å… <code>OOM</code></strong>ï¼šå¦‚æœä½¿ç”¨ <code>LinkedBlockingQueue</code>ï¼Œå»ºè®®è®¾ç½®åˆç†å®¹é‡ï¼ˆé»˜è®¤ <code>MAX_VALUE</code> å¯èƒ½å¯¼è‡´å†…å­˜é—®é¢˜ï¼‰ã€‚</li></ul><p><strong><code>ArrayBlockingQueue</code> vs. <code>LinkedBlockingQueue</code></strong></p><table><thead><tr><th><strong>å¯¹æ¯”é¡¹</strong></th><th><strong>ArrayBlockingQueue</strong></th><th><strong>LinkedBlockingQueue</strong></th></tr></thead><tbody><tr><td><strong>åº•å±‚æ•°æ®ç»“æ„</strong></td><td><strong>å›ºå®šå¤§å°çš„æ•°ç»„</strong>ï¼ˆå¾ªç¯é˜Ÿåˆ—ï¼‰</td><td><strong>é“¾è¡¨</strong>ï¼ˆå¯åŠ¨æ€æ‰©å®¹ï¼‰</td></tr><tr><td><strong>åˆå§‹åŒ–å®¹é‡</strong></td><td><strong>å¿…é¡»æŒ‡å®šå®¹é‡</strong>ï¼ˆæ— é»˜è®¤æ„é€ æ–¹æ³•ï¼‰</td><td>å¯é€‰æŒ‡å®šå®¹é‡ï¼ˆé»˜è®¤ <code>Integer.MAX_VALUE</code>ï¼‰</td></tr><tr><td><strong>å†…å­˜å ç”¨</strong></td><td>æ›´ç´§å‡‘ï¼ˆè¿ç»­å­˜å‚¨ï¼‰</td><td>ç¨é«˜ï¼ˆæ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨å‰åæŒ‡é’ˆï¼‰</td></tr><tr><td><strong>é”æœºåˆ¶</strong></td><td><strong>å•é”ï¼ˆå…¥é˜Ÿå’Œå‡ºé˜Ÿå…±ç”¨åŒä¸€æŠŠé”ï¼‰</strong></td><td><strong>åŒé”ï¼ˆå…¥é˜Ÿå’Œå‡ºé˜Ÿåˆ†ç¦»é”ï¼Œå‡å°‘ç«äº‰ï¼‰</strong></td></tr><tr><td><strong>ååé‡</strong></td><td>è¾ƒä½ï¼ˆé”ç«äº‰æ›´æ¿€çƒˆï¼‰</td><td>è¾ƒé«˜ï¼ˆè¯»å†™åˆ†ç¦»ï¼Œå¹¶å‘æ€§èƒ½æ›´å¥½ï¼‰</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>å›ºå®šå¤§å°é˜Ÿåˆ—ï¼Œé¿å… OOM</td><td>é«˜å¹¶å‘ã€åŠ¨æ€æ‰©å®¹åœºæ™¯</td></tr></tbody></table><p><strong>åº•å±‚æ•°æ®ç»“æ„</strong></p><ul><li><p><strong><code>ArrayBlockingQueue</code></strong></p><ul><li>åŸºäº<strong>æ•°ç»„</strong>ï¼ˆå¾ªç¯é˜Ÿåˆ—ï¼‰ï¼Œåˆå§‹åŒ–æ—¶å¿…é¡»æŒ‡å®šå›ºå®šå®¹é‡ã€‚</li><li>å­˜å‚¨è¿ç»­ï¼Œå†…å­˜å±€éƒ¨æ€§å¥½ï¼Œä½†æ‰©å®¹éœ€é‡å»ºæ•°ç»„ï¼ˆä¸æ”¯æŒåŠ¨æ€æ‰©å®¹ï¼‰ã€‚</li></ul></li><li><p><strong><code>LinkedBlockingQueue</code></strong></p><ul><li>åŸºäº<strong>é“¾è¡¨</strong>ï¼Œé»˜è®¤å®¹é‡ <code>Integer.MAX_VALUE</code>ï¼ˆå‡ ä¹æ— ç•Œï¼‰ã€‚</li><li>å¯åŠ¨æ€å¢é•¿ï¼Œä½†æ¯ä¸ªèŠ‚ç‚¹éœ€é¢å¤–å­˜å‚¨å‰åæŒ‡é’ˆï¼Œå†…å­˜å¼€é”€ç¨å¤§ã€‚</li></ul></li></ul><p><strong>é”æœºåˆ¶</strong></p><ul><li><p><strong><code>ArrayBlockingQueue</code></strong></p><ul><li>ä½¿ç”¨<strong>å•é”</strong>ï¼ˆ<code>ReentrantLock</code>ï¼‰ï¼Œå…¥é˜Ÿå’Œå‡ºé˜Ÿæ“ä½œå…±ç”¨åŒä¸€æŠŠé”ï¼Œç«äº‰è¾ƒæ¿€çƒˆã€‚</li><li>é€‚åˆ<strong>ä½å¹¶å‘</strong>æˆ–<strong>å®¹é‡å›ºå®š</strong>çš„åœºæ™¯ã€‚</li></ul></li><li><p><strong><code>LinkedBlockingQueue</code></strong></p><ul><li>é‡‡ç”¨<strong>åŒé”</strong>ï¼ˆ<code>putLock</code> å’Œ <code>takeLock</code>ï¼‰ï¼Œå…¥é˜Ÿå’Œå‡ºé˜Ÿæ“ä½œäº’ä¸é˜»å¡ã€‚</li><li><strong>é«˜å¹¶å‘</strong>ä¸‹ååé‡æ›´é«˜ï¼ˆå¦‚ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ï¼‰ã€‚</li></ul></li></ul><p><strong>æ€§èƒ½å¯¹æ¯”</strong></p><table><thead><tr><th><strong>æ“ä½œ</strong></th><th><strong>ArrayBlockingQueue</strong></th><th><strong>LinkedBlockingQueue</strong></th></tr></thead><tbody><tr><td><strong>å…¥é˜Ÿï¼ˆ<code>put</code>ï¼‰</strong></td><td>è¾ƒæ…¢ï¼ˆå•é”ç«äº‰ï¼‰</td><td>æ›´å¿«ï¼ˆåŒé”åˆ†ç¦»ï¼‰</td></tr><tr><td><strong>å‡ºé˜Ÿï¼ˆ<code>take</code>ï¼‰</strong></td><td>è¾ƒæ…¢ï¼ˆå•é”ç«äº‰ï¼‰</td><td>æ›´å¿«ï¼ˆåŒé”åˆ†ç¦»ï¼‰</td></tr><tr><td><strong>å†…å­˜å ç”¨</strong></td><td>æ›´ç´§å‡‘</td><td>ç¨é«˜ï¼ˆé“¾è¡¨èŠ‚ç‚¹å¼€é”€ï¼‰</td></tr></tbody></table><p><strong>ä½¿ç”¨åœºæ™¯å»ºè®®</strong></p><p><strong>é€‰æ‹© <code>ArrayBlockingQueue</code> çš„æƒ…å†µ</strong>ï¼š</p><ul><li>âœ… <strong>é˜Ÿåˆ—å¤§å°å›ºå®š</strong>ï¼Œé˜²æ­¢å†…å­˜è€—å°½ï¼ˆå¦‚ä»»åŠ¡é˜Ÿåˆ—æœ‰ä¸¥æ ¼ä¸Šé™ï¼‰ã€‚</li><li>âœ… <strong>ä½/ä¸­å¹¶å‘</strong>ï¼Œä¸”å¯¹å†…å­˜å ç”¨æ•æ„Ÿã€‚</li></ul><p><strong>é€‰æ‹© <code>LinkedBlockingQueue</code> çš„æƒ…å†µ</strong>ï¼š</p><ul><li>âœ… <strong>é«˜å¹¶å‘</strong>ï¼ˆç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ï¼‰ã€‚</li><li>âœ… <strong>é˜Ÿåˆ—å¤§å°ä¸å›ºå®š</strong>ï¼ˆé»˜è®¤å‡ ä¹æ— ç•Œï¼Œä½†å¯æ‰‹åŠ¨æŒ‡å®šå®¹é‡ï¼‰ã€‚</li><li>âœ… <strong>éœ€è¦æ›´é«˜çš„ååé‡</strong>ï¼ˆåŒé”æœºåˆ¶å‡å°‘ç«äº‰ï¼‰ã€‚</li></ul>`,50);function y(L,f){const c=l("CodeTabs");return i(),r("div",null,[g,d(c,{id:"1266",data:[{id:"<strong>Queue æ“ä½œ</strong>"},{id:"<strong>Deque æ‰©å±•æ“ä½œ</strong>"}],"tab-id":"é‡è½½å’Œé‡å†™çš„ç¤ºä¾‹"},{title0:t(({value:a,isActive:o})=>[k]),title1:t(({value:a,isActive:o})=>[m]),tab0:t(({value:a,isActive:o})=>[v]),tab1:t(({value:a,isActive:o})=>[h]),_:1}),b])}const S=p(u,[["render",y],["__file","index.html.vue"]]);export{S as default};
