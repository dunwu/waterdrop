import{_ as i}from"./plugin-vue_export-helper-c27b6911.js";import{r,o as s,c as l,a as e,b as n,d as t,e as o}from"./app-3113b888.js";const c={},d=o('<h1 id="spring-bean" tabindex="-1"><a class="header-anchor" href="#spring-bean" aria-hidden="true">#</a> Spring Bean</h1><p>åœ¨ Spring ä¸­ï¼Œæ„æˆåº”ç”¨ç¨‹åºä¸»ä½“ç”± Spring IoC å®¹å™¨ç®¡ç†çš„å¯¹è±¡ç§°ä¸º Beanã€‚<strong>Bean æ˜¯ç”± Spring IoC å®¹å™¨å®ä¾‹åŒ–ã€è£…é…å’Œç®¡ç†çš„å¯¹è±¡</strong>ã€‚ Bean ä»¥åŠå®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»åæ˜ åœ¨å®¹å™¨ä½¿ç”¨çš„é…ç½®å…ƒæ•°æ®ä¸­ã€‚</p><h2 id="spring-bean-å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#spring-bean-å®šä¹‰" aria-hidden="true">#</a> Spring Bean å®šä¹‰</h2><h3 id="beandefinition" tabindex="-1"><a class="header-anchor" href="#beandefinition" aria-hidden="true">#</a> BeanDefinition</h3><p>Spring IoC å®¹å™¨æœ¬èº«ï¼Œå¹¶ä¸èƒ½è¯†åˆ«é…ç½®çš„å…ƒæ•°æ®ã€‚ä¸ºæ­¤ï¼Œè¦å°†è¿™äº›é…ç½®ä¿¡æ¯è½¬ä¸º Spring èƒ½è¯†åˆ«çš„æ ¼å¼â€”â€”<code>BeanDefinition</code> å¯¹è±¡ã€‚</p><p><strong><code>BeanDefinition</code> æ˜¯ Spring ä¸­å®šä¹‰ Bean çš„é…ç½®å…ƒä¿¡æ¯æ¥å£</strong>ï¼Œå®ƒåŒ…å«ï¼š</p><ul><li>Bean ç±»å</li><li>Bean è¡Œä¸ºé…ç½®å…ƒç´ ï¼Œå¦‚ï¼šä½œç”¨åŸŸã€è‡ªåŠ¨ç»‘å®šçš„æ¨¡å¼ã€ç”Ÿå‘½å‘¨æœŸå›è°ƒç­‰</li><li>å…¶ä»– Bean å¼•ç”¨ï¼Œä¹Ÿå¯ç§°ä¸ºåˆä½œè€…ï¼ˆCollaboratorsï¼‰æˆ–ä¾èµ–ï¼ˆDependenciesï¼‰</li><li>é…ç½®è®¾ç½®ï¼Œå¦‚ Bean å±æ€§ï¼ˆPropertiesï¼‰</li></ul><h4 id="beandefinition-å…ƒä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#beandefinition-å…ƒä¿¡æ¯" aria-hidden="true">#</a> BeanDefinition å…ƒä¿¡æ¯</h4><p><code>BeanDefinition</code> å…ƒä¿¡æ¯å¦‚ä¸‹ï¼š</p>',9),p=e("thead",null,[e("tr",null,[e("th",null,"å±æ€§ï¼ˆPropertyï¼‰"),e("th",null,"è¯´æ˜")])],-1),u={href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-class",target:"_blank",rel:"noopener noreferrer"},h=e("td",null,"å…¨ç±»åï¼Œå¿…é¡»æ˜¯å…·ä½“ç±»ï¼Œä¸èƒ½ç”¨æŠ½è±¡ç±»æˆ–æ¥å£",-1),g={href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-beanname",target:"_blank",rel:"noopener noreferrer"},f=e("td",null,"Bean çš„åç§°æˆ–è€… ID",-1),b={href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes",target:"_blank",rel:"noopener noreferrer"},B=e("td",null,[n("Bean çš„ä½œç”¨åŸŸï¼ˆå¦‚ï¼š"),e("code",null,"singleton"),n("ã€"),e("code",null,"prototype"),n(" ç­‰ï¼‰")],-1),_={href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-collaborators",target:"_blank",rel:"noopener noreferrer"},m=e("td",null,"Bean æ„é€ å™¨å‚æ•°ï¼ˆç”¨äºä¾èµ–æ³¨å…¥ï¼‰",-1),k={href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-collaborators",target:"_blank",rel:"noopener noreferrer"},y=e("td",null,"Bean å±æ€§è®¾ç½®ï¼ˆç”¨äºä¾èµ–æ³¨å…¥ï¼‰",-1),S={href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-autowire",target:"_blank",rel:"noopener noreferrer"},v=e("td",null,"Bean è‡ªåŠ¨ç»‘å®šæ¨¡å¼ï¼ˆå¦‚ï¼šé€šè¿‡åç§° byNameï¼‰",-1),x={href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-lazy-init",target:"_blank",rel:"noopener noreferrer"},w=e("td",null,"Bean å»¶è¿Ÿåˆå§‹åŒ–æ¨¡å¼ï¼ˆå»¶è¿Ÿå’Œéå»¶è¿Ÿï¼‰",-1),D={href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-lifecycle-initializingbean",target:"_blank",rel:"noopener noreferrer"},q=e("td",null,"Bean åˆå§‹åŒ–å›è°ƒæ–¹æ³•åç§°",-1),I={href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-lifecycle-disposablebean",target:"_blank",rel:"noopener noreferrer"},A=e("td",null,"Bean é”€æ¯å›è°ƒæ–¹æ³•åç§°",-1),P=e("h4",{id:"beandefinition-æ„å»º",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#beandefinition-æ„å»º","aria-hidden":"true"},"#"),n(" BeanDefinition æ„å»º")],-1),C=e("p",null,"BeanDefinition æ„å»ºæ–¹å¼ï¼š",-1),z=e("ul",null,[e("li",null,[e("p",null,[n("é€šè¿‡ "),e("code",null,"BeanDefinitionBuilder")])]),e("li",null,[e("p",null,[n("é€šè¿‡ "),e("code",null,"AbstractBeanDefinition"),n(" ä»¥åŠæ´¾ç”Ÿç±»")])])],-1),T={href:"https://github.com/dunwu/spring-tutorial/blob/master/codes/core/spring-core-ioc/src/test/java/io/github/dunwu/spring/core/bean/BeanDefinitionTests.java",target:"_blank",rel:"noopener noreferrer"},j=o(`<h3 id="spring-bean-å‘½å" tabindex="-1"><a class="header-anchor" href="#spring-bean-å‘½å" aria-hidden="true">#</a> Spring Bean å‘½å</h3><h4 id="spring-bean-å‘½åè§„åˆ™" tabindex="-1"><a class="header-anchor" href="#spring-bean-å‘½åè§„åˆ™" aria-hidden="true">#</a> Spring Bean å‘½åè§„åˆ™</h4><p>æ¯ä¸ª Bean æ‹¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæ ‡è¯†ç¬¦ï¼ˆidentifiersï¼‰ï¼Œè¿™äº›æ ‡è¯†ç¬¦åœ¨ Bean æ‰€åœ¨çš„å®¹å™¨å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚é€šå¸¸ï¼Œä¸€ä¸ª Bean ä»…æœ‰ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œå¦‚æœéœ€è¦é¢å¤–çš„ï¼Œå¯è€ƒè™‘ä½¿ç”¨åˆ«åï¼ˆAliasï¼‰æ¥æ‰©å……ã€‚</p><p>åœ¨åŸºäº XML çš„é…ç½®å…ƒä¿¡æ¯ä¸­ï¼Œå¼€å‘äººå‘˜<strong>å¯ä»¥ä½¿ç”¨ <code>id</code> å±æ€§ã€<code>name</code> å±æ€§æˆ–æ¥æŒ‡å®š Bean æ ‡è¯†ç¬¦</strong>ã€‚é€šå¸¸ï¼ŒBean çš„æ ‡è¯†ç¬¦ç”±å­—æ¯ç»„æˆï¼Œå…è®¸å‡ºç°ç‰¹æ®Šå­—ç¬¦ã€‚å¦‚æœè¦æƒ³å¼•å…¥ Bean çš„åˆ«åçš„è¯ï¼Œå¯åœ¨ <code>name</code> å±æ€§ä½¿ç”¨åŠè§’é€—å·ï¼ˆâ€œ,â€ï¼‰æˆ–åˆ†å·ï¼ˆâ€œ;â€) æ¥é—´éš”ã€‚</p><p>Spring ä¸­ï¼Œ<strong>ä¸º Bean æŒ‡å®š <code>id</code> å’Œ <code>name</code> å±æ€§ä¸æ˜¯å¿…é¡»çš„</strong>ã€‚å¦‚æœä¸æŒ‡å®šï¼ŒSpring ä¼šè‡ªåŠ¨ä¸º Bean åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„åç§°ã€‚å°½ç®¡ Bean çš„å‘½åæ²¡æœ‰é™åˆ¶ï¼Œä¸è¿‡<strong>å®˜æ–¹å»ºè®®é‡‡ç”¨é©¼å³°å‘½åæ³•æ¥å‘½å Bean</strong>ã€‚</p><h4 id="spring-bean-å‘½åç”Ÿæˆå™¨" tabindex="-1"><a class="header-anchor" href="#spring-bean-å‘½åç”Ÿæˆå™¨" aria-hidden="true">#</a> Spring Bean å‘½åç”Ÿæˆå™¨</h4><p>Spring æä¾›äº†ä¸¤ç§ Spring Bean å‘½åç”Ÿæˆå™¨ï¼š</p><ul><li><code>DefaultBeanNameGenerator</code>ï¼šé»˜è®¤é€šç”¨ <code>BeanNameGenerator</code> å®ç°ã€‚</li><li><code>AnnotationBeanNameGenerator</code>ï¼šåŸºäºæ³¨è§£æ‰«æçš„ <code>BeanNameGenerator</code> å®ç°ã€‚</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanNameGenerator</span> <span class="token punctuation">{</span>
   <span class="token class-name">String</span> <span class="token function">generateBeanName</span><span class="token punctuation">(</span><span class="token class-name">BeanDefinition</span> definition<span class="token punctuation">,</span> <span class="token class-name">BeanDefinitionRegistry</span> registry<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="spring-bean-åˆ«å" tabindex="-1"><a class="header-anchor" href="#spring-bean-åˆ«å" aria-hidden="true">#</a> Spring Bean åˆ«å</h4><p>Spring æ”¯æŒé€šè¿‡ <code>&lt;alias&gt;</code> å±æ€§ä¸º Bean è®¾ç½®åˆ«åã€‚</p><p>Bean åˆ«åï¼ˆAliasï¼‰çš„ä½œç”¨ï¼š</p><ul><li>å¤ç”¨ç°æœ‰çš„ <code>BeanDefinition</code></li><li>æ›´å…·æœ‰åœºæ™¯åŒ–çš„å‘½åæ–¹æ³•ï¼Œæ¯”å¦‚ï¼š <ul><li><code>&lt;alias name=&quot;myApp-dataSource&quot; alias=&quot;subsystemA-dataSource&quot;/&gt;</code></li><li><code>&lt;alias name=&quot;myApp-dataSource&quot; alias=&quot;subsystemB-dataSource&quot;/&gt;</code></li></ul></li></ul><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>io.github.dunwu.spring.core.bean.entity.person.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- å±æ€§ç•¥ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>alias</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>aliasUser<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="spring-bean-ç”Ÿå‘½å‘¨æœŸ" tabindex="-1"><a class="header-anchor" href="#spring-bean-ç”Ÿå‘½å‘¨æœŸ" aria-hidden="true">#</a> Spring Bean ç”Ÿå‘½å‘¨æœŸ</h2><figure><img src="https://raw.githubusercontent.com/dunwu/images/master/snap/20211201102734.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ol><li><p>Spring å¯¹ Bean è¿›è¡Œå®ä¾‹åŒ–ï¼ˆç›¸å½“äº new XXX()ï¼‰</p></li><li><p>Spring å°†å€¼å’Œå¼•ç”¨æ³¨å…¥åˆ° Bean å¯¹åº”çš„å±æ€§ä¸­</p></li><li><p>å¦‚æœ Bean å®ç°äº† <code>BeanNameAware</code> æ¥å£ï¼ŒSpring å°† Bean çš„ ID ä¼ é€’ç»™ <code>setBeanName</code> æ–¹æ³•</p><ul><li>ä½œç”¨æ˜¯é€šè¿‡ Bean çš„å¼•ç”¨æ¥è·å¾— Bean IDï¼Œä¸€èˆ¬ä¸šåŠ¡ä¸­æ˜¯å¾ˆå°‘æœ‰ç”¨åˆ° Bean çš„ ID çš„</li></ul></li><li><p>å¦‚æœ Bean å®ç°äº† <code>BeanFactoryAware</code> æ¥å£ï¼ŒSpring å°†è°ƒç”¨ <code>setBeanDactory</code> æ–¹æ³•ï¼Œå¹¶æŠŠ <code>BeanFactory</code> å®¹å™¨å®ä¾‹ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚</p><ul><li>ä½œç”¨æ˜¯è·å– Spring å®¹å™¨ï¼Œå¦‚ Bean é€šè¿‡ Spring å®¹å™¨å‘å¸ƒäº‹ä»¶ç­‰</li></ul></li><li><p>å¦‚æœ Bean å®ç°äº† <code>ApplicationContextAware</code> æ¥å£ï¼ŒSpring å®¹å™¨å°†è°ƒç”¨ <code>setApplicationContext</code> æ–¹æ³•ï¼ŒæŠŠåº”ç”¨ä¸Šä¸‹æ–‡ä½œä¸ºå‚æ•°ä¼ å…¥</p><ul><li>ä½œç”¨ä¸ <code>BeanFactory</code> ç±»ä¼¼éƒ½æ˜¯ä¸ºäº†è·å– Spring å®¹å™¨ï¼Œä¸åŒçš„æ˜¯ Spring å®¹å™¨åœ¨è°ƒç”¨ <code>setApplicationContext</code> æ–¹æ³•æ—¶ä¼šæŠŠå®ƒè‡ªå·±ä½œä¸º <code>setApplicationContext</code> çš„å‚æ•°ä¼ å…¥ï¼Œè€Œ Spring å®¹å™¨åœ¨è°ƒç”¨ <code>setBeanFactory</code> å‰éœ€è¦ä½¿ç”¨è€…è‡ªå·±æŒ‡å®šï¼ˆæ³¨å…¥ï¼‰<code>setBeanFactory</code> é‡Œçš„å‚æ•° <code>BeanFactory</code></li></ul></li><li><p>å¦‚æœ Bean å®ç°äº† <code>BeanPostProcess</code> æ¥å£ï¼ŒSpring å°†è°ƒç”¨ <code>postProcessBeforeInitialization</code> æ–¹æ³•</p><ul><li>ä½œç”¨æ˜¯åœ¨ Bean å®ä¾‹åˆ›å»ºæˆåŠŸåå¯¹å…¶è¿›è¡Œå¢å¼ºå¤„ç†ï¼Œå¦‚å¯¹ Bean è¿›è¡Œä¿®æ”¹ï¼Œå¢åŠ æŸä¸ªåŠŸèƒ½</li></ul></li><li><p>å¦‚æœ Bean å®ç°äº† <code>InitializingBean</code> æ¥å£ï¼ŒSpring å°†è°ƒç”¨ <code>afterPropertiesSet</code> æ–¹æ³•ï¼Œä½œç”¨ä¸åœ¨é…ç½®æ–‡ä»¶ä¸­å¯¹ Bean ä½¿ç”¨ <code>init-method</code> å£°æ˜åˆå§‹åŒ–çš„ä½œç”¨ä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨ Bean çš„å…¨éƒ¨å±æ€§è®¾ç½®æˆåŠŸåæ‰§è¡Œçš„åˆå§‹åŒ–æ–¹æ³•ã€‚</p></li><li><p>å¦‚æœ Bean å®ç°äº† <code>BeanPostProcess</code> æ¥å£ï¼ŒSpring å°†è°ƒç”¨ <code>postProcessAfterInitialization</code> æ–¹æ³•</p><ul><li><code>postProcessBeforeInitialization</code> æ˜¯åœ¨ Bean åˆå§‹åŒ–å‰æ‰§è¡Œçš„ï¼Œè€Œ <code>postProcessAfterInitialization</code> æ˜¯åœ¨ Bean åˆå§‹åŒ–åæ‰§è¡Œçš„</li></ul></li><li><p>ç»è¿‡ä»¥ä¸Šçš„å·¥ä½œåï¼ŒBean å°†ä¸€ç›´é©»ç•™åœ¨åº”ç”¨ä¸Šä¸‹æ–‡ä¸­ç»™åº”ç”¨ä½¿ç”¨ï¼Œç›´åˆ°åº”ç”¨ä¸Šä¸‹æ–‡è¢«é”€æ¯</p></li><li><p>å¦‚æœ Bean å®ç°äº† <code>DispostbleBean</code> æ¥å£ï¼ŒSpring å°†è°ƒç”¨å®ƒçš„ <code>destory</code> æ–¹æ³•ï¼Œä½œç”¨ä¸åœ¨é…ç½®æ–‡ä»¶ä¸­å¯¹ Bean ä½¿ç”¨ <code>destory-method</code> å±æ€§çš„ä½œç”¨ä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨ Bean å®ä¾‹é”€æ¯å‰æ‰§è¡Œçš„æ–¹æ³•ã€‚</p></li></ol><h2 id="spring-bean-æ³¨å†Œ" tabindex="-1"><a class="header-anchor" href="#spring-bean-æ³¨å†Œ" aria-hidden="true">#</a> Spring Bean æ³¨å†Œ</h2><p>æ³¨å†Œ Spring Bean å®é™…ä¸Šæ˜¯å°† <code>BeanDefinition</code> æ³¨å†Œåˆ° IoC å®¹å™¨ä¸­ã€‚</p><h3 id="xml-é…ç½®å…ƒä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#xml-é…ç½®å…ƒä¿¡æ¯" aria-hidden="true">#</a> XML é…ç½®å…ƒä¿¡æ¯</h3><p>Spring çš„ä¼ ç»Ÿé…ç½®æ–¹å¼ã€‚åœ¨ <code>&lt;bean&gt;</code> æ ‡ç­¾ä¸­é…ç½®å…ƒæ•°æ®å†…å®¹ã€‚</p><p>ç¼ºç‚¹æ˜¯å½“ JavaBean è¿‡å¤šæ—¶ï¼Œäº§ç”Ÿçš„é…ç½®æ–‡ä»¶è¶³ä»¥è®©ä½ çœ¼èŠ±ç¼­ä¹±ã€‚</p><h3 id="æ³¨è§£é…ç½®å…ƒä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#æ³¨è§£é…ç½®å…ƒä¿¡æ¯" aria-hidden="true">#</a> æ³¨è§£é…ç½®å…ƒä¿¡æ¯</h3><p>ä½¿ç”¨ <code>@Bean</code>ã€<code>@Component</code>ã€<code>@Import</code> æ³¨è§£æ³¨å†Œ Spring Beanã€‚</p><h3 id="java-api-é…ç½®å…ƒä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#java-api-é…ç½®å…ƒä¿¡æ¯" aria-hidden="true">#</a> Java API é…ç½®å…ƒä¿¡æ¯</h3><ul><li>å‘½åæ–¹å¼ï¼š<code>BeanDefinitionRegistry#registerBeanDefinition(String,BeanDefinition)</code></li><li>éå‘½åæ–¹å¼ï¼š<code>BeanDefinitionReaderUtils#registerWithGeneratedName(AbstractBeanDefinition,BeanDefinitionRegistry)</code></li><li>é…ç½®ç±»æ–¹å¼ï¼š<code>AnnotatedBeanDefinitionReader#register(Class...)</code></li></ul>`,26),N={href:"https://github.com/dunwu/spring-tutorial/blob/master/codes/core/spring-core-ioc/src/test/java/io/github/dunwu/spring/core/bean/BeanRegistryTests.java",target:"_blank",rel:"noopener noreferrer"},J=o('<h2 id="spring-bean-å®ä¾‹åŒ–" tabindex="-1"><a class="header-anchor" href="#spring-bean-å®ä¾‹åŒ–" aria-hidden="true">#</a> Spring Bean å®ä¾‹åŒ–</h2><p>Spring Bean å®ä¾‹åŒ–æ–¹å¼ï¼š</p><ul><li>å¸¸è§„æ–¹å¼ <ul><li>é€šè¿‡æ„é€ å™¨ï¼ˆé…ç½®å…ƒä¿¡æ¯ï¼šXMLã€Java æ³¨è§£å’Œ Java APIï¼‰</li><li>é€šè¿‡é™æ€æ–¹æ³•ï¼ˆé…ç½®å…ƒä¿¡æ¯ï¼šXMLã€Java æ³¨è§£å’Œ Java APIï¼‰</li><li>é€šè¿‡ Bean å·¥å‚æ–¹æ³•ï¼ˆé…ç½®å…ƒä¿¡æ¯ï¼šXMLã€Java æ³¨è§£å’Œ Java APIï¼‰</li><li>é€šè¿‡ <code>FactoryBean</code>ï¼ˆé…ç½®å…ƒä¿¡æ¯ï¼šXMLã€Java æ³¨è§£å’Œ Java APIï¼‰</li></ul></li><li>ç‰¹æ®Šæ–¹å¼ <ul><li>é€šè¿‡ <code>ServiceLoaderFactoryBean</code>ï¼ˆé…ç½®å…ƒä¿¡æ¯ï¼šXMLã€Java æ³¨è§£å’Œ Java API ï¼‰</li><li>é€šè¿‡ <code>AutowireCapableBeanFactory#createBean(java.lang.Class, int, boolean)</code></li><li>é€šè¿‡ <code>BeanDefinitionRegistry#registerBeanDefinition(String,BeanDefinition)</code></li></ul></li></ul>',3),L={href:"https://github.com/dunwu/spring-tutorial/blob/master/codes/core/spring-core-ioc/src/test/java/io/github/dunwu/spring/core/bean/BeanInstantiationTests.java",target:"_blank",rel:"noopener noreferrer"},M={href:"https://github.com/dunwu/spring-tutorial/blob/master/codes/core/spring-core-ioc/src/test/java/io/github/dunwu/spring/core/bean/BeanInstantiationSpecialTests.java",target:"_blank",rel:"noopener noreferrer"},X=o('<h2 id="spring-bean-åˆå§‹åŒ–å’Œé”€æ¯" tabindex="-1"><a class="header-anchor" href="#spring-bean-åˆå§‹åŒ–å’Œé”€æ¯" aria-hidden="true">#</a> Spring Bean åˆå§‹åŒ–å’Œé”€æ¯</h2><p>Spring Bean åˆå§‹åŒ–å’Œé”€æ¯çš„æ–¹å¼æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ol><li><p>ä½¿ç”¨ <code>@PostConstruct</code> å’Œ <code>@PreDestroy</code> æ³¨è§£åˆ†åˆ«æŒ‡å®šç›¸åº”çš„åˆå§‹åŒ–æ–¹æ³•å’Œé”€æ¯æ–¹æ³•ã€‚</p></li><li><p>å®ç° <code>InitializingBean</code> æ¥å£çš„ <code>afterPropertiesSet()</code> æ–¹æ³•æ¥ç¼–å†™åˆå§‹åŒ–æ–¹æ³•ï¼›å®ç° <code>DisposableBean</code> æ¥å£çš„ <code>destroy()</code> æ–¹æ³•æ¥ç¼–å†™é”€æ¯æ–¹æ³•ã€‚</p><ul><li><code>InitializingBean</code> æ¥å£åŒ…å«ä¸€ä¸ª <code>afterPropertiesSet</code> æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡å®ç°è¯¥æ¥å£ï¼Œç„¶ååœ¨è¿™ä¸ªæ–¹æ³•ä¸­ç¼–å†™åˆå§‹åŒ–é€»è¾‘ã€‚</li><li><code>DisposableBean</code>æ¥å£åŒ…å«ä¸€ä¸ª <code>destory</code> æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡å®ç°è¯¥æ¥å£ï¼Œç„¶ååœ¨è¿™ä¸ªæ–¹æ³•ä¸­ç¼–å†™é”€æ¯é€»è¾‘ã€‚</li></ul></li><li><p>è‡ªå®šä¹‰åˆå§‹åŒ–æ–¹æ³•</p><ul><li>XML é…ç½®ï¼š<code>&lt;bean init-method=&quot;init&quot; destroy=&quot;destroy&quot; ... /&gt;</code></li><li>Java æ³¨è§£ï¼š<code>@Bean(initMethod = &quot;init&quot;, destroyMethod = &quot;destroy&quot;)</code></li><li>Java APIï¼š<code>AbstractBeanDefinition#setInitMethodName(String)</code> å’Œ <code>AbstractBeanDefinition#setDestroyMethodName(String)</code> åˆ†åˆ«å®šä¹‰åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•</li></ul></li></ol><p>æ³¨æ„ï¼šå¦‚æœåŒæ—¶å­˜åœ¨ï¼Œæ‰§è¡Œé¡ºåºä¼šæŒ‰ç…§åºåˆ—æ‰§è¡Œã€‚</p><p>Bean çš„å»¶è¿Ÿåˆå§‹åŒ–</p><ul><li>xml æ–¹å¼ï¼š<code>&lt;bean lazy-init=&quot;true&quot; ... /&gt;</code></li><li>æ³¨è§£æ–¹å¼ï¼š<code>@Lazy</code></li></ul><p>Spring æä¾›äº†ä¸€ä¸ª <code>BeanPostProcessor</code> æ¥å£ï¼Œæä¾›äº†ä¸¤ä¸ªæ–¹æ³• <code>postProcessBeforeInitialization</code> å’Œ <code>postProcessAfterInitialization</code>ã€‚å…¶ä¸­<code>postProcessBeforeInitialization</code> åœ¨ç»„ä»¶çš„åˆå§‹åŒ–æ–¹æ³•è°ƒç”¨ä¹‹å‰æ‰§è¡Œï¼Œ<code>postProcessAfterInitialization</code> åœ¨ç»„ä»¶çš„åˆå§‹åŒ–æ–¹æ³•è°ƒç”¨ä¹‹åæ‰§è¡Œã€‚å®ƒä»¬éƒ½åŒ…å«ä¸¤ä¸ªå…¥å‚ï¼š</p><ul><li><code>bean</code>ï¼šå½“å‰ç»„ä»¶å¯¹è±¡ï¼›</li><li><code>beanName</code>ï¼šå½“å‰ç»„ä»¶åœ¨å®¹å™¨ä¸­çš„åç§°ã€‚</li></ul>',8),F={href:"https://github.com/dunwu/spring-tutorial/blob/master/codes/core/spring-core-ioc/src/test/java/io/github/dunwu/spring/core/bean/BeanInitDestroyTests.java",target:"_blank",rel:"noopener noreferrer"},R=o('<h2 id="spring-bean-åƒåœ¾å›æ”¶" tabindex="-1"><a class="header-anchor" href="#spring-bean-åƒåœ¾å›æ”¶" aria-hidden="true">#</a> Spring Bean åƒåœ¾å›æ”¶</h2><p>Spring Bean åƒåœ¾å›æ”¶æ­¥éª¤ï¼š</p><ol><li>å…³é—­ Spring å®¹å™¨ï¼ˆåº”ç”¨ä¸Šä¸‹æ–‡ï¼‰</li><li>æ‰§è¡Œ GC</li><li>Spring Bean è¦†ç›–çš„ <code>finalize()</code> æ–¹æ³•è¢«å›è°ƒ</li></ol><h2 id="spring-bean-ä½œç”¨èŒƒå›´" tabindex="-1"><a class="header-anchor" href="#spring-bean-ä½œç”¨èŒƒå›´" aria-hidden="true">#</a> Spring Bean ä½œç”¨èŒƒå›´</h2>',4),G=e("thead",null,[e("tr",null,[e("th",{style:{"text-align":"left"}},"Scope"),e("th",{style:{"text-align":"left"}},"Description")])],-1),O={style:{"text-align":"left"}},V={href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-singleton",target:"_blank",rel:"noopener noreferrer"},E=e("td",{style:{"text-align":"left"}},"(Default) Scopes a single bean definition to a single object instance for each Spring IoC container.",-1),H={style:{"text-align":"left"}},U={href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-prototype",target:"_blank",rel:"noopener noreferrer"},W=e("td",{style:{"text-align":"left"}},"Scopes a single bean definition to any number of object instances.",-1),K={style:{"text-align":"left"}},Q={href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-request",target:"_blank",rel:"noopener noreferrer"},Y=e("td",{style:{"text-align":"left"}},[n("Scopes a single bean definition to the lifecycle of a single HTTP request. That is, each HTTP request has its own instance of a bean created off the back of a single bean definition. Only valid in the context of a web-aware Spring "),e("code",null,"ApplicationContext"),n(".")],-1),Z={style:{"text-align":"left"}},$={href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-session",target:"_blank",rel:"noopener noreferrer"},ee=e("td",{style:{"text-align":"left"}},[n("Scopes a single bean definition to the lifecycle of an HTTP "),e("code",null,"Session"),n(". Only valid in the context of a web-aware Spring "),e("code",null,"ApplicationContext"),n(".")],-1),ne={style:{"text-align":"left"}},ae={href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-application",target:"_blank",rel:"noopener noreferrer"},te=e("td",{style:{"text-align":"left"}},[n("Scopes a single bean definition to the lifecycle of a "),e("code",null,"ServletContext"),n(". Only valid in the context of a web-aware Spring "),e("code",null,"ApplicationContext"),n(".")],-1),oe={style:{"text-align":"left"}},ie={href:"https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#websocket-stomp-websocket-scope",target:"_blank",rel:"noopener noreferrer"},re=e("td",{style:{"text-align":"left"}},[n("Scopes a single bean definition to the lifecycle of a "),e("code",null,"WebSocket"),n(". Only valid in the context of a web-aware Spring "),e("code",null,"ApplicationContext"),n(".")],-1),se=e("h2",{id:"å‚è€ƒèµ„æ–™",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#å‚è€ƒèµ„æ–™","aria-hidden":"true"},"#"),n(" å‚è€ƒèµ„æ–™")],-1),le={href:"https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/core.html#beans",target:"_blank",rel:"noopener noreferrer"},ce={href:"https://time.geekbang.org/course/intro/265",target:"_blank",rel:"noopener noreferrer"};function de(pe,ue){const a=r("ExternalLinkIcon");return s(),l("div",null,[d,e("table",null,[p,e("tbody",null,[e("tr",null,[e("td",null,[e("a",u,[n("Class"),t(a)])]),h]),e("tr",null,[e("td",null,[e("a",g,[n("Name"),t(a)])]),f]),e("tr",null,[e("td",null,[e("a",b,[n("Scope"),t(a)])]),B]),e("tr",null,[e("td",null,[e("a",_,[n("Constructor arguments"),t(a)])]),m]),e("tr",null,[e("td",null,[e("a",k,[n("Properties"),t(a)])]),y]),e("tr",null,[e("td",null,[e("a",S,[n("Autowiring mode"),t(a)])]),v]),e("tr",null,[e("td",null,[e("a",x,[n("Lazy initialization mode"),t(a)])]),w]),e("tr",null,[e("td",null,[e("a",D,[n("Initialization method"),t(a)])]),q]),e("tr",null,[e("td",null,[e("a",I,[n("Destruction method"),t(a)])]),A])])]),P,C,z,e("blockquote",null,[e("p",null,[n("ğŸ’» Spring Bean å®šä¹‰ç¤ºä¾‹æºç ï¼š"),e("a",T,[n("BeanDefinitionTests"),t(a)])])]),j,e("blockquote",null,[e("p",null,[n("ğŸ’» Spring Bean æ³¨å†Œç¤ºä¾‹æºç ï¼š"),e("a",N,[n("BeanRegistryTests"),t(a)])])]),J,e("blockquote",null,[e("p",null,[n("ğŸ’» Spring Bean å®ä¾‹åŒ–ç¤ºä¾‹æºç ï¼š"),e("a",L,[n("BeanInstantiationTests"),t(a)]),n("ã€"),e("a",M,[n("BeanInstantiationSpecialTests"),t(a)])])]),X,e("blockquote",null,[e("p",null,[n("ğŸ’» Spring Bean åˆå§‹åŒ–å’Œé”€æ¯ç¤ºä¾‹æºç ï¼š"),e("a",F,[n("BeanInitDestroyTests"),t(a)])])]),R,e("table",null,[G,e("tbody",null,[e("tr",null,[e("td",O,[e("a",V,[n("singleton"),t(a)])]),E]),e("tr",null,[e("td",H,[e("a",U,[n("prototype"),t(a)])]),W]),e("tr",null,[e("td",K,[e("a",Q,[n("request"),t(a)])]),Y]),e("tr",null,[e("td",Z,[e("a",$,[n("session"),t(a)])]),ee]),e("tr",null,[e("td",ne,[e("a",ae,[n("application"),t(a)])]),te]),e("tr",null,[e("td",oe,[e("a",ie,[n("websocket"),t(a)])]),re])])]),se,e("ul",null,[e("li",null,[e("a",le,[n("Spring å®˜æ–¹æ–‡æ¡£ä¹‹ Core Technologies"),t(a)])]),e("li",null,[e("a",ce,[n("ã€Šå°é©¬å“¥è®² Spring æ ¸å¿ƒç¼–ç¨‹æ€æƒ³ã€‹"),t(a)])])])])}const fe=i(c,[["render",de],["__file","index.html.vue"]]);export{fe as default};
